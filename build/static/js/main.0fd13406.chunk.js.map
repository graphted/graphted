{"version":3,"sources":["data/NodeImages sync /^/.*$","data/NodeImages/Consumer-IoT_CIoT/Sound.svg","data/NodeImages/Consumer-IoT_CIoT/amazon-alexa-tower-clock-tower-building.png","data/NodeImages/Consumer-IoT_CIoT/blank-tablet.svg","data/NodeImages/Consumer-IoT_CIoT/board.svg","data/NodeImages/Consumer-IoT_CIoT/clock.svg","data/NodeImages/Consumer-IoT_CIoT/glasses.svg","data/NodeImages/Consumer-IoT_CIoT/laptop.svg","data/NodeImages/Consumer-IoT_CIoT/lawn-mower.svg","data/NodeImages/Consumer-IoT_CIoT/lightbulb.svg","data/NodeImages/Consumer-IoT_CIoT/lock.svg","data/NodeImages/Consumer-IoT_CIoT/power-outlet.svg","data/NodeImages/Consumer-IoT_CIoT/power.svg","data/NodeImages/Consumer-IoT_CIoT/smart-home-lock.svg","data/NodeImages/Consumer-IoT_CIoT/smart-home-thermostat.svg","data/NodeImages/Consumer-IoT_CIoT/smart-home-wifi.svg","data/NodeImages/Consumer-IoT_CIoT/smartphone.svg","data/NodeImages/Consumer-IoT_CIoT/surveillance_camera.svg","data/NodeImages/Consumer-IoT_CIoT/tv-screen.svg","data/NodeImages/Consumer-IoT_CIoT/vacuum.svg","data/NodeImages/Consumer-IoT_CIoT/vr-headset.svg","data/NodeImages/Consumer-IoT_CIoT/watch.svg","data/NodeImages/Consumer-IoT_CIoT/wifi.svg","data/NodeImages/Consumer-IoT_CIoT/window-cleaner.svg","data/NodeImages/Industrial-IoT_IIoT/communication-devices.PNG","data/NodeImages/Industrial-IoT_IIoT/control-devices.PNG","data/NodeImages/Industrial-IoT_IIoT/control-system.svg","data/NodeImages/Industrial-IoT_IIoT/database-svgrepo-com.svg","data/NodeImages/Industrial-IoT_IIoT/enterprise-erp.svg","data/NodeImages/Industrial-IoT_IIoT/field-devices.PNG","data/NodeImages/Industrial-IoT_IIoT/further-devices.PNG","data/NodeImages/Industrial-IoT_IIoT/information-system.svg","data/NodeImages/Industrial-IoT_IIoT/manufactoring-equipment.PNG","data/NodeImages/Industrial-IoT_IIoT/production-machines.PNG","data/NodeImages/Other Images/Avatar.svg","data/NodeImages/Other Images/bell.svg","data/NodeImages/Other Images/cloud.svg","data/NodeImages/Other Images/floppy-disk.svg","data/NodeImages/Other Images/harddrive.svg","data/NodeImages/Other Images/meter-display.svg","data/NodeImages/Other Images/switch-1.svg","data/NodeImages/Other Images/switch-2.svg","data/NodeImages/Other Images/thermometer.svg","data/NodeImages/Other Images/water-tap.svg","data/Stencils sync /^/.*$","data/Stencils/Stencils/stencils.xml","reportWebVitals.tsx","mx.ts","draggable-nodes/DraggableNode.tsx","draggable-nodes/VertexNode.tsx","draggable-nodes/SingleNode.tsx","iot/data-structure-utils/IotPropertyTypes.tsx","Utils/MxCodecFrameworkFix.tsx","Utils/UtilityFunctions.tsx","SgUtilities.tsx","draggable-nodes/ImageNode.tsx","FileUtils.tsx","Actions.tsx","Utils/StyleEditorActions.tsx","Utils/GraphFileUtils.tsx","Utils/ContentUtility.tsx","Menubar/MenubarToolbar.tsx","images/logo.png","PrimeAccordion.tsx","Utils/StyleEditorOptions.tsx","TabView/PrimeTabViewElement.tsx","TabView/PrimeTabViewElementCheckbox.tsx","TabView/ExtendedColorPicker.tsx","TabView/ExtendedInputNumber.tsx","iot/renderer/PointSelection.tsx","iot/IotGuiUtils.tsx","iot/renderer/Questionary.tsx","TabView/PrimeTabView.tsx","grapheditor-example/www/styles/default.xml","GraphEditor.tsx","index.tsx"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","mx","factory","mxBasePath","mxImageBasePath","console","log","mxClient","VERSION","DraggableNode","graphF","evt","graph","props","x","mxEvent","getClientX","y","getClientY","elt","document","elementFromPoint","mxUtils","isAncestorNode","container","initializeDragElement","ele","ds","makeDraggable","target","insertCell","undefined","autoScroll","isGuidesEnabled","graphHandler","guidesEnabled","createDragElement","mxDragSource","prototype","Component","VertexNode","divRef","React","createRef","bind","this","state","cellId","current","parent","getDefaultParent","value","data","width","height","cell","insertVertex","setState","title","ref","defaultProps","connectorTypes","SingleNode","imageRef","includes","mxCell","mxGeometry","geometry","setTerminalPoint","mxPoint","relative","edge","addCell","fireEvent","mxEventObject","exportSvgCode","scale","view","bounds","getGraphBounds","svgDoc","createXmlDocument","root","createElementNS","mxConstants","NS_SVG","createElement","setAttribute","Math","ceil","NS_XLINK","group","appendChild","svgCanvas","mxSvgCanvas2D","translate","floor","mxImageExport","drawState","getView","getState","model","debug","outerHTML","copyStylesheet","targetGraph","sourceGraph","getStylesheet","getModel","beginUpdate","setStylesheet","endUpdate","cellToSVG","ReactDOM","findDOMNode","refs","invisibleDivGraph","mxGraph","mxStencilRegistry","stencils","stencilRegistry","v1","v2","insertEdge","svgCode","remove","drawShape","svgCellSource","srcString","src","onLoad","loadShape","alt","svg","hidden","className","convertNumberToPointRange","groupName","details","setValue","isSelected","createPointRange","evaluatePoints","points","defaultValue","point","filter","reduce","previousValue","currentValue","evaluateProperty","property","result","categories","forEach","categoryArray","upperCategory","item","subproperties","subproperty","isNaN","isPointIncluded","invalidValues","elem","push","length","getMaxSumOfProperty","isSelectionDependend","questionaryPoints","pointsCategory","max","pointsSubproperty","mxCodec","KNOWN_OBJECTS","mxLog","mxObjectIdentity","mxDictionary","mxResources","mxRectangle","mxEffects","mxMouseEvent","mxEventSource","mxXmlRequest","mxClipboard","mxWindow","mxForm","mxImage","mxDivResizer","mxToolbar","mxUndoableEdit","mxUndoManager","mxUrlConverter","mxPanningManager","mxPopupMenu","mxAutoSaveManager","mxAnimation","mxMorphing","mxImageBundle","mxAbstractCanvas2D","mxXmlCanvas2D","mxVmlCanvas2D","mxGuide","mxShape","mxStencil","mxMarker","mxActor","mxCloud","mxRectangleShape","mxEllipse","mxDoubleEllipse","mxRhombus","mxPolyline","mxArrow","mxArrowConnector","mxText","mxTriangle","mxHexagon","mxLine","mxImageShape","mxLabel","mxCylinder","mxConnector","mxSwimlane","mxGraphLayout","mxStackLayout","mxPartitionLayout","mxCompactTreeLayout","mxRadialTreeLayout","mxFastOrganicLayout","mxCircleLayout","mxParallelEdgeLayout","mxCompositeLayout","mxEdgeLabelLayout","mxGraphAbstractHierarchyCell","mxGraphHierarchyNode","mxGraphHierarchyEdge","mxGraphHierarchyModel","mxSwimlaneModel","mxHierarchicalLayoutStage","mxMedianHybridCrossingReduction","mxMinimumCycleRemover","mxCoordinateAssignment","mxSwimlaneOrdering","mxHierarchicalLayout","mxSwimlaneLayout","mxGraphModel","mxCellPath","mxPerimeter","mxPrintPreview","mxStylesheet","mxCellState","mxGraphSelectionModel","mxCellEditor","mxCellRenderer","mxEdgeStyle","mxStyleRegistry","mxGraphView","mxCellOverlay","mxOutline","mxMultiplicity","mxLayoutManager","mxSwimlaneManager","mxTemporaryCellStates","mxCellStatePreview","mxConnectionConstraint","mxGraphHandler","mxPanningHandler","mxPopupMenuHandler","mxCellMarker","mxSelectionCellsHandler","mxConnectionHandler","mxConstraintHandler","mxRubberband","mxHandle","mxVertexHandler","mxEdgeHandler","mxElbowEdgeHandler","mxEdgeSegmentHandler","mxKeyHandler","mxTooltipHandler","mxCellTracker","mxCellHighlight","mxDefaultKeyHandler","mxDefaultPopupMenu","mxDefaultToolbar","mxEditor","mxCodecRegistry","mxObjectCodec","mxCellCodec","mxModelCodec","mxRootChangeCodec","mxChildChangeCodec","mxTerminalChangeCodec","mxGenericChangeCodec","mxGraphCodec","mxGraphViewCodec","mxStylesheetCodec","mxDefaultKeyHandlerCodec","mxDefaultToolbarCodec","mxDefaultPopupMenuCodec","mxEditorCodec","Array","array","decode","node","into","obj","nodeType","NODETYPE_ELEMENT","ctor","nodeName","err","error","dec","getCodec","cloneNode","removeAttribute","rgbaColorString","color","a","r","g","b","hexToRgba","hexColor","rgbHexPairs","match","parseInt","isRgbaValid","isRValid","isGValid","isBValid","isAValid","rgbaToHexString","numToStr","number","toString","padStart","getRgba","useDefault","defaultColor","colorString","toLowerCase","replaceAll","colorNameAsHex","cssColorNames","rgbaColor","rgbaRegexp","rgbaHexPairs","groups","Number","toCamelCase","input","camelCaseString","i","toUpperCase","getVertexCells","cells","isVertex","getEdgeCells","isEdge","getConnectedCells","isConnectable","getCollapsedCells","isCollapsed","prepareCellStyleString","cellStyle","endsWith","slice","getStyleSetFromCellStyleString","cellStylesTable","split","pair","Set","styleMapToCellString","styleMap","getStyleSetFromStyleMap","getStyleMapFromCellStyleString","cellStylesMap","Map","entry","set","getAllStyleMapFromCellStyleString","savedElement","get","add","newSet","getStyleMap","getStyle","unionOfSet","setA","setB","_union","getFromCorrespondingMap","vertexStyles","edgeStyles","key","fallback","size","getCellStyleMapForCellShape","styleSheet","cellStyleMap","cellShape","defaultStyle","getDefaultVertexStyle","getDefaultEdgeStyle","resultingStyle","entries","defaultCellStyleMap","getCellStyle","has","getStyleAttributes","allStyles","jsonMapReplacer","val","concat","dataType","jsonMapReviver","Entry","dataUrlToCellStyle","semi","indexOf","substring","url","callback","xhr","XMLHttpRequest","onload","reader","FileReader","onloadend","readAsDataURL","response","open","responseType","send","ImageNode","isImageLoaded","imageData","onImgLoad","currentTarget","sgUtilities","base64endoding","imageTitle","importAllImages","images","parentFolder","path","dirname","replace","currentFileInfo","default","filename","basename","filepath","fileInfoArr","loadImageFolder","require","loadShapeArray","name","shape","cellRenderer","getShape","stencil","getStencil","isShapeAvailable","loadImageFolderToNode","includeAccordionTabs","from","header","imageNodesData","imageNodes","loadImageArray","Fragment","loadImages","loadStencilFolderToNode","loadFile","loadStencilXmlString","createSvg","shapeNames","shapes","defaultShapes","getDefaultShapes","customStencilsNames","apply","shapeNodes","loadStencil","fetch","text","readFileAsGraph","file","readAsText","filecontent","doc","parseXml","ownerDocument","clear","message","resetGraph","wrapper","actions","documentElement","onerror","firstChild","addStencil","getAttribute","nextSibling","setStyles","styleConstants","values","setCellStyles","getSelectionCells","setStylesOfCells","setFontColor","STYLE_FONTCOLOR","setLabelBackgroundColor","STYLE_LABEL_BACKGROUNDCOLOR","setLabelBorderColor","STYLE_LABEL_BORDERCOLOR","setImageBorder","STYLE_IMAGE_BORDER","setGradientColor","STYLE_GRADIENTCOLOR","setStrokeColor","STYLE_STROKECOLOR","setLaneColor","STYLE_SWIMLANE_FILLCOLOR","fill","useHex","STYLE_FILLCOLOR","setLineStart","arrowType","STYLE_STARTARROW","setLineEnd","STYLE_ENDARROW","setRotation","degree","min","STYLE_ROTATION","setStyle","style","distributeCells","horizontal","vertices","tmp","getCenterX","getCenterY","sort","t","s","dt","t0","pstate","getParent","geo","getCellGeometry","clone","round","origin","setGeometry","cut","copy","paste","pasteHere","getVertexDropLocation","boundingBox","getBoundingBoxFromGeometry","dx","dy","cellsMoved","moveToMouse","pt","tr","getPointDropLocation","convertPoint","duplicate","setSelectionCells","border","getSelectionCount","setSelectionCell","groupCells","ungroup","firstSelectedCell","isSelectionGrouped","getChildCount","ungroupCells","alert","undo","undoMgr","redo","selectAll","selectCurrentSelectionOrRoot","selectionCell","getSelectionCell","getCurrentRoot","selectAllVertices","selectVertices","selectAllEdges","selectEdges","selectAllDataSources","sourceType","propertyNameOfDataSources","propertyNameOfDataType","children","flattendCells","flatMap","getChildren","dataSourceCells","usedDatasource","getCellsWithTrustScores","trustScore","parseFloat","getCellsWithAttribute","attributeName","clearSelection","selectionToFront","orderCells","selectionToBack","deleteSelection","isEnabled","removeCells","deleteAll","setTooltips","setConnectable","foldingEnabled","pageBreaksVisible","pageVisible","preferPageSize","pageScale","pageFormat","validateBackground","overflow","updateGraphComponents","setScale","saveXml","isEditing","stopEditing","xml","getXml","ignoreSelection","encode","isGridEnabled","gridSize","tooltipHandler","connectionHandler","getGraphXml","openFile","handleFilenameChange","fileSelector","onchange","files","fileUtils","openStencilFile","saveFile","content","myBlob","Blob","type","window","URL","createObjectURL","anchor","href","download","click","revokeObjectURL","addWaypoint","handler","selectionCellsHandler","getHandler","parentGeometry","snap","popupMenuHandler","triggerX","triggerY","addPointAt","removeWaypoint","indexToRemove","Infinity","index","distance","getVectorLength","getClosestPointToSelection","splice","sqrt","pow","clearAllWaypoints","addAllEdges","getCellSourcePoint","getGeometry","sourcePoint","getTerminal","getCellTargetPoint","targetPoint","getCellPosition","copiedVertexGeometry","setCellPosition","position","setVertexGeometry","getCellScale","setCellScale","scaling","copiedCellGeometryInformation","isScaling","isPosition","isSelectionEmpty","setEdgePointOfSelection","copiedPoint","isSource","amountChildren","getChildAt","getCellDataAsJson","json","isNode","Parser","parseString","utilityFunctions","constructor","getEditData","tagName","getValue","setBasicEditData","label","getJsonFromAttribute","editData","defaultJson","jsonEditData","jsonAttribute","stringifiedJson","JSON","stringify","parse","setEditDataJson","attribute","valueIsXMLNode","oldLabel","setEditData","iotTypes","isValidQuestionnaire","score","evaluateQuestionary","newLabel","updateScoreTextLabel","updateScoreInLabel","trim","currentLabel","scoreText","toFixed","RegExp","removeEditDataJson","qualifiedName","evaluateEditData","getJsonFromCell","getId","editDataGetMaxSumOfPropertyPoints","colorizeDataSources","colors","STYLE_STROKEWIDTH","STYLE_DASHED","STYLE_DASH_PATTERN","currentParent","dataSourceCellsType","isCellInGroup","parents","getParents","childrenWithMetadata","getChildCells","child","setting","styleEditorActions","colorizeDataSource","selectPropertyType","targetType","defaultToWholeGraphSelection","selectionCells","selectedCells","cellType","Property","currentStyleSheetXml","currentStyleSheetXmlString","getPrettyXml","xmlString","codec","getHelpInformation","textAlign","MenubarToolbar","menuItems","items","icon","PrimeIcons","PLUS","command","editorActions","location","FILE","separator","SAVE","showSaveAsModal","DOWNLOAD","PRINT","PAGE_FORMAT_A4_PORTRAIT","fromRectangle","printScale","divContents","getElementById","innerHTML","windowTitle","write","close","print","graphFileUtils","REPLAY","REFRESH","COPY","TIMES","CLONE","showEditStyleModal","SEARCH","zoomTo","SEARCH_PLUS","zoomIn","SEARCH_MINUS","zoomOut","QUESTION_CIRCLE","showHelpModal","INFO_CIRCLE","showKeyboardModal","showAboutModal","start","onError","displayModal","displayHelp","displaySaveAs","zIndex","PrimeAccordion","activeIndex","onChange","multiple","getSubOptions","allOptions","startIndex","subOptions","getOptionKeyFromStyle","optionCanditates","possibleOptionCanditate","possibleOptionStyles","option","styleKey","optionStyleValues","isFullyIncluded","styleValue","checkedValue","addOptionToMap","inputMap","getLineTypeOptions","STYLE_ROUNDED","STYLE_CURVED","getGeneralLineTypeOptions","getStyleLabelPositionOptions","STYLE_LABEL_POSITION","STYLE_VERTICAL_LABEL_POSITION","ALIGN_CENTER","ALIGN_MIDDLE","ALIGN_TOP","ALIGN_LEFT","ALIGN_RIGHT","ALIGN_BOTTOM","getAdvancedLabelPositionOptions","STYLE_ALIGN","STYLE_VERTICAL_ALIGN","getLabelWritingDirectionOptions","STYLE_TEXT_DIRECTION","TEXT_DIRECTION_AUTO","TEXT_DIRECTION_RTL","TEXT_DIRECTION_LTR","getTextAlignmentOptions","getArrowTypeOptions","ARROW_CLASSIC","ARROW_CLASSIC_THIN","ARROW_BLOCK","ARROW_BLOCK_THIN","ARROW_DIAMOND","ARROW_DIAMOND_THIN","ARROW_OPEN","ARROW_OPEN_THIN","NONE","getWaypointStyleOptions","STYLE_EDGE","STYLE_NOEDGESTYLE","sprite","STYLE_ELBOW","getConnectionStyleOptions","STYLE_SHAPE","getDirectionOptions","STYLE_DIRECTION","DIRECTION_NORTH","DIRECTION_EAST","DIRECTION_SOUTH","DIRECTION_WEST","PrimeTabViewElement","PrimeTabViewElementCheckbox","checked","inputId","sharedId","htmlFor","optionLabel","CustomColorPicker","showColorPicker","event","displayColorPicker","marginLeft","handleCheckboxChange","onClick","backgroundColor","top","right","bottom","left","handleColorChange","rgb","CustomInputNumber","onValueChange","showButtons","mode","suffix","minFractionDigits","PointSelection","selection","STARTINDEX","elementIndex","elementKey","upperCategoryID","savedSelectionKey","savedSelectioElementKey","elementName","oldIndex","tooltip","cursor","getMetadataTemplates","templates","iiotDataProviderJson","ciotDataProviderJson","iiotDataStoreJson","template","getJsonObject","getTemplateName","defaultMetadataJson","join","templateName","charAt","Questionary","renderSubproperty","renderPoints","subpropertyPoints","isArray","DEBUG","renderCategory","category","description","renderCategoryMap","categoriesObject","jsxElements","renderProperty","getPropertyHeader","iotGuiUtils","onTemplateChange","saveAndCloseQuestionary","handleDisplayResponsiveChange","handleSave","handleCellMetadataChange","modal","renderUpperMenuQuestionary","footer","handleExit","autoFocus","visible","displayResponsive","onHide","onShow","breakpoints","fontWeight","fontSize","options","optionValue","placeholder","margin","PrimeTabView","handleLineColorChange","lineColor","handleswimlaneFillColorChange","swimlaneFillColor","handleFillColorChange","fillColor","handleGradientColorChange","gradientColor","handleFontColorChange","fontColor","handlelabelBackgroundColorChange","labelBackgroundColor","handlelabelBorderColorChange","labelBorderColor","handleimageBorderChange","imageBorder","handleDisplayEditDataPanelChange","displayEditDataPanel","cellMetadata","handleDefaultMetadataJsonChange","handleEditDataChange","updateSpacingOptionElement","arrayCopy","spacingOptions","getTooltipForCell","getEdgeCount","getStyleKeys","uniqueStylesFromSelection","getStyles","hasVertexCells","hasEdgeCells","defaultStyleConnector","linePattern","styleEditorOptions","lineConnection","edgeStyle","copiedSize","copiedPosition","copiedStyle","isComponentIncluded","tabViewComponents","some","component","getStyleOptionStyle","styleEditorOption","getStyleOptionStyleFromCorrespondingStyles","renderDiagramTab","renderDebugTab","vertexCells","edgeCells","connectableCells","collapsedCells","currentStyle","currentStyleSheet","currentSelection","possibleConstants","hasOwnProperty","renderMetadataTab","allCells","isSomethingSelected","selectedGroups","getCellsForUngroup","isGroupSelected","scoreAlert","metric","generalButtons","align","scoreButtons","questionnaireButtons","editDataAndSave","removeDataAndSave","onSelectionElements","renderElements","allShapes","functionalComponents","tabview","renderTabpanelStyle","renderTabpanelText","renderTabpanelArrange","setTabViewComponents","renderTabview","strokeWidth","labelPosition","gradientDirection","perimeterSpacing","shadow","rounded","isFilled","fontFamily","endArrow","startArrow","textDirection","textLayoutDirection","STYLE_SPACING","STYLE_SPACING_TOP","STYLE_SPACING_LEFT","STYLE_SPACING_BOTTOM","STYLE_SPACING_RIGHT","currentEditingOption","whiteSpace","leftPosition","topPosition","leftLineStartPosition","topLineStartPosition","leftLineEndPosition","topLineEndPosition","rotationAngle","aspect","isImageFlippedHorizontal","isImageFlippedVertical","editedStyle","availableComponents","tabpanelName","sections","deviderLabel","tabviewComponents","tabpanel","currentCellStyleMap","isGradientUsed","isFillColorUsed","isChecked","labelWidth","gradientDefaultColor","STYLE_PERIMETER_SPACING","toggle","STYLE_SHADOW","setCellStyle","editable","arrowTypeStart","STYLE_FONTSIZE","STYLE_FONTFAMILY","STYLE_FONTSTYLE","FONT_BOLD","FONT_ITALIC","FONT_STRIKETHROUGH","FONT_UNDERLINE","styleConstant","cellEditor","getEditingCell","toggleCellStyleFlags","STYLE_WHITE_SPACE","setHorizontal","STYLE_HORIZONTAL","xNew","sx","sy","pos","yNew","STYLE_ASPECT","rotate90Degree","alignCells","isFlipped","toggleCellStyles","STYLE_FLIPH","STYLE_FLIPV","metadata","onTabChange","dynamicallyRenderTabs","renderNotIncludedList","tab","section","toLocaleLowerCase","String","DEFAULT_FILENAME","SimpleGraphEditor","divGraph","modalTitle","modalContent","displayEditStyle","updateGraph","addOverlays","deleteImage","overlay","offset","addListener","CLICK","sender","addCellOverlay","deleteCells","escape","addMouseWheelZoom","isInitialized","deltaY","initializeUndomanager","undoManager","listener","undoableEditHappened","getProperty","UNDO","setGraphSetting","that","setPanning","setCellsEditable","setEnabled","setHtmlLabels","centerZoom","resizeContainer","factoryMethod","menu","createPopupMenu","getSelectionModel","CHANGE","stopPropagation","preventDefault","dropImage","loadStylesheet","rotationEnabled","isRecursiveResize","me","isRecursiveVertexResize","isControlDown","getEvent","rotateClick","angle","mod","convertValueToString","isReplacePlaceholders","hasAttribute","arguments","cellLabelChanged","autoSize","zapGremlins","getRoot","setAttributeForCell","valueForCellChanged","previousValueIsXMLNode","updateLabelElements","fn","div","isHtmlLabel","elts","getElementsByTagName","j","charCodeAt","attributeValue","isSwimlane","isCellCollapsed","filesArray","dataTransfer","handleDrop","File","FileList","insertImage","addItem","consume","selectCells","addSeparator","defaultXml","xmlText","decoded","addKeysbindings","addGlobalKeysbindings","LoadGraph","focus","ctrlKey","metaKey","previousSelectionCount","altKey","shiftKey","hideMenu","startEditingAtCell","info","img","Image","onwheel","isBrowserSupported","disableContextMenu","defaultText","chromeUserAgent","navigator","userAgent","onKeyDown","onMouseEnter","rows","cols","outline","onWheel","tabIndex","render","StrictMode"],"mappings":"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","file":"static/js/main.0fd13406.chunk.js","sourcesContent":["var map = {\n\t\"./Consumer-IoT_CIoT/Sound.svg\": 199,\n\t\"./Consumer-IoT_CIoT/amazon-alexa-tower-clock-tower-building.png\": 200,\n\t\"./Consumer-IoT_CIoT/blank-tablet.svg\": 201,\n\t\"./Consumer-IoT_CIoT/board.svg\": 202,\n\t\"./Consumer-IoT_CIoT/clock.svg\": 203,\n\t\"./Consumer-IoT_CIoT/glasses.svg\": 204,\n\t\"./Consumer-IoT_CIoT/laptop.svg\": 205,\n\t\"./Consumer-IoT_CIoT/lawn-mower.svg\": 206,\n\t\"./Consumer-IoT_CIoT/lightbulb.svg\": 207,\n\t\"./Consumer-IoT_CIoT/lock.svg\": 208,\n\t\"./Consumer-IoT_CIoT/power-outlet.svg\": 209,\n\t\"./Consumer-IoT_CIoT/power.svg\": 210,\n\t\"./Consumer-IoT_CIoT/smart-home-lock.svg\": 211,\n\t\"./Consumer-IoT_CIoT/smart-home-thermostat.svg\": 212,\n\t\"./Consumer-IoT_CIoT/smart-home-wifi.svg\": 213,\n\t\"./Consumer-IoT_CIoT/smartphone.svg\": 214,\n\t\"./Consumer-IoT_CIoT/surveillance_camera.svg\": 215,\n\t\"./Consumer-IoT_CIoT/tv-screen.svg\": 216,\n\t\"./Consumer-IoT_CIoT/vacuum.svg\": 217,\n\t\"./Consumer-IoT_CIoT/vr-headset.svg\": 218,\n\t\"./Consumer-IoT_CIoT/watch.svg\": 219,\n\t\"./Consumer-IoT_CIoT/wifi.svg\": 220,\n\t\"./Consumer-IoT_CIoT/window-cleaner.svg\": 221,\n\t\"./Industrial-IoT_IIoT/communication-devices.PNG\": 222,\n\t\"./Industrial-IoT_IIoT/control-devices.PNG\": 223,\n\t\"./Industrial-IoT_IIoT/control-system.svg\": 224,\n\t\"./Industrial-IoT_IIoT/database-svgrepo-com.svg\": 225,\n\t\"./Industrial-IoT_IIoT/enterprise-erp.svg\": 226,\n\t\"./Industrial-IoT_IIoT/field-devices.PNG\": 227,\n\t\"./Industrial-IoT_IIoT/further-devices.PNG\": 228,\n\t\"./Industrial-IoT_IIoT/information-system.svg\": 229,\n\t\"./Industrial-IoT_IIoT/manufactoring-equipment.PNG\": 230,\n\t\"./Industrial-IoT_IIoT/production-machines.PNG\": 231,\n\t\"./Other Images/Avatar.svg\": 232,\n\t\"./Other Images/bell.svg\": 233,\n\t\"./Other Images/cloud.svg\": 234,\n\t\"./Other Images/floppy-disk.svg\": 235,\n\t\"./Other Images/harddrive.svg\": 236,\n\t\"./Other Images/meter-display.svg\": 237,\n\t\"./Other Images/switch-1.svg\": 238,\n\t\"./Other Images/switch-2.svg\": 239,\n\t\"./Other Images/thermometer.svg\": 240,\n\t\"./Other Images/water-tap.svg\": 241\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 198;","export default __webpack_public_path__ + \"static/media/Sound.30206cff.svg\";","export default __webpack_public_path__ + \"static/media/amazon-alexa-tower-clock-tower-building.50b0937e.png\";","export default __webpack_public_path__ + \"static/media/blank-tablet.01b010c7.svg\";","export default __webpack_public_path__ + \"static/media/board.29cad0bb.svg\";","export default __webpack_public_path__ + \"static/media/clock.57c6c084.svg\";","export default __webpack_public_path__ + \"static/media/glasses.5e29f946.svg\";","export default __webpack_public_path__ + \"static/media/laptop.b44b37c6.svg\";","export default __webpack_public_path__ + \"static/media/lawn-mower.c0d5f86c.svg\";","export default __webpack_public_path__ + \"static/media/lightbulb.9b141d4b.svg\";","export default __webpack_public_path__ + \"static/media/lock.e5f42f57.svg\";","export default __webpack_public_path__ + \"static/media/power-outlet.b8e56fdc.svg\";","export default __webpack_public_path__ + \"static/media/power.3c90b54d.svg\";","export default __webpack_public_path__ + \"static/media/smart-home-lock.1716b51f.svg\";","export default __webpack_public_path__ + \"static/media/smart-home-thermostat.1afa3044.svg\";","export default __webpack_public_path__ + \"static/media/smart-home-wifi.9c1c356c.svg\";","export default __webpack_public_path__ + \"static/media/smartphone.18df0f9b.svg\";","export default __webpack_public_path__ + \"static/media/surveillance_camera.2aae1df5.svg\";","export default __webpack_public_path__ + \"static/media/tv-screen.391b2738.svg\";","export default __webpack_public_path__ + \"static/media/vacuum.fcb018b5.svg\";","export default __webpack_public_path__ + \"static/media/vr-headset.6f54af26.svg\";","export default __webpack_public_path__ + \"static/media/watch.00532770.svg\";","export default __webpack_public_path__ + \"static/media/wifi.16631a37.svg\";","export default __webpack_public_path__ + \"static/media/window-cleaner.5a47bbd0.svg\";","export default __webpack_public_path__ + \"static/media/communication-devices.75fcfbde.PNG\";","export default __webpack_public_path__ + \"static/media/control-devices.b7c89ff4.PNG\";","export default __webpack_public_path__ + \"static/media/control-system.61a21038.svg\";","export default __webpack_public_path__ + \"static/media/database-svgrepo-com.4a2f4d89.svg\";","export default __webpack_public_path__ + \"static/media/enterprise-erp.b407a755.svg\";","export default __webpack_public_path__ + \"static/media/field-devices.630feb51.PNG\";","export default __webpack_public_path__ + \"static/media/further-devices.39645b89.PNG\";","export default __webpack_public_path__ + \"static/media/information-system.5ca31033.svg\";","export default __webpack_public_path__ + \"static/media/manufactoring-equipment.10cd2167.PNG\";","export default __webpack_public_path__ + \"static/media/production-machines.bbc7db5d.PNG\";","export default __webpack_public_path__ + \"static/media/Avatar.66a1d816.svg\";","export default __webpack_public_path__ + \"static/media/bell.701bdda1.svg\";","export default __webpack_public_path__ + \"static/media/cloud.47f081f7.svg\";","export default __webpack_public_path__ + \"static/media/floppy-disk.1dfbe2c9.svg\";","export default __webpack_public_path__ + \"static/media/harddrive.4d8c677b.svg\";","export default __webpack_public_path__ + \"static/media/meter-display.e1c9e3fe.svg\";","export default __webpack_public_path__ + \"static/media/switch-1.d9f7e86a.svg\";","export default __webpack_public_path__ + \"static/media/switch-2.413aa61b.svg\";","export default __webpack_public_path__ + \"static/media/thermometer.341398b1.svg\";","export default __webpack_public_path__ + \"static/media/water-tap.ee36d017.svg\";","var map = {\n\t\"./Stencils/stencils.xml\": 243\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 242;","export default __webpack_public_path__ + \"static/media/stencils.7225ae37.xml\";","import {ReportHandler} from \"web-vitals\";\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import(\"web-vitals\").then(({getCLS, getFID, getFCP, getLCP, getTTFB}) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import factory from \"mxgraph\";\r\n\r\n//import UndoManager from \"./UndoManager\";\r\nconst mx = factory({\r\n  mxBasePath: \"mxgraph/javascript/src\",\r\n  mxImageBasePath: \"mxgraph/javascript/src/images\",\r\n});\r\nconsole.log(\"mxgraph version: \", mx.mxClient.VERSION);\r\n\r\nexport default mx;\r\n","import {Component} from \"react\";\r\n// import mxgraph and typscript libraries\r\nimport factory from \"mxgraph\";\r\nimport * as MxTypes from \"mxgraph\"; // <- import types only\r\n\r\nconst mx = factory({\r\n  mxBasePath: \"mxgraph/javascript/src\",\r\n  mxImageBasePath: \"mxgraph/javascript/src/images\",\r\n});\r\nconsole.log(\"mxgraph version: \", mx.mxClient.VERSION);\r\n\r\n\r\ninterface DraggableNodeProps {\r\n    graph:MxTypes.mxGraph;\r\n}\r\n\r\nexport default abstract class DraggableNode <Props extends DraggableNodeProps, State> extends Component<Props, State> {\r\n  // Inserts a cell at the given location\r\n  abstract insertCell (x:number, y:number): void;\r\n  abstract render () : JSX.Element;\r\n\r\n    // Returns the graph under the mouse (in example code multiple graphs are possible)\r\n    graphF = (evt:MouseEvent) => {\r\n      const graph = this.props.graph;\r\n      const x = mx.mxEvent.getClientX(evt);\r\n      const y = mx.mxEvent.getClientY(evt);\r\n      const elt = document.elementFromPoint(x, y);\r\n      if (elt && mx.mxUtils.isAncestorNode(graph.container, elt)) {\r\n        return graph;\r\n      }\r\n      return graph;\r\n    };\r\n\r\n\r\n  initializeDragElement = (ele:HTMLElement) => {\r\n    const graph = this.props.graph;\r\n    // Drag source is configured to use dragElt for preview and as drag icon\r\n    // if scalePreview (last) argument is true. Dx and dy are null to force\r\n    // the use of the defaults. Note that dx and dy are only used for the\r\n    // drag icon but not for the preview.\r\n    const ds = mx.mxUtils.makeDraggable(\r\n        ele,\r\n        this.graphF,\r\n        (graph:MxTypes.mxGraph, evt:Event, target:MxTypes.mxCell, x:number, y:number) =>\r\n          this.insertCell(x, y),\r\n        undefined,\r\n        undefined,\r\n        undefined,\r\n        graph.autoScroll,\r\n        true,\r\n    );\r\n    // Redirects feature to global switch. Note that this feature should only be used\r\n    // if the the x and y arguments are used in funct to insert the cell.\r\n    ds.isGuidesEnabled = function() {\r\n      return graph.graphHandler.guidesEnabled;\r\n    };\r\n    // Restores original drag icon while outside of graph\r\n    ds.createDragElement = mx.mxDragSource.prototype.createDragElement;\r\n  }\r\n}\r\n","import DraggableNode from \"./DraggableNode\";\r\n\r\n// import mxgraph and typscript libraries\r\nimport factory from \"mxgraph\";\r\nimport * as MxTypes from \"mxgraph\"; // <- import types only\r\nimport React from \"react\";\r\n\r\nconst mx = factory({\r\n  mxBasePath: \"mxgraph/javascript/src\",\r\n  mxImageBasePath: \"mxgraph/javascript/src/images\",\r\n});\r\nconsole.log(\"mxgraph version: \", mx.mxClient.VERSION);\r\n\r\n\r\ninterface VertexNodeProps {\r\n  graph:MxTypes.mxGraph;\r\n  width:number;\r\n  height:number;\r\n  title?:string;\r\n  value:string;\r\n  data:string\r\n}\r\n\r\ninterface VertexNodeState {\r\n  cellId?:string;\r\n}\r\n\r\n// only for type system. So type script can check required states\r\ntype VertexNodeStateSet = Required<VertexNodeState>;\r\n\r\nexport default class VertexNode extends DraggableNode<VertexNodeProps, VertexNodeState> {\r\n  private divRef = React.createRef<HTMLDivElement>();\r\n\r\n  constructor(props:VertexNodeProps) {\r\n    super(props);\r\n    this.insertCell = this.insertCell.bind(this);\r\n  }\r\n\r\n  isInitialized() : this is {state: VertexNodeStateSet} {\r\n    return this.state.cellId !== undefined;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initializeDragElement(this.divRef.current!);\r\n  }\r\n\r\n  static defaultProps = {\r\n    width: 120,\r\n    height: 60,\r\n    value: \"\",\r\n    data: null,\r\n  };\r\n\r\n  // Inserts a cell at the given location\r\n  insertCell(x:number, y:number) {\r\n    const parent = this.props.graph.getDefaultParent();\r\n    const {value, data, width, height} = this.props;\r\n    const cell = this.props.graph.insertVertex(parent, null, value, x, y, width, height, data);\r\n    this.setState({cellId: cell.id});\r\n  }\r\n\r\n  render() {\r\n    const title = this.props.title ?this.props.title : this.props.value;\r\n    return (\r\n      <div ref={this.divRef}> {title} </div>\r\n    );\r\n  }\r\n}\r\n","import DraggableNode from \"./DraggableNode\";\r\n\r\n// import mxgraph and typscript libraries\r\nimport factory from \"mxgraph\";\r\nimport * as MxTypes from \"mxgraph\"; // <- import types only\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n// create empty graph\r\n\r\n\r\nconst mx = factory({\r\n  mxBasePath: \"mxgraph/javascript/src\",\r\n  mxImageBasePath: \"mxgraph/javascript/src/images\",\r\n});\r\nconsole.log(\"mxgraph version: \", mx.mxClient.VERSION);\r\n\r\n\r\ninterface SingleNodeProps {\r\n  graph:MxTypes.mxGraph;\r\n  stencilRegistry: MxTypes.mxStencilRegistry;\r\n  width:number;\r\n  height:number;\r\n  value:string;\r\n  data:string\r\n  title?: string;\r\n}\r\n\r\ninterface SingleNodeState {\r\n  cellId?:string;\r\n  isExported?:string;\r\n  src:string;\r\n  svg:string;\r\n}\r\n\r\n// only for type system. So type script can check required states\r\ntype SingleNodeStateSet = Required<SingleNodeState>;\r\n\r\n//FIXME: workaround to remove connector types, that could not be represented like other shapes\r\nconst connectorTypes = [\"connector\", \"arrow\", \"arrowConnector\"];\r\nexport default class SingleNode extends DraggableNode<SingleNodeProps, SingleNodeState> {\r\n  private imageRef = React.createRef<HTMLImageElement>();\r\n\r\n  constructor(props:SingleNodeProps) {\r\n    super(props);\r\n    this.loadShape = this.loadShape.bind(this);\r\n  }\r\n\r\n  isInitialized() : this is {state: SingleNodeStateSet} {\r\n    return this.state.cellId !== undefined;\r\n  }\r\n\r\n  isImageLoaded() : this is {state: SingleNodeState} {\r\n    return this.state && this.state.src !== undefined;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initializeDragElement(this.imageRef.current!);\r\n  }\r\n\r\n  static defaultProps = {\r\n    width: 50,\r\n    height: 50,\r\n    value: \"\",\r\n    data: null,\r\n    title: \"\",\r\n  };\r\n\r\n  // Inserts a cell at the given location\r\n  insertCell = (x:number, y:number) => {\r\n    const parent = this.props.graph.getDefaultParent();\r\n    const {value, title, data, width, height} = this.props;\r\n    let cell = null;\r\n    if (title && connectorTypes.includes(title)) {\r\n      // create edge by manually: https://stackoverflow.com/questions/49839882/mxgraph-adding-edges\r\n      cell = new mx.mxCell(null, new mx.mxGeometry(0, 0, width, height), (data + \";html=1;\"));\r\n      cell.geometry.setTerminalPoint(new mx.mxPoint(x, y), true);\r\n      cell.geometry.setTerminalPoint(new mx.mxPoint((x+50), y), false);\r\n      cell.geometry.relative = true;\r\n      cell.edge = true;\r\n\r\n      cell = this.props.graph.addCell(cell);\r\n      this.props.graph.fireEvent(new mx.mxEventObject(\"cellsInserted\", \"cells\", [cell]));\r\n    } else {\r\n      cell = this.props.graph.insertVertex(parent, null, value, x, y, width, height, data);\r\n    }\r\n    this.setState({cellId: cell.id});\r\n  };\r\n\r\n\r\n  // src: adapted from diagrameditor.html (Client-side code for SVG export)\r\n  exportSvgCode = (graph:MxTypes.mxGraph) => {\r\n    const isBackgroundTransparent = true;\r\n\r\n    //TESTED WITH graph from canvas. (shapes were not correctly displayed only text at the corresponding position)\r\n    //FIXME: other graphs don't seem to work\r\n    //FIXME: svg images should be represented as base64 encoding\r\n    const scale = graph.view.scale;\r\n    const bounds = graph.getGraphBounds();\r\n\r\n    // Prepares SVG document that holds the output\r\n    const svgDoc = mx.mxUtils.createXmlDocument();\r\n\r\n\r\n    const root = (svgDoc.createElementNS != null) ?\r\n    svgDoc.createElementNS(mx.mxConstants.NS_SVG, \"svg\") : svgDoc.createElement(\"svg\");\r\n\r\n    if (!isBackgroundTransparent) {\r\n      if (root.style != null) {\r\n        root.style.backgroundColor = \"#FFFFFF\";\r\n      } else {\r\n        root.setAttribute(\"style\", \"background-color:#FFFFFF\");\r\n      }\r\n    }\r\n\r\n    if (svgDoc.createElementNS == null) {\r\n      root.setAttribute(\"xmlns\", mx.mxConstants.NS_SVG);\r\n    }\r\n\r\n    root.setAttribute(\"width\", Math.ceil(bounds.width * scale + 2) + \"px\");\r\n    root.setAttribute(\"height\", Math.ceil(bounds.height * scale + 2) + \"px\");\r\n    root.setAttribute(\"xmlns:xlink\", mx.mxConstants.NS_XLINK);\r\n    root.setAttribute(\"version\", \"1.1\");\r\n\r\n    // Adds group for anti-aliasing via transform\r\n    const group = (svgDoc.createElementNS != null) ?\r\n    svgDoc.createElementNS(mx.mxConstants.NS_SVG, \"g\") : svgDoc.createElement(\"g\");\r\n    group.setAttribute(\"transform\", \"translate(0.5,0.5)\");\r\n    root.appendChild(group);\r\n    svgDoc.appendChild(root);\r\n\r\n    // Renders graph. Offset will be multiplied with state's scale when painting state.\r\n    const svgCanvas = new mx.mxSvgCanvas2D(group);\r\n    svgCanvas.translate(Math.floor(1 / scale - bounds.x), Math.floor(1 / scale - bounds.y));\r\n    svgCanvas.scale(scale);\r\n\r\n    const imgExport = new mx.mxImageExport();\r\n    // up until this part the canvas should only contain empty groups\r\n    imgExport.drawState(graph.getView().getState(graph.model.root), svgCanvas);\r\n\r\n    //svg code is now hold here\r\n    console.debug(root.outerHTML);\r\n    return (root.outerHTML);\r\n  }\r\n\r\n  /**\r\n   * Loads the stylesheet for this graph.\r\n   * TODO: refactor Duplicate code\r\n   */\r\n     copyStylesheet = (targetGraph:MxTypes.mxGraph, sourceGraph:MxTypes.mxGraph) => {\r\n       /*TEST encode/decode\r\n      // let xmlText = encode(graph.getStylesheet());\r\n      // xmlText = xmlText.replaceAll('446299', '000000');\r\n      */\r\n       console.log(\"before decoding\", targetGraph.getStylesheet());\r\n       targetGraph.getModel().beginUpdate();\r\n       try {\r\n         targetGraph.setStylesheet(sourceGraph.getStylesheet());\r\n       } finally {\r\n         targetGraph.getModel().endUpdate();\r\n       }\r\n       console.log(\"after decoding\", targetGraph.getStylesheet());\r\n     };\r\n\r\n  /**\r\n  * Generates an empty graph\r\n  * Adds the vertex\r\n  * Export the graph as SVG -> svg representation of the vertex\r\n  * @returns the svg representation of the given vertex\r\n  */\r\n  cellToSVG = () => {\r\n\r\n    // create container\r\n    //create an invisible graph container.\r\n    const container = ReactDOM.findDOMNode(this.refs.invisibleDivGraph) as HTMLDivElement;\r\n    // create a new gaph\r\n    //@ts-ignore\r\n    const graph = new mx.mxGraph(container);\r\n\r\n    //Add cell to new empty graph\r\n    // Gets the default parent for inserting new cells.\r\n    const parent = graph.getDefaultParent();\r\n    this.copyStylesheet(graph, this.props.graph);\r\n    //FIXME: costum shape do not load immediatly\r\n    //copy mx.mxStencilRegistry for custom shapes\r\n    //@ts-ignore\r\n    mx.mxStencilRegistry.stencils = this.props.stencilRegistry.stencils;\r\n\r\n    // Adds cells to the model in a single step\r\n    graph.getModel().beginUpdate();\r\n    try {\r\n      const {width, height, value, title, data} = this.props;\r\n      // TODO: distinguish for connector types\r\n      if (title && connectorTypes.includes(title)) {\r\n        //insert vertices with edge between them\r\n        const v1 = graph.insertVertex(parent, null, value, 0, 0, 1, 1, data);\r\n        const v2 = graph.insertVertex(parent, null, value, 50, 0, 1, 1, data);\r\n        graph.insertEdge(parent, null, \"\", v1, v2, data);\r\n        // const edge = graph.createEdge(parent, null, value, null, null, data);\r\n      } else {\r\n        graph.insertVertex(parent, null, value, 0, 0, width, height, data);\r\n      }\r\n    } finally {\r\n    // Updates the display\r\n      graph.getModel().endUpdate();\r\n    }\r\n\r\n    // Renders graph to SVG\r\n    const svgCode = this.exportSvgCode(graph);\r\n\r\n    //delete temporary dom node (additional graph)\r\n    if (container) {\r\n      container.remove();\r\n    }\r\n    // react-dom version\r\n    // ReactDOM.unmountComponentAtNode(container);\r\n    // document.body.removeChild(document.getElementById(\"invisibleDivGraph\")!);\r\n    return svgCode;\r\n  }\r\n\r\n  loadShape() {\r\n    const svgCellSource = this.cellToSVG();\r\n    // src for svg encoding: https://stackoverflow.com/questions/44900569/turning-an-svg-string-into-an-image-in-a-react-component\r\n    const srcString = `data:image/svg+xml;utf8,${svgCellSource}`;\r\n    this.setState({src: srcString, svg: svgCellSource});\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param name draws shape or imported stencil\r\n   * @returns\r\n   */\r\n  drawShape = () => {\r\n    const svgCellSource = this.cellToSVG();\r\n    // src for svg encoding: https://stackoverflow.com/questions/44900569/turning-an-svg-string-into-an-image-in-a-react-component\r\n    const srcString = `data:image/svg+xml;utf8,${svgCellSource}`;\r\n    return <img src={srcString} onLoad={this.loadShape} ref={this.imageRef} width={50} title={this.props.title} alt={this.props.title}/>;\r\n  };\r\n\r\n  //TODO: Render Shape / Svg or stencil: currently only path to xml is rendered inside image\r\n  render() {\r\n    return (\r\n      <>{this.drawShape()}\r\n        {/* workaround to export shapes as svg*/}\r\n        {/* TODO: remove graph if not needed anymore: currently for every node a new invisible graph is produced*/}\r\n        <div hidden className=\"graph-container\" ref=\"invisibleDivGraph\" id=\"invisibleDivGraph\" data-display=\"none\" data-visibility=\"hidden\"/>\r\n      </>\r\n\r\n    );\r\n  }\r\n}\r\n","\r\n\r\nexport interface Subproperty {\r\n  id: number\r\n  name?:string,\r\n  //TODO: points: number exist only from formular and not from examples.\r\n  //TODO: refactor points: number, should be instead PointRating[1]\r\n  points:number | PointRating[],\r\n  //details or description\r\n  details?:string,\r\n}\r\n\r\nexport interface Category {\r\n  id: number\r\n  name:string,\r\n  description:string,\r\n  subproperties?: Subproperty[],\r\n  points?: PointRating[],\r\n  // points?: number | PointRange[],\r\n}\r\n\r\nexport interface UppermostCategoryData {\r\n  value:Category[]\r\n  description?:string,\r\n}\r\n\r\n/**\r\n * Represents a catalogue for \"Data Store Quality Characteristics\" and \"Data Provider Property\"\r\n */\r\nexport interface Property {\r\n  id: number\r\n  // data_provider/store/source\r\n  type: string,\r\n  // ciot, iiot etc.\r\n  iotTypes: string[],\r\n  // uppermost category in questionary: generalCategories ( category name -> questionary details)\r\n  //TODO: use array of key/val object instead of map: so that it can be representated in json or map when loading/saving json\r\n  // string not sufficient upperMost categories can have a description\r\n  categories: Map<string, UppermostCategoryData>;\r\n}\r\n\r\nexport interface PointRating {\r\n  groupName?: string,\r\n  details?:string,\r\n  value: number,\r\n  setValue: number,\r\n  isSelected: boolean,\r\n}\r\n\r\n\r\nexport function createPointRange(groupName?: string, details?:string, value = 0, setValue= 0, isSelected = false) {\r\n  return {\r\n    groupName: groupName,\r\n    details: details,\r\n    value: value,\r\n    setValue: setValue,\r\n    isSelected: isSelected,\r\n  };\r\n}\r\n\r\nexport function convertNumberToPointRange(value:number, groupName?: string, details?:string) {\r\n  return createPointRange(groupName, details, value, value);\r\n}\r\n\r\n\r\nexport function createSubproperty(id: number, points:number, name?:string, details?:string ) {\r\n  return {\r\n    id: id,\r\n    name: name,\r\n    points: points,\r\n    details: details,\r\n  };\r\n}\r\n\r\nexport function createCategory(id: number, name:string = \"\", description:string = \"\", subproperties:Subproperty[] = []) {\r\n  return {\r\n    id: id,\r\n    name: name,\r\n    description: description,\r\n    subproperties: subproperties,\r\n  };\r\n}\r\n\r\nexport function evaluatePoints(points: PointRating[], defaultValue = 0):number {\r\n  // filter out non selected values (negative numbers)\r\n  return points.map((point) => point.isSelected ? point.setValue : defaultValue).filter((point) => point >=0).reduce((previousValue, currentValue) => (previousValue + currentValue));\r\n}\r\n\r\nexport function evaluateProperty(property:Property):number {\r\n  let result = 0;\r\n  property.categories.forEach((categoryArray, upperCategory) => {\r\n    //  render category[]\r\n    categoryArray.value.forEach((item) =>{\r\n      if (item.points) {\r\n        // points saved in category\r\n        result +=evaluatePoints(item.points);\r\n      } else {\r\n        // points saved subcategory\r\n        item.subproperties?.map((subproperty) => {\r\n          //@ts-ignore\r\n          if (isNaN(subproperty.points)) {\r\n            result +=evaluatePoints(subproperty.points as PointRating[]);\r\n          } else {\r\n            result += (subproperty.points as number);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  });\r\n  return result;\r\n}\r\n\r\nfunction isPointIncluded(points: PointRating[] |number) {\r\n  let invalidValues:number[]= [];\r\n  //@ts-ignore\r\n  if (isNaN(points)) {\r\n    invalidValues = (points as PointRating[]).filter((point) => point.isSelected && point.setValue < 0).map((elem) => elem.setValue);\r\n  } else if ((points as number) >= 0) {\r\n    invalidValues.push((points as number));\r\n  }\r\n  return invalidValues.length <= 0;\r\n}\r\n\r\nexport function getMaxSumOfProperty(property:Property, isSelectionDependend=true):number {\r\n  //TODO: make it possible to leave out some checkboxes -> max Score ignores those checkboxes\r\n  const questionaryPoints: number[] = [];\r\n  property.categories.forEach((categoryArray, upperCategory) => {\r\n    //  render category[]\r\n    categoryArray.value.forEach((item) =>{\r\n      if (item.points) {\r\n        const pointsCategory:number[] = [];\r\n        // maximum points saved in category\r\n        if (!isSelectionDependend || isPointIncluded(item.points)) {\r\n          item.points.forEach((point) => pointsCategory.push(point.value));\r\n          questionaryPoints.push(Math.max(...pointsCategory));\r\n        }\r\n      } else {\r\n        // points saved subcategory\r\n        item.subproperties?.map((subproperty) => {\r\n          const pointsSubproperty:number[] = [];\r\n          if (!isSelectionDependend || isPointIncluded(subproperty.points)) {\r\n          //@ts-ignore\r\n            if (isNaN(subproperty.points)) {\r\n              (subproperty.points as PointRating[]).forEach((point) => pointsSubproperty.push(point.value));\r\n            } else {\r\n              pointsSubproperty.push((subproperty.points as number));\r\n            }\r\n            questionaryPoints.push(Math.max(...pointsSubproperty));\r\n          }\r\n        });\r\n      }\r\n    });\r\n  });\r\n\r\n  //return maximum points, or -1 if no selection was done\r\n  return questionaryPoints.length > 0 ? questionaryPoints.reduce((previousValue, currentValue) => previousValue + currentValue) : -1;\r\n}\r\n","// import mxgraph and typscript libraries\r\nimport mx from \"../mx\";\r\n\r\n// source mostly from: https://stackoverflow.com/questions/50800383/how-to-import-xml-encoded-mxgraph-in-a-webpack-project\r\n\r\n// Overridden in our application\r\nconst mxCodec = mx.mxCodec;\r\n\r\n// normally those objects are gathered from window[] for decoding. Copied from tsfactory definition.\r\nconst KNOWN_OBJECTS = {\r\n  mxClient: mx.mxClient,\r\n  mxLog: mx.mxLog,\r\n  mxObjectIdentity: mx.mxObjectIdentity,\r\n  mxDictionary: mx.mxDictionary,\r\n  mxResources: mx.mxResources,\r\n  mxPoint: mx.mxPoint,\r\n  mxRectangle: mx.mxRectangle,\r\n  mxEffects: mx.mxEffects,\r\n  mxUtils: mx.mxUtils,\r\n  mxConstants: mx.mxConstants,\r\n  mxEventObject: mx.mxEventObject,\r\n  mxMouseEvent: mx.mxMouseEvent,\r\n  mxEventSource: mx.mxEventSource,\r\n  mxEvent: mx.mxEvent,\r\n  mxXmlRequest: mx.mxXmlRequest,\r\n  mxClipboard: mx.mxClipboard,\r\n  mxWindow: mx.mxWindow,\r\n  mxForm: mx.mxForm,\r\n  mxImage: mx.mxImage,\r\n  mxDivResizer: mx.mxDivResizer,\r\n  mxDragSource: mx.mxDragSource,\r\n  mxToolbar: mx.mxToolbar,\r\n  mxUndoableEdit: mx.mxUndoableEdit,\r\n  mxUndoManager: mx.mxUndoManager,\r\n  mxUrlConverter: mx.mxUrlConverter,\r\n  mxPanningManager: mx.mxPanningManager,\r\n  mxPopupMenu: mx.mxPopupMenu,\r\n  mxAutoSaveManager: mx.mxAutoSaveManager,\r\n  mxAnimation: mx.mxAnimation,\r\n  mxMorphing: mx.mxMorphing,\r\n  mxImageBundle: mx.mxImageBundle,\r\n  mxImageExport: mx.mxImageExport,\r\n  mxAbstractCanvas2D: mx.mxAbstractCanvas2D,\r\n  mxXmlCanvas2D: mx.mxXmlCanvas2D,\r\n  mxSvgCanvas2D: mx.mxSvgCanvas2D,\r\n  mxVmlCanvas2D: mx.mxVmlCanvas2D,\r\n  mxGuide: mx.mxGuide,\r\n  mxShape: mx.mxShape,\r\n  mxStencil: mx.mxStencil,\r\n  mxStencilRegistry: mx.mxStencilRegistry,\r\n  mxMarker: mx.mxMarker,\r\n  mxActor: mx.mxActor,\r\n  mxCloud: mx.mxCloud,\r\n  mxRectangleShape: mx.mxRectangleShape,\r\n  mxEllipse: mx.mxEllipse,\r\n  mxDoubleEllipse: mx.mxDoubleEllipse,\r\n  mxRhombus: mx.mxRhombus,\r\n  mxPolyline: mx.mxPolyline,\r\n  mxArrow: mx.mxArrow,\r\n  mxArrowConnector: mx.mxArrowConnector,\r\n  mxText: mx.mxText,\r\n  mxTriangle: mx.mxTriangle,\r\n  mxHexagon: mx.mxHexagon,\r\n  mxLine: mx.mxLine,\r\n  mxImageShape: mx.mxImageShape,\r\n  mxLabel: mx.mxLabel,\r\n  mxCylinder: mx.mxCylinder,\r\n  mxConnector: mx.mxConnector,\r\n  mxSwimlane: mx.mxSwimlane,\r\n  mxGraphLayout: mx.mxGraphLayout,\r\n  mxStackLayout: mx.mxStackLayout,\r\n  mxPartitionLayout: mx.mxPartitionLayout,\r\n  mxCompactTreeLayout: mx.mxCompactTreeLayout,\r\n  mxRadialTreeLayout: mx.mxRadialTreeLayout,\r\n  mxFastOrganicLayout: mx.mxFastOrganicLayout,\r\n  mxCircleLayout: mx.mxCircleLayout,\r\n  mxParallelEdgeLayout: mx.mxParallelEdgeLayout,\r\n  mxCompositeLayout: mx.mxCompositeLayout,\r\n  mxEdgeLabelLayout: mx.mxEdgeLabelLayout,\r\n  mxGraphAbstractHierarchyCell: mx.mxGraphAbstractHierarchyCell,\r\n  mxGraphHierarchyNode: mx.mxGraphHierarchyNode,\r\n  mxGraphHierarchyEdge: mx.mxGraphHierarchyEdge,\r\n  mxGraphHierarchyModel: mx.mxGraphHierarchyModel,\r\n  mxSwimlaneModel: mx.mxSwimlaneModel,\r\n  mxHierarchicalLayoutStage: mx.mxHierarchicalLayoutStage,\r\n  mxMedianHybridCrossingReduction: mx.mxMedianHybridCrossingReduction,\r\n  mxMinimumCycleRemover: mx.mxMinimumCycleRemover,\r\n  mxCoordinateAssignment: mx.mxCoordinateAssignment,\r\n  mxSwimlaneOrdering: mx.mxSwimlaneOrdering,\r\n  mxHierarchicalLayout: mx.mxHierarchicalLayout,\r\n  mxSwimlaneLayout: mx.mxSwimlaneLayout,\r\n  mxGraphModel: mx.mxGraphModel,\r\n  mxCell: mx.mxCell,\r\n  mxGeometry: mx.mxGeometry,\r\n  mxCellPath: mx.mxCellPath,\r\n  mxPerimeter: mx.mxPerimeter,\r\n  mxPrintPreview: mx.mxPrintPreview,\r\n  mxStylesheet: mx.mxStylesheet,\r\n  mxCellState: mx.mxCellState,\r\n  mxGraphSelectionModel: mx.mxGraphSelectionModel,\r\n  mxCellEditor: mx.mxCellEditor,\r\n  mxCellRenderer: mx.mxCellRenderer,\r\n  mxEdgeStyle: mx.mxEdgeStyle,\r\n  mxStyleRegistry: mx.mxStyleRegistry,\r\n  mxGraphView: mx.mxGraphView,\r\n  mxGraph: mx.mxGraph,\r\n  mxCellOverlay: mx.mxCellOverlay,\r\n  mxOutline: mx.mxOutline,\r\n  mxMultiplicity: mx.mxMultiplicity,\r\n  mxLayoutManager: mx.mxLayoutManager,\r\n  mxSwimlaneManager: mx.mxSwimlaneManager,\r\n  mxTemporaryCellStates: mx.mxTemporaryCellStates,\r\n  mxCellStatePreview: mx.mxCellStatePreview,\r\n  mxConnectionConstraint: mx.mxConnectionConstraint,\r\n  mxGraphHandler: mx.mxGraphHandler,\r\n  mxPanningHandler: mx.mxPanningHandler,\r\n  mxPopupMenuHandler: mx.mxPopupMenuHandler,\r\n  mxCellMarker: mx.mxCellMarker,\r\n  mxSelectionCellsHandler: mx.mxSelectionCellsHandler,\r\n  mxConnectionHandler: mx.mxConnectionHandler,\r\n  mxConstraintHandler: mx.mxConstraintHandler,\r\n  mxRubberband: mx.mxRubberband,\r\n  mxHandle: mx.mxHandle,\r\n  mxVertexHandler: mx.mxVertexHandler,\r\n  mxEdgeHandler: mx.mxEdgeHandler,\r\n  mxElbowEdgeHandler: mx.mxElbowEdgeHandler,\r\n  mxEdgeSegmentHandler: mx.mxEdgeSegmentHandler,\r\n  mxKeyHandler: mx.mxKeyHandler,\r\n  mxTooltipHandler: mx.mxTooltipHandler,\r\n  mxCellTracker: mx.mxCellTracker,\r\n  mxCellHighlight: mx.mxCellHighlight,\r\n  mxDefaultKeyHandler: mx.mxDefaultKeyHandler,\r\n  mxDefaultPopupMenu: mx.mxDefaultPopupMenu,\r\n  mxDefaultToolbar: mx.mxDefaultToolbar,\r\n  mxEditor: mx.mxEditor,\r\n  mxCodecRegistry: mx.mxCodecRegistry,\r\n  mxCodec: mx.mxCodec,\r\n  mxObjectCodec: mx.mxObjectCodec,\r\n  mxCellCodec: mx.mxCellCodec,\r\n  mxModelCodec: mx.mxModelCodec,\r\n  mxRootChangeCodec: mx.mxRootChangeCodec,\r\n  mxChildChangeCodec: mx.mxChildChangeCodec,\r\n  mxTerminalChangeCodec: mx.mxTerminalChangeCodec,\r\n  mxGenericChangeCodec: mx.mxGenericChangeCodec,\r\n  mxGraphCodec: mx.mxGraphCodec,\r\n  mxGraphViewCodec: mx.mxGraphViewCodec,\r\n  mxStylesheetCodec: mx.mxStylesheetCodec,\r\n  mxDefaultKeyHandlerCodec: mx.mxDefaultKeyHandlerCodec,\r\n  mxDefaultToolbarCodec: mx.mxDefaultToolbarCodec,\r\n  mxDefaultPopupMenuCodec: mx.mxDefaultPopupMenuCodec,\r\n  mxEditorCodec: mx.mxEditorCodec,\r\n  Array: Array,\r\n  array: Array,\r\n};\r\n\r\n/**\r\n   * Function: decode\r\n   *\r\n   * Decodes the given XML node. The optional \"into\"\r\n   * argument specifies an existing object to be\r\n   * used. If no object is given, then a new instance\r\n   * is created using the constructor from the codec.\r\n   *\r\n   * The function returns the passed in object or\r\n   * the new instance if no object was given.\r\n   *\r\n   * Parameters:\r\n   *\r\n   * node - XML node to be decoded.\r\n   * into - Optional object to be decodec into.\r\n   */\r\nmxCodec.prototype.decode = function(node, into) {\r\n  let obj = null;\r\n\r\n  if (node != null && node.nodeType == mx.mxConstants.NODETYPE_ELEMENT) {\r\n    let ctor = null;\r\n\r\n    try {\r\n      // in original implementation window[], which requires all mxgraph component to be global:https://stackoverflow.com/questions/46872779/mxgraph-codec-decode-not-adding-cells-to-the-actual-graph\r\n      //@ts-ignore\r\n      ctor = KNOWN_OBJECTS[node.nodeName];\r\n    } catch (err) {\r\n      // ignore\r\n      console.error(\"could not decode ,\", node.nodeName);\r\n    }\r\n\r\n    const dec = mx.mxCodecRegistry.getCodec(ctor);\r\n\r\n    if (dec != null) {\r\n      obj = dec.decode(this, node, into);\r\n    } else {\r\n      obj = node.cloneNode(true);\r\n      //@ts-ignore\r\n      obj.removeAttribute(\"as\");\r\n    }\r\n  }\r\n\r\n  return obj;\r\n};\r\n\r\nexport default mxCodec;\r\n","//* *********************************************** */\r\n// General utility functions\r\n//* *********************************************** */\r\n\r\nimport {mxCell, mxStylesheet, StyleMap} from \"mxgraph\";\r\nimport mx from \"../mx\";\r\nimport {RGBColor} from \"react-color\";\r\nimport cssColorNames from \"css-color-names\";\r\n\r\n/**\r\n *\r\n * @param color color in RGBA format\r\n * @returns\r\n */\r\nexport function rgbaColorString(color:RGBColor) {\r\n  if (color.a || color.a===0) {\r\n    return `rgba(${ color.r }, ${ color.g }, ${ color.b }, ${ color.a })`;\r\n  } else {\r\n    return `rgba(${ color.r }, ${ color.g }, ${ color.b }, ${ 1 })`;\r\n  }\r\n}\r\n\r\nexport function hexToRgba(hexColor:string) : RGBColor | undefined {\r\n  // split into each color string\r\n  const rgbHexPairs:string[]|null = hexColor.match(/(?!#).{1,2}/g);\r\n  if (rgbHexPairs?.length === 3) {\r\n    return {r: parseInt(rgbHexPairs[0], 16), g: parseInt(rgbHexPairs[1], 16), b: parseInt(rgbHexPairs[2], 16), a: 1};\r\n  }\r\n}\r\n\r\nfunction isRgbaValid(color:RGBColor) {\r\n  const isRValid = (color.r >= 0) && (color.r <= 255);\r\n  const isGValid = (color.g >= 0) && (color.g <= 255);\r\n  const isBValid = (color.b >= 0) && (color.b <= 255);\r\n  // decimal percentage 0.0 - 1.0 or not defined\r\n  const isAValid = color.a ? ((color.a >= 0) && (color.a <= 1)) : true;\r\n\r\n  return (isRValid && isGValid && isBValid && isAValid);\r\n}\r\n\r\nexport function rgbaToHexString(color:RGBColor) {\r\n  const numToStr = (number:number) => number.toString(16).padStart(2, \"0\");\r\n  // split into each color string\r\n  return \"#\" + numToStr(color.r) + numToStr(color.g) + numToStr(color.b);\r\n}\r\n\r\n/**\r\n * Gets RGBA color from hex or css-colorname\r\n * @param color\r\n * @returns\r\n */\r\nexport function getRgba(color:string | undefined, useDefault= true): RGBColor | undefined {\r\n  const defaultColor = {r: 255, g: 255, b: 255, a: 1};\r\n  if ((color=== undefined || color === \"none\")) {\r\n    console.error(\"color is undefinded\");\r\n    return useDefault ? defaultColor : undefined;\r\n  }\r\n  const colorString = color.toLowerCase().replaceAll(\" \", \"\");\r\n\r\n  // direct name\r\n  // @ts-ignore\r\n  const colorNameAsHex:string = cssColorNames[colorString];\r\n  if (colorNameAsHex) return hexToRgba(colorNameAsHex)!;\r\n\r\n  const rgbaColor = hexToRgba(colorString);\r\n  if (rgbaColor && isRgbaValid(rgbaColor)) return rgbaColor;\r\n\r\n  const rgbaRegexp = /^rgba\\((?<r>\\d{1,3}),(?<g>\\d{1,3}),(?<b>\\d{1,3}),(?<a>\\d(?:.\\d+)?)\\)$/;\r\n  const rgbaHexPairs = colorString.match(rgbaRegexp);\r\n\r\n  if (rgbaHexPairs && rgbaHexPairs.groups) {\r\n    const {r, g, b, a} = rgbaHexPairs.groups;\r\n    return {r: Number(r), g: Number(g), b: Number(b), a: Number(a)};\r\n  }\r\n\r\n  console.error(\"color could not be parsed as RGBA\");\r\n  return useDefault ? defaultColor : undefined;\r\n}\r\n\r\n/**\r\n *\r\n * @param input\r\n * @param options\r\n * @returns\r\n */\r\nexport function isInputValid<Type>(input:Type, options:Type[]) {\r\n  for (let i = 0; i < options.length; i++) {\r\n    if (input === options[i]) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n/**\r\n *\r\n * @param input\r\n * @param min\r\n * @param max\r\n * @returns\r\n */\r\nexport function isNumberInRange(input:number, min:number, max:number) {\r\n  if (input===null || input===undefined || input<min || input>max) {\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nexport function toCamelCase(input:string) {\r\n  let camelCaseString=\"\";\r\n  for (let i = 0; i < input.length; i++) {\r\n    if (input[i] === \" \" || input[i] === \"\\t\" ) {\r\n      camelCaseString+= input[i+1].toUpperCase();\r\n      i++;\r\n    } else {\r\n      camelCaseString+= input[i];\r\n    }\r\n  }\r\n  return camelCaseString;\r\n}\r\n\r\nexport function splitCellToTypes(cells:mxCell[], onlyVisible:boolean = true) {\r\n  const vertexCells:mxCell[] = [];\r\n  const edgeCells:mxCell[] = [];\r\n  const connectableCells:mxCell[] = [];\r\n  const collapsedCells:mxCell[] = [];\r\n  for (let i = 0; i< cells.length; i++) {\r\n    const cell = cells[i];\r\n    if (onlyVisible && !cell.isVisible()) continue;\r\n    if (cell.isVertex() ) vertexCells.push(cell);\r\n    if (cell.isEdge()) edgeCells.push(cell);\r\n    if (cell.isConnectable()) connectableCells.push(cell);\r\n    if (cell.isCollapsed()) collapsedCells.push(cell);\r\n  }\r\n  return {vertexCells, edgeCells, connectableCells, collapsedCells};\r\n}\r\n\r\n\r\nexport function getVertexCells(cells:mxCell[]) {\r\n  return cells.filter((cell) => cell.isVertex());\r\n}\r\n\r\nexport function getEdgeCells(cells:mxCell[]) {\r\n  return cells.filter((cell) => cell.isEdge());\r\n}\r\n\r\nexport function getConnectedCells(cells:mxCell[]) {\r\n  return cells.filter((cell) => cell.isConnectable());\r\n}\r\n\r\nexport function getCollapsedCells(cells:mxCell[]) {\r\n  return cells.filter((cell) => cell.isCollapsed());\r\n}\r\n\r\nfunction prepareCellStyleString(cellStyle:string) {\r\n  return cellStyle && cellStyle.endsWith(\";\") ? cellStyle.slice(0, -1) : cellStyle;\r\n}\r\n\r\nfunction getStyleSetFromCellStyleString(cellStyle:string): Set<[string, any]> {\r\n  cellStyle = prepareCellStyleString(cellStyle);\r\n  if (cellStyle) {\r\n    const cellStylesTable= cellStyle.split(\";\").map((pair) => pair.split(\"=\"));\r\n    // @ts-ignore\r\n    return new Set(cellStylesTable);\r\n  }\r\n  return new Set();\r\n}\r\n\r\nexport function styleMapToCellString(styleMap:StyleMap) {\r\n  // dashPattern contains leading space and requires spaces in between values\r\n  //special case line pattern\r\n  return mx.mxUtils.toString(styleMap).replaceAll(\" = \", \"=\").replaceAll(\"\\n\", \";\");\r\n}\r\n\r\n// return type given for mor compatibility with graph.getStylesheet().getDefault(Edge/Vertex)Style()\r\nexport function getStyleSet(cell:mxCell) : Set<[string, any]> {\r\n  return getStyleSetFromCellStyleString(cell.getStyle());\r\n}\r\n\r\n// return type given for mor compatibility with graph.getStylesheet().getDefault(Edge/Vertex)Style()\r\nexport function getStyleSetFromStyleMap(styleMap:StyleMap) : Set<[string, any]> {\r\n  return getStyleSetFromCellStyleString(styleMapToCellString(styleMap));\r\n}\r\n\r\nexport function getStyleMapFromCellStyleString(cellStyle:string) {\r\n  const cellStylesMap = new Map();\r\n  if (cellStyle) {\r\n    cellStyle.split(\";\").map((pair) => {\r\n      const entry:string[] = pair.split(\"=\");\r\n      // ignore none valid key value pairs\r\n      if (entry[0].length > 0 && entry[1].length > 0) {\r\n        cellStylesMap.set(entry[0], entry[1]);\r\n      }\r\n    });\r\n  }\r\n  return cellStylesMap;\r\n}\r\n\r\nexport function getAllStyleMapFromCellStyleString(cellStyle:string, cellStylesMap:Map<string, Set<any>> = new Map()) {\r\n  if (cellStyle) {\r\n    cellStyle.split(\";\").map((pair) => {\r\n      const entry:string[] = pair.split(\"=\");\r\n      const savedElement = cellStylesMap.get(entry[0]);\r\n      if (savedElement) {\r\n        cellStylesMap.set(entry[0], savedElement.add(entry[1]));\r\n      } else {\r\n        const newSet:Set<any> = new Set();\r\n        newSet.add(entry[1]);\r\n        cellStylesMap.set(entry[0], newSet);\r\n      }\r\n\r\n    });\r\n  }\r\n  return cellStylesMap;\r\n}\r\n\r\n\r\nexport function getStyleMap(cell:mxCell) {\r\n  const cellStyle:string = prepareCellStyleString(cell.getStyle());\r\n  return getStyleMapFromCellStyleString(cellStyle);\r\n}\r\n\r\nexport function getStyleMapFromStyleMap(styleMap:StyleMap) : Set<[string, any]> {\r\n  let cellStyle:string = mx.mxUtils.toString(styleMap);\r\n  cellStyle = cellStyle.replaceAll(\" \", \"\").replaceAll(\"\\n\", \";\");\r\n  return getStyleSetFromCellStyleString(cellStyle);\r\n}\r\n\r\nexport function getStyleObject(cell:mxCell) {\r\n  const cellStyle:string = prepareCellStyleString(cell.getStyle());\r\n  if (cellStyle) {\r\n    return Object.fromEntries(cellStyle.split(\";\").map((pair) => pair.split(\"=\")));\r\n  }\r\n  return undefined;\r\n}\r\n\r\nexport function unionOfSet<T>(setA:Set<T>, setB:Set<T>) {\r\n  const _union = new Set(setA);\r\n  for (const elem of setB) {\r\n    _union.add(elem);\r\n  }\r\n  return _union;\r\n}\r\n\r\n/**\r\n * FIXME: extend to cell specific styles. Currently only loads defaults (edge/vertex)\r\n * @param vertexStyles\r\n * @param edgeStyles\r\n * @param key\r\n * @param fallback\r\n * @returns\r\n */\r\nexport function getFromCorrespondingMap(vertexStyles:Map<any, any>, edgeStyles:Map<any, any>, key:string, fallback?:any ) {\r\n  if (vertexStyles && vertexStyles.size > 0) {\r\n    return vertexStyles.get(key);\r\n  } else if (edgeStyles && edgeStyles.size > 0) {\r\n    return edgeStyles.get(key);\r\n  } else {\r\n    return fallback;\r\n  }\r\n}\r\n\r\n/**\r\n * @param cell\r\n * @param styleSheet\r\n * @returns style for the given cell or defaultStyle given its celltype (edge or vertex)\r\n */\r\nexport function getCellStyleMapForCellShape(cell:mxCell, styleSheet: mxStylesheet) {\r\n  const cellStyleMap = getStyleMap(cell);\r\n  //FIXME: label and edgeLabel are not considered when only loading shape.\r\n  const cellShape:string = cellStyleMap.get(\"shape\"); // shape attribute is not always present\r\n  const defaultStyle = cell.isVertex() ? styleSheet.getDefaultVertexStyle() : styleSheet.getDefaultEdgeStyle();\r\n  const resultingStyle:StyleMap = {};\r\n\r\n  // add original saved styles\r\n  for (const [key, value] of cellStyleMap.entries()) {\r\n    resultingStyle[key] = value;\r\n  }\r\n\r\n  // default styles according to shape\r\n  const defaultCellStyle = styleSheet.getCellStyle(cellShape, defaultStyle);\r\n  const defaultCellStyleMap: Map<any, any> = getStyleMapFromCellStyleString(styleMapToCellString(defaultCellStyle));\r\n\r\n  for (const [key, value] of defaultCellStyleMap.entries()) {\r\n    // add if not included\r\n    if (!cellStyleMap.has(key) ) {\r\n      resultingStyle[key] = value;\r\n    }\r\n  }\r\n\r\n  return resultingStyle;\r\n}\r\n\r\n/**\r\n * return all selected attributes.\r\n */\r\nexport function getStyleAttributes(cells:mxCell[]) {\r\n  let allStyles: Map<string, Set<any>> = new Map();\r\n  for (let i=0; i<cells.length; i++) {\r\n    const cell = cells[i];\r\n    const cellStyle:string = prepareCellStyleString(cell.getStyle());\r\n    allStyles = getAllStyleMapFromCellStyleString(cellStyle, allStyles);\r\n  }\r\n  return allStyles;\r\n}\r\n\r\n\r\nexport function getStyleAttribute(cells:mxCell[], styleAttribute:string) {\r\n  return getStyleAttributes(cells).get(styleAttribute);\r\n}\r\n\r\n\r\n// src: https://stackoverflow.com/a/56150320\r\nexport function jsonMapReplacer(key:any, value:any) {\r\n  //TODO: create named entries \"key\": string, \"value\": string to be complient with xml2json\r\n  if (value instanceof Map) {\r\n    let entries:any[] = [];\r\n    for (const [key, val] of value.entries()) {\r\n      entries = entries.concat({\"Entry\": {\"key\": key, \"value\": val}});\r\n    }\r\n    return {\r\n      dataType: \"Map\",\r\n      // value: Array.from(value.entries()), // or with spread: value: [...value]\r\n      value: entries,\r\n    };\r\n  } else {\r\n    return value;\r\n  }\r\n}\r\n\r\n// src: https://stackoverflow.com/a/56150320\r\nexport function jsonMapReviver(key:any, value:any) {\r\n  //TODO: create named entries \"key\": string, \"value\": string to be complient with xml2json\r\n  if (typeof value === \"object\" && value !== null) {\r\n    if (value.dataType === \"Map\") {\r\n      const map = new Map();\r\n      const entries:any[] = value.value;\r\n      //FIXME: doesn't appear to be visible outside\r\n      entries.map((entry) => {\r\n        const key = entry.Entry.key;\r\n        const value = entry.Entry.value;\r\n        map.set(key, value);\r\n      });\r\n      // return new Map(value.value);\r\n      return map;\r\n    }\r\n  }\r\n  return value;\r\n}\r\n\r\n\r\nexport function convertXmlToJson(xml:any):Object| null {\r\n  let json = null;\r\n  const xml2js = require(\"xml2js\");\r\n  const parser = new xml2js.Parser();\r\n  parser.parseString(xml, function(err:any, result:any) {\r\n    json = result;\r\n  });\r\n  return json;\r\n}\r\n/**\r\n *\r\n * @param obj Requires every variable in json to be named.\r\n * @param rootName\r\n * @returns\r\n */\r\nexport function convertJsonToXml(obj:Object, rootName?:string) {\r\n  const xml2js = require(\"xml2js\");\r\n  const builder = new xml2js.Builder({headless: true, rootName: rootName});\r\n  // const test = builder.buildObject(obj);\r\n  //@ts-ignore\r\n  return builder.buildObject(obj);\r\n\r\n}\r\n\r\n\r\nexport function addToMap(input:Map<any, any>, added:Map<any, any>) {\r\n  const result = new Map();\r\n  input.forEach((key, value) => result.set(key, value));\r\n  added.forEach((key, value) => result.set(key, value));\r\n  return result;\r\n}\r\n","/** utility function for data import. (import image)\r\n* @param {*} data\r\n* @returns\r\n*/\r\nexport function dataUrlToCellStyle(data:string) {\r\n  const semi = data.indexOf(\";\");\r\n\r\n  if (semi > 0) {\r\n    data = data.substring(0, semi) + data.substring(data.indexOf(\",\", semi + 1));\r\n  }\r\n  return data;\r\n}\r\n\r\n/**\r\n * converts an element into its base64 representation\r\n * src from https://stackoverflow.com/questions/6150289/how-can-i-convert-an-image-into-base64-string-using-javascript\r\n * @param url\r\n * @param callback\r\n */\r\nexport async function toDataURL(url:string, callback:Function) {\r\n  const xhr = new XMLHttpRequest();\r\n  xhr.onload = function() {\r\n    const reader = new FileReader();\r\n    reader.onloadend = function() {\r\n      callback(reader.result);\r\n    };\r\n    reader.readAsDataURL(xhr.response);\r\n  };\r\n  xhr.open(\"GET\", url);\r\n  xhr.responseType = \"blob\";\r\n  xhr.send();\r\n}\r\n","import DraggableNode from \"./DraggableNode\";\r\nimport * as sgUtilities from \"../SgUtilities\";\r\n\r\nimport React, {SyntheticEvent} from \"react\";\r\n// import mxgraph and typscript libraries\r\nimport factory from \"mxgraph\";\r\nimport * as MxTypes from \"mxgraph\"; // <- import types only\r\n\r\nconst mx = factory({\r\n  mxBasePath: \"mxgraph/javascript/src\",\r\n  mxImageBasePath: \"mxgraph/javascript/src/images\",\r\n});\r\nconsole.log(\"mxgraph version: \", mx.mxClient.VERSION);\r\n\r\n\r\ninterface ImageNodeProps {\r\n  graph:MxTypes.mxGraph;\r\n  src:string;\r\n  id:string;\r\n  value:string;\r\n  title?: string;\r\n}\r\n\r\ninterface ImageNodeState {\r\n  imageData?: {width:number,\r\n              height:number,\r\n              data:string\r\n  }\r\n  cellId?:string;\r\n}\r\n\r\ninterface ImageState {\r\n  imageData: {width:number,\r\n              height:number,\r\n              data:string\r\n  }\r\n}\r\n\r\n// only for type system. So type script can check required states\r\ntype ImageNodeStateSet = Required<ImageNodeState>;\r\n\r\n\r\nexport default class ImageNode extends DraggableNode<ImageNodeProps, ImageNodeState> {\r\n  private imageRef = React.createRef<HTMLImageElement>();\r\n\r\n  constructor(props:ImageNodeProps) {\r\n    super(props);\r\n    this.onImgLoad = this.onImgLoad.bind(this);\r\n  }\r\n\r\n  isImageLoaded() : this is {state: ImageState} {\r\n    return this.state.imageData !== undefined;\r\n  }\r\n\r\n  isFullyLoaded() : this is {state: ImageNodeStateSet} {\r\n    return this.state.imageData !== undefined && this.state.cellId !== undefined;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initializeDragElement(this.imageRef.current!);\r\n  }\r\n\r\n  // Inserts a cell at the given location\r\n  insertCell = (x:number, y:number) => {\r\n    if ( !this.isImageLoaded() ) throw new Error(\"ImageNode is not fully initialized\"); // safeguard\r\n    const parent = this.props.graph.getDefaultParent();\r\n    const {width, height, data} = this.state.imageData;\r\n    const cell = this.props.graph.insertVertex(parent, null, this.props.value, x, y, width, height, data);\r\n    this.setState({cellId: cell.id});\r\n  };\r\n\r\n  onImgLoad(e:SyntheticEvent<HTMLImageElement>) {\r\n    //from Actions.js of grapheditor (line 1378)\r\n    const labelOnButtomConfig = \"imageAspect=0;aspect=fixed;verticalLabelPosition=bottom;verticalAlign=top;\";\r\n\r\n    // fully qualified url\r\n    // @ts-ignore\r\n    const src = e.target?.src as string;\r\n    const height = e.currentTarget.height;\r\n    const width = e.currentTarget.width;\r\n    sgUtilities.toDataURL(src, async (base64endoding:string) => {\r\n      this.setState({imageData: {height: height * 1.7,\r\n        width: width * 1.7,\r\n        // save as base64 encoded image\r\n        data: \"shape=image;\" + labelOnButtomConfig +\"image=\" + sgUtilities.dataUrlToCellStyle(base64endoding) + \";\",\r\n      }});\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const imageTitle = this.props.title ?this.props.title : \"default title\";\r\n    return (\r\n      <img src={this.props.src} onLoad={this.onImgLoad} ref={this.imageRef} width={50} title={imageTitle} alt={\"image: \\\"\" + imageTitle + \"\\\" not available\"}/>\r\n    );\r\n  }\r\n}\r\n","import * as MxTypes from \"mxgraph\"; // <- import types only (overwritten by custom typescript)\r\n\r\nimport React from \"react\";\r\nimport {AccordionTab} from \"primereact/accordion\";\r\n// node wrapper\r\nimport ImageNode from \"./draggable-nodes/ImageNode\";\r\nimport SingleNode from \"./draggable-nodes/SingleNode\";\r\n\r\nimport path from \"path\";\r\n\r\nimport * as actions from \"./Actions\";\r\nimport mx from \"./mx\";\r\n\r\ntype ImportedImages = Map<string, imageEntry[]>;\r\ntype imageEntry = { item: any, src: string, parentFolder:string, filename:string, filepath:string }\r\n\r\nfunction importAllImages(r:__WebpackModuleApi.RequireContext) {\r\n  const images:ImportedImages = new Map();\r\n  r.keys().forEach((item) => {\r\n    const parentFolder = path.dirname(item).replace(\"./\", \"\");\r\n    const currentFileInfo = {item: r(item), src: r(item).default, parentFolder: parentFolder, filename: path.basename(item), filepath: item};\r\n    if (images.has(parentFolder)) {\r\n      const fileInfoArr = images.get(parentFolder)!;\r\n      fileInfoArr.push(currentFileInfo);\r\n      images.set(parentFolder, fileInfoArr);\r\n    } else {\r\n      images.set(parentFolder, [currentFileInfo]);\r\n    }\r\n  });\r\n  return images;\r\n}\r\n\r\nexport function loadImageFolder() {\r\n  // require whole image folder: https://webpack.js.org/guides/dependency-management/#require-context\r\n  const images = importAllImages(require.context(\r\n      \"./data/NodeImages/\", // must be hardcoded since it cannot be determined by compile time\r\n      true,\r\n  ));\r\n  return images;\r\n}\r\n\r\nexport function loadStencilFolder() {\r\n  //TODO: implement this function, currently only copied from ImageFolder\r\n  // require whole image folder: https://webpack.js.org/guides/dependency-management/#require-context\r\n  const stencilFiles = importAllImages(require.context(\r\n      \"./data/Stencils/\", // must be hardcoded since it cannot be determined by compile time\r\n      true,\r\n  ));\r\n  return stencilFiles;\r\n}\r\n\r\nexport function loadImageArray(graph:MxTypes.mxGraph, value:imageEntry[]) {\r\n  // render image folder\r\n  return value.map( ({src, filename}) => <ImageNode key={\"SidebarImgNode: \" + filename} graph={graph} src={src} id={filename} title={filename.split(\".\")[0]} value='' />);\r\n}\r\n\r\nfunction getDefaultShapes() : any[] {\r\n  //@ts-ignore\r\n  const shapes = [];\r\n  let i = 0;\r\n  //@ts-ignore\r\n  for (const shape in mx.mxCellRenderer.defaultShapes) {\r\n    if (shape !== \"label\" && shape !== \"image\") {\r\n      shapes[i] = shape;\r\n    }\r\n    i++;\r\n  }\r\n  return shapes;\r\n}\r\n\r\n\r\nfunction isShapeAvailable(graph:MxTypes.mxGraph, name: string) {\r\n  //Only loads default shapes, even when shape was registered and could be loaded!\r\n  const shape = graph.cellRenderer.getShape(name);\r\n  // load newly added stencils\r\n  const stencil = mx.mxStencilRegistry.getStencil(name);\r\n  if (!shape && !stencil) {\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nexport function loadShapeArray(graph:MxTypes.mxGraph, value:string[]) {\r\n  //TODO: render available shapes\r\n  // render image folder\r\n  const defaultColors = \"fillColor=white;strokeColor=black\";\r\n  //FIXME: rendered only after node was dragged into the graph, not rendered at the same sizes, like the svg images\r\n  return value.map( (value, i) => isShapeAvailable(graph, value) ? <SingleNode key={\"SidebarStencilNode: \" + value + \"-\" + i} graph={graph} stencilRegistry={mx.mxStencilRegistry} width={50} height={50} value=\"\" title={value} data={\"shape=\" + value + \"\" + \";\" + defaultColors} /> : <></>);\r\n}\r\n\r\nexport function loadImageFolderToNode(graph:MxTypes.mxGraph, includeAccordionTabs:boolean) {\r\n  // render image folder\r\n  return Array.from(loadImageFolder().entries(), loadImages(graph, includeAccordionTabs),\r\n  );\r\n}\r\n\r\nexport function loadStencilFolderToNode(graph:MxTypes.mxGraph, includeAccordionTabs:boolean) {\r\n  // render image folder\r\n  return Array.from(loadStencilFolder().entries(), loadStencil(graph, includeAccordionTabs),\r\n  );\r\n}\r\n\r\n\r\nfunction loadImages(graph: MxTypes.mxGraph, includeAccordionTabs:boolean) {\r\n  // eslint-disable-next-line react/display-name\r\n  return ( [header, imageNodesData] : ([string, imageEntry[]]) ) => {\r\n    const imageNodes = loadImageArray(graph, imageNodesData);\r\n    // Avoid additional divs created by react: https://reactjs.org/docs/fragments.html\r\n    if (includeAccordionTabs) {\r\n      return <AccordionTab header={<><i className=\"pi pi-calendar\"></i><span>{header}</span></>}>\r\n        <React.Fragment key ={\"Sidebar elements: \" + header}>{imageNodes}</React.Fragment >\r\n      </AccordionTab>;\r\n    }\r\n    return imageNodes;\r\n  };\r\n}\r\n\r\nasync function loadFile(url:string) {\r\n  // read file from generated url:\r\n  return await fetch(url).then((r) => r.text());\r\n}\r\n\r\nfunction loadStencil(graph: MxTypes.mxGraph, includeAccordionTabs:boolean) {\r\n  // eslint-disable-next-line react/display-name\r\n  return ( [header, shapeNodesData] : ([string, imageEntry[]])) => {\r\n    //TODO: return available shapes to render them\r\n    //TODO: load xml data into an array of shapes\r\n    //TODO: src: should not only include the path but an image in base64 encoding of the shape, or the shape itself to be represented\r\n    //TODO: on drag must be exchanged with insert vertex and the corresponding shape information (shapeNode)\r\n    shapeNodesData.map(async ({src, filename}) => {\r\n      console.debug(filename);\r\n      console.debug(src);\r\n\r\n      // load xml files\r\n      const xml = await loadFile(src);\r\n      // register stencils from xml\r\n      loadStencilXmlString(xml);\r\n\r\n      // TODO: use to get image data from shape: https://jgraph.github.io/mxgraph/docs/js-api/files/shape/mxShape-js.html#mxShape.createSvg\r\n      mx.mxShape.prototype.createSvg();\r\n\r\n    } );\r\n    //TODO: load shapes\r\n    //FIXME: symbols are only loaded afterwards (after drag and drop)\r\n    const shapeNames = getDefaultShapes();\r\n    const customStencilsNames = Object.keys(mx.mxStencilRegistry.stencils);\r\n    shapeNames.push.apply(shapeNames, customStencilsNames);\r\n    //FIXME: custom shapes are not loaded currectly (everythin is loaded as default rectangle currently)\r\n    const shapeNodes = loadShapeArray(graph, shapeNames);\r\n\r\n    // Avoid additional divs created by react: https://reactjs.org/docs/fragments.html\r\n    if (includeAccordionTabs) {\r\n      return <AccordionTab header={<><i className=\"pi pi-calendar\"></i><span>{header}</span></>}>\r\n        <React.Fragment key ={\"Sidebar elements: \" + header}>{shapeNodes}</React.Fragment >\r\n      </AccordionTab>;\r\n    }\r\n    return shapeNodes;\r\n  };\r\n}\r\n\r\nexport function loadImageFolderToJson() {\r\n  const images = loadImageFolder();\r\n  return Object.fromEntries(images);\r\n}\r\n\r\n\r\nexport function readFileAsGraph(file:File, graph:MxTypes.mxGraph) {\r\n  // src: https://javascript.info/file\r\n  const reader = new FileReader();\r\n  reader.readAsText(file);\r\n  reader.onload = function() {\r\n    // console.log(reader.error);\r\n    //TODO: Load graph\r\n    //TODO: set graph to fileContent\r\n    const filecontent= reader.result as string;\r\n    const doc = mx.mxUtils.parseXml(filecontent);\r\n    //TODO: reimplement from editor.js\r\n    actions.setGraphXml(graph, doc.documentElement);\r\n  };\r\n  reader.onerror = function() {\r\n    console.log(reader.error);\r\n  };\r\n}\r\n\r\nexport function readStencilXmlFile(file:File) {\r\n  // src: https://javascript.info/file\r\n  const reader = new FileReader();\r\n  reader.readAsText(file);\r\n  reader.onload = function() {\r\n    const filecontent= reader.result as string;\r\n    loadStencilXmlString(filecontent);\r\n  };\r\n  reader.onerror = function() {\r\n    console.log(reader.error);\r\n  };\r\n}\r\n\r\nfunction loadStencilXmlString(filecontent: string) {\r\n  const doc = mx.mxUtils.parseXml(filecontent);\r\n  let shape = doc.firstChild?.firstChild;\r\n  while (shape != null) {\r\n    if (shape.nodeType == mx.mxConstants.NODETYPE_ELEMENT) {\r\n      //@ts-ignore\r\n      mx.mxStencilRegistry.addStencil(shape.getAttribute(\"name\"), new mx.mxStencil(shape));\r\n    }\r\n    shape = shape.nextSibling;\r\n  }\r\n}\r\n\r\n","// import mxgraph and typscript libraries\r\nimport * as MxTypes from \"mxgraph\"; // <- import types only\r\nimport {Property, evaluateProperty, getMaxSumOfProperty} from \"./iot/data-structure-utils/IotPropertyTypes\";\r\nimport mx from \"./mx\";\r\nimport mxCodec from \"./Utils/MxCodecFrameworkFix\";\r\nimport * as utilityFunctions from \"./Utils/UtilityFunctions\";\r\nimport * as fileUtils from \"./FileUtils\";\r\nimport * as styleEditorActions from \"./Utils/StyleEditorActions\";\r\n\r\nexport function editCell(graph:MxTypes.mxGraph) {\r\n  if (graph.isEnabled()) {\r\n    graph.startEditingAtCell();\r\n  }\r\n}\r\n\r\nexport function cut(graph:MxTypes.mxGraph) {\r\n  mx.mxClipboard.cut(graph);\r\n}\r\n\r\nexport function copy(graph:MxTypes.mxGraph) {\r\n  mx.mxClipboard.copy(graph);\r\n}\r\n\r\nexport function paste(graph:MxTypes.mxGraph) {\r\n  mx.mxClipboard.paste(graph);\r\n}\r\n\r\nexport function pasteHere(graph:MxTypes.mxGraph, evt:MouseEvent) {\r\n  const cells = mx.mxClipboard.paste(graph);\r\n  moveToMouse(graph, cells, evt);\r\n}\r\n\r\nexport function getVertexDropLocation(graph:MxTypes.mxGraph, evt: MouseEvent | TouchEvent | DragEvent) {\r\n  const pt = mx.mxUtils.convertPoint(graph.container, mx.mxEvent.getClientX(evt), mx.mxEvent.getClientY(evt));\r\n  return getPointDropLocation(graph, pt);\r\n}\r\n\r\nfunction getPointDropLocation(graph: MxTypes.mxGraph, pt: MxTypes.mxPoint) {\r\n  const tr = graph.view.translate;\r\n  const scale = graph.view.scale;\r\n  const x:number = pt.x / scale - tr.x;\r\n  const y:number = pt.y / scale - tr.y;\r\n  return {x, y};\r\n}\r\n\r\nfunction moveToMouse(graph:MxTypes.mxGraph, cells:MxTypes.mxCell[], evt:MouseEvent) {\r\n  const {x, y} = getVertexDropLocation(graph, evt);\r\n  const boundingBox = graph.getBoundingBoxFromGeometry(cells, true);\r\n  const dx = x - boundingBox.x;\r\n  const dy = y - boundingBox.y;\r\n  graph.cellsMoved(cells, dx, dy);\r\n}\r\n\r\nexport function duplicate(graph:MxTypes.mxGraph) {\r\n  mx.mxClipboard.copy(graph);\r\n  graph.setSelectionCells(mx.mxClipboard.paste(graph));\r\n}\r\n\r\nexport function group(graph:MxTypes.mxGraph, border = 0, cells = graph.getSelectionCells()) {\r\n  // group if mulitple items are selected (ignore if they contain groups)\r\n  if (graph.getSelectionCount() > 1) {\r\n    //TODO: specify target group cell, based on property of the cell\r\n    graph.setSelectionCell(graph.groupCells(null, border, cells));\r\n    // group consists of 1 parent cell containing its children\r\n  }\r\n}\r\n\r\n\r\nexport function selectGroup(graph:MxTypes.mxGraph) {\r\n  const firstSelectedCell = graph.getSelectionCells()[0];\r\n  const parent = firstSelectedCell.getParent();\r\n  if (parent !== graph.getDefaultParent()) {\r\n    graph.selectCells(true, true, firstSelectedCell.getParent(), true);\r\n  }\r\n}\r\n\r\nexport function ungroup(graph:MxTypes.mxGraph) {\r\n  const firstSelectedCell = graph.getSelectionCells()[0];\r\n  const isSelectionGrouped:boolean = graph.getModel().getChildCount(firstSelectedCell) > 0;\r\n  // ungroup selected\r\n  if (graph.getSelectionCount() === 1 && isSelectionGrouped) {\r\n    graph.ungroupCells(graph.getSelectionCells());\r\n    //FIXME: wrong amount of children\r\n    mx.mxUtils.alert(\"Ungrouping: \" + graph.getSelectionCount() + \" elements\");\r\n  }\r\n}\r\n\r\nexport function undo(undoMgr:MxTypes.mxUndoManager) {\r\n  undoMgr.undo();\r\n}\r\n\r\nexport function redo(undoMgr:MxTypes.mxUndoManager) {\r\n  undoMgr.redo();\r\n}\r\n\r\nexport function selectAll(graph:MxTypes.mxGraph) {\r\n  const parent = graph.getDefaultParent();\r\n  graph.selectAll(parent, true);\r\n}\r\n\r\nexport function selectAllOrClearSelection(graph:MxTypes.mxGraph) {\r\n  const previousSelectionCount:number = graph.getSelectionCount();\r\n  selectAll(graph);\r\n  const currentSelectionCount:number = graph.getSelectionCount();\r\n  if (currentSelectionCount === previousSelectionCount) {\r\n    clearSelection(graph);\r\n  }\r\n}\r\n\r\nexport function selectCurrentSelectionOrRoot(graph: MxTypes.mxGraph) {\r\n  const selectionCell = graph.getSelectionCell();\r\n  let selectedParent;\r\n  if (!selectionCell) {\r\n    selectedParent = graph.getCurrentRoot();\r\n  } else {\r\n    selectedParent = selectionCell.getParent();\r\n  }\r\n  return selectedParent;\r\n}\r\n\r\nexport function selectAllVertices(graph:MxTypes.mxGraph) {\r\n  graph.selectVertices(selectCurrentSelectionOrRoot(graph), true);\r\n}\r\n\r\nexport function selectAllEdges(graph:MxTypes.mxGraph) {\r\n  graph.selectEdges(selectCurrentSelectionOrRoot(graph));\r\n}\r\n/**\r\n *\r\n * @param graph\r\n * @param sourceType could be data_provider, data_store, data_source\r\n */\r\nexport function selectAllDataSources(graph:MxTypes.mxGraph, sourceType:string, propertyNameOfDataSources=\"metadata\", propertyNameOfDataType=\"metadataType\") {\r\n  let cells = graph.getSelectionCells();\r\n  if (cells.length == 0 ) {\r\n    // if no selection is presen, select everything\r\n    cells = graph.getDefaultParent().children;\r\n  }\r\n  //TODO: check which combinationis in group -> if distinct ones => colorize group as data_source, otherwise as corresponding source\r\n  // flatten grouped cells\r\n  const flattendCells = cells.flatMap( (cell) => getChildren(graph, cell));\r\n  const dataSourceCells = flattendCells.filter((cell)=> cell.getAttribute(propertyNameOfDataSources) != null);\r\n  const usedDatasource = dataSourceCells.filter((cell) => cell.getAttribute(propertyNameOfDataType) === sourceType );\r\n  graph.setSelectionCells(usedDatasource);\r\n}\r\n\r\nexport function getCellsWithTrustScores(graph:MxTypes.mxGraph, cells: MxTypes.mxCell[]) {\r\n  let flattendCells = cells.flatMap((cell) => getChildren(graph, cell));\r\n  flattendCells = flattendCells.filter((cell) => {\r\n    const trustScore = cell.getAttribute(\"trustScore\");\r\n    return (trustScore != null && !Number.isNaN(parseFloat(trustScore)) && parseFloat(trustScore) != -1);\r\n  });\r\n  return flattendCells;\r\n}\r\n\r\nexport function getCellsWithAttribute(graph:MxTypes.mxGraph, cells: MxTypes.mxCell[], attributeName:string) {\r\n  let flattendCells = cells.flatMap((cell) => getChildren(graph, cell));\r\n  flattendCells = flattendCells.filter((cell) => {\r\n    const attribute = cell.getAttribute(attributeName, null);\r\n    return (attribute !== null );\r\n  });\r\n  return flattendCells;\r\n}\r\n\r\nexport function clearSelection(graph:MxTypes.mxGraph) {\r\n  graph.clearSelection();\r\n}\r\n\r\nexport function selectionToFront(graph:MxTypes.mxGraph) {\r\n  graph.orderCells(false);\r\n}\r\n\r\nexport function selectionToBack(graph:MxTypes.mxGraph) {\r\n  graph.orderCells(true);\r\n}\r\n\r\n/**\r\n * FIXME: if vertex with a connected edge is generate, edge is deleted as well when vertex got deleted -> should only delete vertex\r\n */\r\nexport function deleteSelection(graph:MxTypes.mxGraph) {\r\n  if (graph.isEnabled()) {\r\n    // graph.escape();\r\n    const cells = graph.getSelectionCells();\r\n    if (cells != null) {\r\n      graph.removeCells(cells);\r\n    }\r\n  }\r\n}\r\n\r\nexport function deleteAll(graph:MxTypes.mxGraph) {\r\n  graph.model.clear();\r\n}\r\n\r\n\r\n/**\r\n * Returns the XML node that represents the current diagram.\r\n * source from: editor.js\r\n */\r\nfunction getGraphXml(graph:MxTypes.mxGraph, ignoreSelection:boolean) {\r\n  ignoreSelection = (ignoreSelection != null) ? ignoreSelection : true;\r\n  let node:any = null;\r\n  const enc = new mxCodec(mx.mxUtils.createXmlDocument());\r\n  node = enc.encode(graph.getModel());\r\n\r\n  if (graph.view.translate.x != 0 || graph.view.translate.y != 0) {\r\n    node.setAttribute(\"dx\", Math.round(graph.view.translate.x * 100) / 100);\r\n    node.setAttribute(\"dy\", Math.round(graph.view.translate.y * 100) / 100);\r\n  }\r\n\r\n  node.setAttribute(\"grid\", (graph.isGridEnabled()) ? \"1\" : \"0\");\r\n  node.setAttribute(\"gridSize\", graph.gridSize);\r\n  node.setAttribute(\"guides\", (graph.graphHandler.guidesEnabled) ? \"1\" : \"0\");\r\n  node.setAttribute(\"tooltips\", (graph.tooltipHandler.isEnabled()) ? \"1\" : \"0\");\r\n  node.setAttribute(\"connect\", (graph.connectionHandler.isEnabled()) ? \"1\" : \"0\");\r\n  // node.setAttribute(\"arrows\", (graph.connectionArrowsEnabled) ? \"1\" : \"0\");\r\n  node.setAttribute(\"fold\", (graph.foldingEnabled) ? \"1\" : \"0\");\r\n  node.setAttribute(\"page\", (graph.pageVisible) ? \"1\" : \"0\");\r\n  node.setAttribute(\"pageScale\", graph.pageScale);\r\n  node.setAttribute(\"pageWidth\", graph.pageFormat.width);\r\n  node.setAttribute(\"pageHeight\", graph.pageFormat.height);\r\n\r\n  return node;\r\n}\r\n\r\n/**\r\n * Sets the XML node for the current diagram.\r\n * source from: editor.js\r\n */\r\nexport function setGraphXml(graph:MxTypes.mxGraph, node:any) {\r\n  if (node != null) {\r\n    const dec = new mxCodec(node.ownerDocument);\r\n\r\n    if (node.nodeName == \"mxGraphModel\") {\r\n      //this code is run\r\n      graph.model.beginUpdate();\r\n\r\n      try {\r\n        graph.model.clear();\r\n        graph.view.scale = 1;\r\n        dec.decode(node, graph.getModel());\r\n      } finally {\r\n        graph.model.endUpdate();\r\n      }\r\n\r\n      graph.fireEvent(new mx.mxEventObject(\"resetGraphView\"));\r\n    } else if (node.nodeName == \"root\") {\r\n      resetGraph(graph);\r\n\r\n      // Workaround for invalid XML output in Firefox 20 due to bug in mxUtils.getXml\r\n      const wrapper = dec.document.createElement(\"mxGraphModel\");\r\n      wrapper.appendChild(node);\r\n\r\n      dec.decode(wrapper, graph.getModel());\r\n      graph.fireEvent(new mx.mxEventObject(\"resetGraphView\"));\r\n    } else {\r\n      // eslint-disable-next-line no-throw-literal\r\n      throw {\r\n        message: mx.mxResources.get(\"cannotOpenFile\"),\r\n        node: node,\r\n        toString: function() {\r\n          return this.message;\r\n        },\r\n      };\r\n    }\r\n  } else {\r\n    resetGraph(graph);\r\n    graph.model.clear();\r\n    graph.fireEvent(new mx.mxEventObject(\"resetGraphView\"));\r\n  }\r\n}\r\n\r\n/**\r\n * Sets the XML node for the current diagram.\r\n * source from: editor.js\r\n */\r\nfunction resetGraph(graph:MxTypes.mxGraph) {\r\n  // graph.gridEnabled = !this.isChromelessView() || urlParams[\"grid\"] == \"1\";\r\n  graph.graphHandler.guidesEnabled = true;\r\n  graph.setTooltips(true);\r\n  graph.setConnectable(true);\r\n  graph.foldingEnabled = true;\r\n  graph.pageBreaksVisible = graph.pageVisible;\r\n  graph.preferPageSize = graph.pageBreaksVisible;\r\n  graph.pageScale = mx.mxGraph.prototype.pageScale;\r\n  graph.pageFormat = mx.mxGraph.prototype.pageFormat;\r\n  updateGraphComponents(graph);\r\n  graph.view.setScale(1);\r\n}\r\n\r\n/**\r\n * Keeps the graph container in sync with the persistent graph state\r\n * source from: editor.js\r\n */\r\nfunction updateGraphComponents(graph:MxTypes.mxGraph) {\r\n\r\n  if (graph.container != null) {\r\n    graph.view.validateBackground();\r\n    graph.container.style.overflow = \"auto\";\r\n\r\n    graph.fireEvent(new mx.mxEventObject(\"updateGraphComponents\"));\r\n  }\r\n}\r\n\r\n\r\nexport function saveXml(graph:MxTypes.mxGraph) {\r\n\r\n  //TODO: original saves some kind of hash\r\n\r\n  // console.log(\"function \", arguments.callee.name, \" not yet implemented\");\r\n\r\n  const filename = \"demo.xml\";\r\n\r\n  if (filename == null) {\r\n    alert(\"type in file name\");\r\n  }\r\n  if (graph.isEditing()) {\r\n    graph.stopEditing(false);\r\n  }\r\n\r\n  const xml = mx.mxUtils.getXml(getGraphXml(graph, true));\r\n\r\n  return xml;\r\n\r\n}\r\n\r\n\r\nexport function openFile(graph:MxTypes.mxGraph, handleFilenameChange:(filename: string) => void) {\r\n  //source from: https://codepen.io/rkotze/pen/zjRXYr\r\n  //html input element https://www.w3schools.com/tags/att_input_type_file.asp\r\n  // https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file\r\n  const fileSelector = document.createElement(\"input\");\r\n\r\n  fileSelector.setAttribute(\"type\", \"file\");\r\n  fileSelector.onchange = (e:any)=> {\r\n    // console.debug(\"no file selected\");\r\n    const files = (e.target as HTMLInputElement)!.files;\r\n    if (files) {\r\n      fileUtils.readFileAsGraph(files[0], graph);\r\n      // save filename\r\n      handleFilenameChange(files[0].name);\r\n    }\r\n    console.debug(files);\r\n  };\r\n  return fileSelector;\r\n}\r\n\r\nexport function openStencilFile() {\r\n  //source from: https://codepen.io/rkotze/pen/zjRXYr\r\n  //html input element https://www.w3schools.com/tags/att_input_type_file.asp\r\n  // https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file\r\n  const fileSelector = document.createElement(\"input\");\r\n\r\n  fileSelector.setAttribute(\"type\", \"file\");\r\n  fileSelector.onchange = (e:any)=> {\r\n    // console.debug(\"no file selected\");\r\n    const files = (e.target as HTMLInputElement)!.files;\r\n    if (files) {\r\n      fileUtils.readStencilXmlFile(files[0]);\r\n    }\r\n    console.debug(files);\r\n  };\r\n  return fileSelector;\r\n}\r\n\r\nexport async function saveFile(content:any, filename:string) {\r\n// (A) CREATE BLOB OBJECT\r\n  const myBlob = new Blob([content], {type: \"text/plain\"});\r\n\r\n  // (B) CREATE DOWNLOAD LINK\r\n  const url = window.URL.createObjectURL(myBlob);\r\n  const anchor = document.createElement(\"a\");\r\n  anchor.href = url;\r\n  anchor.download = filename;\r\n\r\n  // (C) \"FORCE DOWNLOAD\"\r\n  // NOTE: MAY NOT ALWAYS WORK DUE TO BROWSER SECURITY\r\n  // BETTER TO LET USERS CLICK ON THEIR OWN\r\n  anchor.click();\r\n  window.URL.revokeObjectURL(url);\r\n  // document.removeChild(anchor);\r\n}\r\n\r\nexport function zoomIn(graph:MxTypes.mxGraph) {\r\n  graph.zoomIn();\r\n}\r\n\r\nexport function zoomOut(graph:MxTypes.mxGraph) {\r\n  graph.zoomOut();\r\n}\r\n\r\nexport function zoomReset(graph:MxTypes.mxGraph) {\r\n  graph.zoomTo(1);\r\n}\r\n\r\nexport function printStyle(graph:MxTypes.mxGraph) {\r\n  if (graph.isEnabled()) {\r\n    const cells = graph.getSelectionCells();\r\n    cells.forEach((cell) => {\r\n      if (cell != null) {\r\n        console.log(\"current cell: [\" + cell.id + \"]=\" + cell.getStyle());\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport function addWaypoint(graph:MxTypes.mxGraph) {\r\n  // source from grapheditor examples actions.js\r\n  const cell = graph.getSelectionCell();\r\n\r\n  if (cell != null && graph.getModel().isEdge(cell)) {\r\n    const handler = graph.selectionCellsHandler.getHandler(cell);\r\n    if (handler instanceof mx.mxEdgeHandler) {\r\n      const t = graph.view.translate;\r\n      const s = graph.view.scale;\r\n      let dx = t.x;\r\n      let dy = t.y;\r\n\r\n      let parent = graph.getModel().getParent(cell);\r\n      let parentGeometry = graph.getCellGeometry(parent);\r\n\r\n      while (graph.getModel().isVertex(parent) && parentGeometry != null) {\r\n        dx += parentGeometry.x;\r\n        dy += parentGeometry.y;\r\n\r\n        parent = graph.getModel().getParent(parent);\r\n        parentGeometry = graph.getCellGeometry(parent);\r\n      }\r\n\r\n      const x = Math.round(graph.snap(graph.popupMenuHandler.triggerX / s - dx));\r\n      const y = Math.round(graph.snap(graph.popupMenuHandler.triggerY / s - dy));\r\n\r\n      handler.addPointAt(handler.state, x, y);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Removes the Waypoint closest to the event. If no event is given removes the first element\r\n * @param graph\r\n * @param evt\r\n */\r\nexport function removeWaypoint(graph:MxTypes.mxGraph, evt: MouseEvent | TouchEvent | null) {\r\n  const cells = graph.getSelectionCells();\r\n  graph.getModel().beginUpdate();\r\n  try {\r\n    if (cells != null) {\r\n      cells.forEach((cell) => {\r\n        if (graph.getModel().isEdge(cell)) {\r\n          let geometry = graph.getCellGeometry(cell);\r\n          if (geometry != null) {\r\n            geometry = geometry.clone();\r\n            const points = geometry.points ? geometry.points : [];\r\n            console.log(geometry.points);\r\n            let indexToRemove:number = 0;\r\n            // calculate distance to mouse and remove closest to selection\r\n            if (evt !== null) {\r\n              indexToRemove = getClosestPointToSelection(graph, points, evt);\r\n            }\r\n            points.splice(indexToRemove, 1);\r\n            graph.getModel().setGeometry(cell, geometry);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  } finally {\r\n    graph.getModel().endUpdate();\r\n  }\r\n}\r\n\r\n/**\r\n * Calculate distance to mouse and return the curresponding indes\r\n * @param graph\r\n * @param points all possible points\r\n * @param evt for interaction\r\n * @returns index of the closest point in the points array\r\n */\r\nfunction getClosestPointToSelection(graph:MxTypes.mxGraph, points: MxTypes.mxPoint[], evt: MouseEvent | TouchEvent) {\r\n  let min:number = Infinity;\r\n  let index:number = 0;\r\n  const {x, y} = getVertexDropLocation(graph, evt);\r\n  for (let i = 0; i < points.length; i++) {\r\n    const point = points[i];\r\n    const distance = getVectorLength(point.x - x, point.y - y);\r\n    if (distance < min) {\r\n      min=distance;\r\n      index = i;\r\n    }\r\n  }\r\n  return index;\r\n}\r\n\r\nfunction getVectorLength(x:number, y:number) {\r\n  return Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));\r\n}\r\n\r\n/**\r\n * Removes all waypoints for the given Selection\r\n * @param graph\r\n */\r\nexport function clearAllWaypoints(graph:MxTypes.mxGraph) {\r\n  // source from grapheditor examples actions.js\r\n  let cells = graph.getSelectionCells();\r\n  if (cells != null) {\r\n    cells = graph.addAllEdges(cells);\r\n    graph.getModel().beginUpdate();\r\n    try {\r\n      cells.forEach((cell) => {\r\n        if (graph.getModel().isEdge(cell)) {\r\n          let geometry = graph.getCellGeometry(cell);\r\n          if (geometry != null) {\r\n            geometry = geometry.clone();\r\n            geometry.points = null;\r\n            graph.getModel().setGeometry(cell, geometry);\r\n          }\r\n        }\r\n      });\r\n    } finally {\r\n      graph.getModel().endUpdate();\r\n    }\r\n  }\r\n}\r\n\r\nexport function getCellGeometry(graph:MxTypes.mxGraph, cell:MxTypes.mxCell) {\r\n  if (graph.isEnabled() && cell != null && graph.getModel().isVertex(cell)) {\r\n    const geo = graph.getCellGeometry(cell);\r\n    if (geo != null) {\r\n      return new mx.mxRectangle(geo.x, geo.y, geo.width, geo.height);\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * FIXME: not returning the sourcePoint consistantly\r\n * Source adapted from Format.js of graph example Line 2621 and following\r\n * @param graph\r\n * @returns\r\n */\r\nexport function getCellSourcePoint(graph:MxTypes.mxGraph) {\r\n  const cell = graph.getSelectionCell();\r\n  if (graph.getSelectionCount() == 1 && graph.getModel().isEdge(cell)) {\r\n    const geo = graph.getModel().getGeometry(cell);\r\n    if (geo.sourcePoint != null && graph.getModel().getTerminal(cell, true) == null) {\r\n      return new mx.mxPoint(geo.sourcePoint.x, geo.sourcePoint.y);\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * FIXME: not returning the targetPoint consistantly\r\n * Source adapted from Format.js of graph example Line 2621 and following\r\n * @param graph\r\n * @returns\r\n */\r\nexport function getCellTargetPoint(graph:MxTypes.mxGraph) {\r\n  const cell = graph.getSelectionCell();\r\n  if (graph.getSelectionCount() == 1 && graph.getModel().isEdge(cell)) {\r\n    const geo = graph.getModel().getGeometry(cell);\r\n    if (geo.targetPoint != null && graph.getModel().getTerminal(cell, false) == null) {\r\n      return new mx.mxPoint(geo.targetPoint.x, geo.targetPoint.y);\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n\r\nexport function setCellGeometry(graph:MxTypes.mxGraph, cells:MxTypes.mxCell[], cellGeometry:MxTypes.mxRectangle) {\r\n  setVertexGeometry(graph, cellGeometry, cells, true, true);\r\n}\r\n\r\nexport function getCellPosition(graph:MxTypes.mxGraph, cell:MxTypes.mxCell) {\r\n  const copiedVertexGeometry = getCellGeometry(graph, cell);\r\n  if (copiedVertexGeometry) {\r\n    return new mx.mxPoint(copiedVertexGeometry.x, copiedVertexGeometry.y);\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function setCellPosition(graph:MxTypes.mxGraph, cells:MxTypes.mxCell[], position:MxTypes.mxPoint) {\r\n  setVertexGeometry(graph, position, cells, false, true);\r\n}\r\n\r\nexport function getCellScale(graph:MxTypes.mxGraph, cell:MxTypes.mxCell) {\r\n  const copiedVertexGeometry = getCellGeometry(graph, cell);\r\n  if (copiedVertexGeometry) {\r\n    return new mx.mxPoint(copiedVertexGeometry.width, copiedVertexGeometry.height);\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function setCellScale(graph:MxTypes.mxGraph, cells:MxTypes.mxCell[], scaling:MxTypes.mxPoint) {\r\n  setVertexGeometry(graph, scaling, cells, true, false);\r\n}\r\n\r\n/**\r\n *\r\n * @param graph\r\n * @param copiedCellGeometryInformation could be extracted from cell gemoetry\r\n */\r\nexport function setVertexGeometry(graph:MxTypes.mxGraph, copiedCellGeometryInformation:MxTypes.mxPoint | MxTypes.mxRectangle | undefined, cells:MxTypes.mxCell[], isScaling:boolean=false, isPosition:boolean=false) {\r\n  if (graph.isEnabled() && !graph.isSelectionEmpty() && copiedCellGeometryInformation != null && copiedCellGeometryInformation !== undefined) {\r\n    graph.getModel().beginUpdate();\r\n    try {\r\n\r\n      for (let i = 0; i < cells.length; i++) {\r\n        if (graph.getModel().isVertex(cells[i])) {\r\n          let geo = graph.getCellGeometry(cells[i]);\r\n          if (geo != null) {\r\n            geo = geo.clone();\r\n            if (isScaling && isPosition && copiedCellGeometryInformation instanceof mx.mxRectangle) {\r\n              geo.x = copiedCellGeometryInformation.x;\r\n              geo.y = copiedCellGeometryInformation.y;\r\n              geo.width = copiedCellGeometryInformation.width;\r\n              geo.height = copiedCellGeometryInformation.height;\r\n            } else if (isScaling) {\r\n              geo.width = copiedCellGeometryInformation.x;\r\n              geo.height = copiedCellGeometryInformation.y;\r\n            } else if (isPosition) {\r\n              geo.x = copiedCellGeometryInformation.x;\r\n              geo.y = copiedCellGeometryInformation.y;\r\n            }\r\n            graph.getModel().setGeometry(cells[i], geo);\r\n          }\r\n        }\r\n      }\r\n    } finally {\r\n      graph.getModel().endUpdate();\r\n    }\r\n  }\r\n}\r\n\r\n\r\n/**\r\n *\r\n * @param graph\r\n * @param copiedPoint could be extracted from edge gemoetry\r\n */\r\nexport function setEdgePointOfSelection(graph:MxTypes.mxGraph, copiedPoint:MxTypes.mxPoint, isSource:boolean) {\r\n  if (graph.isEnabled() && !graph.isSelectionEmpty() && copiedPoint != null && copiedPoint !== undefined) {\r\n    graph.getModel().beginUpdate();\r\n    try {\r\n      const cells = graph.getSelectionCells();\r\n      for (let i = 0; i < cells.length; i++) {\r\n        if (graph.getModel().isEdge(cells[i])) {\r\n          let geo = graph.getCellGeometry(cells[i]);\r\n          if (geo != null) {\r\n            geo = geo.clone();\r\n\r\n            if (isSource) {\r\n              geo.sourcePoint.x = copiedPoint.x;\r\n              geo.sourcePoint.y = copiedPoint.y;\r\n            } else {\r\n              geo.targetPoint.x = copiedPoint.x;\r\n              geo.targetPoint.y = copiedPoint.y;\r\n            }\r\n            graph.getModel().setGeometry(cells[i], geo);\r\n          }\r\n        }\r\n      }\r\n    } finally {\r\n      graph.getModel().endUpdate();\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * --------------------------------------------------------------------------------\r\n * Helper functions for editing meta-data\r\n * --------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Get all children of the given root cell. Doesn't return the root node itself.\r\n * Usage example:\r\n * ```js\r\n * cells.flatMap( (cell) => editorActions.getChildren(this.props.graph, cell));\r\n * ```\r\n * @param graph\r\n * @param cell\r\n * @param flattendCells\r\n * @returns\r\n */\r\nexport function getChildren(graph:MxTypes.mxGraph, cell:MxTypes.mxCell, flattendCells:MxTypes.mxCell[] = []) {\r\n  const amountChildren = graph.getModel().getChildCount(cell);\r\n  if (amountChildren > 0) {\r\n    for (let i = 0; i < amountChildren; i++) {\r\n      getChildren(graph, cell.getChildAt(i), flattendCells);\r\n    }\r\n  } else {\r\n    flattendCells.push(cell);\r\n  }\r\n  return flattendCells;\r\n}\r\n\r\nexport function getCellDataAsJson(value:any):Object| null {\r\n  let json = null;\r\n  // check if note is an XML node\r\n  // @ts-ignore\r\n  if (mx.mxUtils.isNode(value)) {\r\n    json = utilityFunctions.convertXmlToJson(mx.mxUtils.getXml(value));\r\n  //already an object\r\n  } else if (value.constructor == Object ) {\r\n    //TODO: check if json object is valid\r\n  }\r\n  return json;\r\n}\r\n\r\nexport function getCellDataAsXmlNode(value:any, tagName?:string) {\r\n  // check if note is an XML node\r\n  // @ts-ignore\r\n  if (mx.mxUtils.isNode(value)) {\r\n    return value;\r\n  //already an object --> assume json\r\n  } else if (value.constructor == Object ) {\r\n    const xml = utilityFunctions.convertJsonToXml(value, tagName);\r\n    return mx.mxUtils.parseXml(xml);\r\n  }\r\n}\r\n\r\nexport function getEditData(graph:MxTypes.mxGraph, cell:MxTypes.mxCell, tagName=\"docElement\"): HTMLElement {\r\n  // Tutorial https://jgraph.github.io/mxgraph/docs/js-api/files/model/mxCell-js.html\r\n  //TODO: keep in synch with valueForCellChanged function => extract editing function\r\n  let value:any = graph.getModel().getValue(cell);\r\n  // Converts the value to an XML node\r\n  // @ts-ignore\r\n  if (!mx.mxUtils.isNode(value)) {\r\n    // eslint-disable-next-line prefer-const\r\n    let doc = mx.mxUtils.createXmlDocument();\r\n    // eslint-disable-next-line prefer-const\r\n    let obj = doc.createElement(tagName);\r\n    // eslint-disable-next-line quotes\r\n    setBasicEditData(obj, value);\r\n    value = obj;\r\n  }\r\n  return value;\r\n}\r\n\r\nexport function setBasicEditData(obj: HTMLElement, label: any) {\r\n  obj.setAttribute(\"label\", label);\r\n  //currently edits text in cell: -> save object as json\r\n  obj.setAttribute(\"metadata\", \"\");\r\n  obj.setAttribute(\"trustScore\", \"\");\r\n  obj.setAttribute(\"metadataType\", \"\");\r\n  obj.setAttribute(\"metadataIoTTypes\", \"\");\r\n}\r\n\r\nexport function getJsonFromAttribute(editData:HTMLElement, defaultJson:any, tagName=\"docElement\", attributeName=\"metadata\") {\r\n  // label & metadata saved inside editData --> metadata can be used for further datas\r\n  const jsonEditData = getCellDataAsJson(editData);\r\n  // @ts-ignore\r\n  const jsonAttribute = jsonEditData[tagName][\"$\"][attributeName];\r\n  if (jsonAttribute === \"\" || !jsonAttribute) {\r\n    const stringifiedJson = JSON.stringify(defaultJson, utilityFunctions.jsonMapReplacer, 4);\r\n    return stringifiedJson ? JSON.parse(stringifiedJson, utilityFunctions.jsonMapReviver) : undefined;\r\n  }\r\n  return jsonAttribute ? JSON.parse(jsonAttribute, utilityFunctions.jsonMapReviver) : undefined;\r\n}\r\n\r\n/**\r\n * save json as string in the given attribute at the given cell into the given HTMLElement\r\n * @param graph\r\n * @param cell\r\n * @param editData\r\n * @param json\r\n * @param jsonMapReplacer\r\n * @param attribute\r\n */\r\nexport function setEditDataJson(graph:MxTypes.mxGraph, cell:MxTypes.mxCell, editData:HTMLElement, json: Property, jsonMapReplacer:any, attribute=\"metadata\") {\r\n  // @ts-ignore\r\n  const valueIsXMLNode = mx.mxUtils.isNode(cell.value);\r\n  const oldLabel = (!valueIsXMLNode) ? cell.getValue() : cell.getAttribute(\"label\", \"\");\r\n\r\n  // const oldLabel = editData.getAttribute(\"label\") || cell.getValue()\r\n  setEditData(graph, cell, editData, attribute, JSON.stringify(json, jsonMapReplacer));\r\n  const type = json.type;\r\n  setEditData(graph, cell, editData, \"metadataType\", \"\" + type);\r\n  // data_source, data_store, data provider\r\n  const iotTypes = json.iotTypes.concat();\r\n  setEditData(graph, cell, editData, \"metadataIoTTypes\", \"\" + iotTypes);\r\n  // negative maxScore = template not yet filled out\r\n  const isValidQuestionnaire = getMaxSumOfProperty(json) >= 0;\r\n  // apply trust score only on valid questionnaire\r\n  if (isValidQuestionnaire ) {\r\n  // calculate trust score \\tau\r\n    const score = evaluateQuestionary(json);\r\n    //overwrite label with old label and new trust score from cell\r\n    const newLabel = updateScoreTextLabel(score, oldLabel);\r\n\r\n    setEditData(graph, cell, editData, \"label\", newLabel);\r\n    setEditData(graph, cell, editData, \"trustScore\", \"\" + score);\r\n  } else if (!isValidQuestionnaire && valueIsXMLNode) {\r\n    // from valid questionnaire to invalid with everywhere no selection\r\n    const newLabel = updateScoreInLabel(oldLabel, \"\").trim();\r\n    setEditData(graph, cell, editData, \"label\", newLabel);\r\n    setEditData(graph, cell, editData, \"trustScore\", \"\");\r\n  }\r\n}\r\n\r\n/**\r\n * save/add score in label\r\n * @param score\r\n * @param editData\r\n * @returns\r\n */\r\nfunction updateScoreTextLabel(score: number, currentLabel: string) {\r\n  const scoreText = \"&#964 = \" + score.toFixed(3);\r\n  /* eslint-disable no-useless-escape */\r\n  const match = currentLabel.match(new RegExp(\"(&#964 = [0-9]*[.]*[0-9]*)\", \"g\"));\r\n  const newLabel = match ? currentLabel.replace(match[0], scoreText) : currentLabel + (\"\\n(\" + scoreText + \")\");\r\n  return newLabel;\r\n}\r\n\r\n/**\r\n * save json as string in the given attribute at the given cell into the given HTMLElement\r\n * @param graph\r\n * @param cell\r\n * @param editData\r\n * @param json\r\n * @param jsonMapReplacer\r\n * @param attribute\r\n */\r\nexport function removeEditDataJson(graph:MxTypes.mxGraph, cell:MxTypes.mxCell, editData:HTMLElement, json:any, jsonMapReplacer:any, attribute=\"metadata\") {\r\n  setEditData(graph, cell, editData, attribute, JSON.stringify(json, jsonMapReplacer));\r\n  // calculate trust score \\tau\r\n  // const score = evaluateQuestionary(json);\r\n  // save/add score in label\r\n  // editData.getAttribute(\"label\") + \"( &#964 = \"+ score + \")\")\r\n  //FIXME: do not add each time!\r\n  // update placeholder -> create new property and include in label if possible\r\n  // => setEditData to create a property and getEditData to get a prop -> could build menu if prefered\r\n\r\n  //FIXME: execution timing is wrong. text gets updated only after multiple editData\r\n  const scoreText = \"\";\r\n  const currentLabel = editData.getAttribute(\"label\") || \"\";\r\n  /* eslint-disable no-useless-escape */\r\n  const newLabel = updateScoreInLabel(currentLabel, scoreText);\r\n\r\n  setEditData(graph, cell, editData, \"trustScore\", \"\" + -1);\r\n  setEditData(graph, cell, editData, \"label\", newLabel);\r\n  // remove metadata\r\n  setEditData(graph, cell, editData, \"metadata\", \"\");\r\n}\r\n\r\nexport function updateScoreInLabel(currentLabel: string, scoreText: string) {\r\n  const match = currentLabel.match(new RegExp(\"(&#964 = [0-9]*[.]*[0-9]*)\", \"g\"));\r\n  const newLabel = match ? currentLabel.replace(\"(\" + match[0] + \")\", scoreText) : currentLabel;\r\n  return newLabel;\r\n}\r\n\r\n/**\r\n * save json as string in the given attribute at the given cell into the given HTMLElement\r\n * @param graph\r\n * @param cell\r\n * @param editData\r\n * @param json\r\n * @param jsonMapReplacer\r\n * @param attribute\r\n */\r\nexport function setEditData(graph:MxTypes.mxGraph, cell:MxTypes.mxCell, editData:HTMLElement, qualifiedName: string, value: string) {\r\n  // Tutorial: https://jgraph.github.io/mxgraph/docs/js-api/files/model/mxCell-js.html\r\n  editData.setAttribute(qualifiedName, value);\r\n  graph.getModel().setValue( cell, editData);\r\n}\r\n\r\nexport function evaluateEditData(graph:MxTypes.mxGraph, cells:MxTypes.mxCell[], defaultJson:any, tagName=\"docElement\", attributeName=\"metadata\") {\r\n\r\n  return cells.map((cell) => {\r\n    const json:Property = getJsonFromCell(graph, cell, defaultJson, tagName, attributeName);\r\n    if (!json) {\r\n      console.log(\"no property for cell \" + cell.getId() + \" available\");\r\n      return -1;\r\n    }\r\n    //TODO: refactor to pass evaluation function as argument\r\n    return evaluateQuestionary(json);\r\n    //TODO: if multiple cells are selected: average trust score (see data source)\r\n  }).reduce((previousValue, currentValue) => previousValue + currentValue) / cells.length;\r\n}\r\n\r\nexport function evaluateQuestionary(json: Property) {\r\n  const scoreProperty = evaluateProperty(json);\r\n  //selected points / max possible points\r\n  const trustScore = 1.0 - (scoreProperty / getMaxSumOfProperty(json));\r\n  return trustScore;\r\n}\r\n\r\n/**\r\n *\r\n * @param graph\r\n * @param cells\r\n * @param isSelectionDependend false if all possible answers should be included.\r\n * @param defaultJson\r\n * @param tagName\r\n * @param attributeName\r\n * @returns the maximum amount of points possible from the current properties\r\n */\r\nexport function editDataGetMaxSumOfPropertyPoints(graph:MxTypes.mxGraph, cells:MxTypes.mxCell[], isSelectionDependend:boolean, defaultJson:any, tagName=\"docElement\", attributeName=\"metadata\") {\r\n\r\n  return cells.map((cell) => {\r\n    const json:Property = getJsonFromCell(graph, cell, defaultJson, tagName, attributeName);\r\n    if (!json) {\r\n      console.log(\"no property for cell \" + cell.getId() + \" available\");\r\n      return -1;\r\n    }\r\n    //TODO: refactor to pass evaluation function as argument\r\n    return getMaxSumOfProperty(json, isSelectionDependend);\r\n\r\n\r\n  }).reduce((previousValue, currentValue) => previousValue + currentValue);\r\n  //TODO: trust score: should be sum of trust scores from nodes / amount of nodes\r\n}\r\n\r\nexport function colorizeDataSources(graph:MxTypes.mxGraph, cells:MxTypes.mxCell[], propertyNameOfDataType=\"metadataType\") {\r\n  const colors = new Map();\r\n  //{metaobject, style}\r\n  colors.set(\"data_source\", {keys: [mx.mxConstants.STYLE_IMAGE_BORDER, mx.mxConstants.STYLE_STROKECOLOR, mx.mxConstants.STYLE_STROKEWIDTH, mx.mxConstants.STYLE_DASHED], values: [\"rgba(255, 0, 0, 1)\", \"rgba(255, 0, 0, 1)\", \"5\", \"1\"]});\r\n  colors.set(\"data_provider\", {keys: [mx.mxConstants.STYLE_IMAGE_BORDER, mx.mxConstants.STYLE_STROKECOLOR, mx.mxConstants.STYLE_DASHED, mx.mxConstants.STYLE_DASH_PATTERN], values: [\"rgba(0, 0, 255, 1)\", \"rgba(0, 0, 255, 1)\", \"1\", \"1 3\"]});\r\n  colors.set(\"data_store\", {keys: [mx.mxConstants.STYLE_IMAGE_BORDER, mx.mxConstants.STYLE_STROKECOLOR, mx.mxConstants.STYLE_STROKEWIDTH, mx.mxConstants.STYLE_DASHED], values: [\"rgba(0, 255, 0, 1)\", \"rgba(0, 255, 0, 1)\", \"5\", \"1\"]});\r\n\r\n\r\n  //TODO: group of >=2 elements-> data source -> avarage trust score per type\r\n  // group selected cells\r\n  //TODO: implement for\r\n\r\n\r\n  //TODO: get propery types of each selected group, single cell\r\n  //TODO: check if property type inside group changes => data_source\r\n  //if not => group with the same property type\r\n  cells.forEach((cell) => {\r\n    // const json:Property = getJsonFromCell(graph, cell, defaultJson, tagName, attributeName);\r\n    const dataSourceCellsType = cell.getAttribute(propertyNameOfDataType);\r\n    let isCellInGroup:boolean = false;\r\n    const parents = graph.getModel().getParents(new Array(cell));\r\n    let children:MxTypes.mxCell[] = [];\r\n    let childrenWithMetadata:MxTypes.mxCell[] = [];\r\n    let currentParent;\r\n    for (let i=0; i< parents.length; i++) {\r\n      // get root cell of graph got multiple functions -> getDefaultParent to get the root. (isRoot doesn't work as expected)\r\n      const isRoot:boolean = parents[i] === graph.getDefaultParent();\r\n      if (!isRoot && graph.getModel().getChildCount(parents[i])>0) {\r\n        currentParent = parents[i];\r\n        isCellInGroup = true;\r\n        children = graph.getModel().getChildCells(parents[i]);\r\n        childrenWithMetadata = children?.filter( (child) => {\r\n          // const metadata = getJsonFromCell(graph, child, defaultJson, tagName, propertyNameOfDataSources);\r\n          child.getAttribute(propertyNameOfDataType);\r\n          return child.getAttribute(propertyNameOfDataType) && child.getAttribute(propertyNameOfDataType) !== undefined && child.getAttribute(propertyNameOfDataType) != null;\r\n        });\r\n        break;\r\n      }\r\n    }\r\n    // metadata should be available\r\n    if (dataSourceCellsType && dataSourceCellsType != null) {\r\n      let setting = colors.get(dataSourceCellsType);\r\n      if (currentParent && isCellInGroup && childrenWithMetadata.length > 1) {\r\n        setting = colors.get(\"data_source\");\r\n        styleEditorActions.setStylesOfCells(graph, new Array(currentParent), setting[\"keys\"], setting[\"values\"]);\r\n        // style children with metadata\r\n        childrenWithMetadata.forEach((child) => colorizeDataSource(graph, child, colors));//TODO: style childrenWithMetadata of data_source corresponding to their metadata\r\n      } else if ((!isCellInGroup || childrenWithMetadata.length === 1) && setting ) {\r\n        styleEditorActions.setStylesOfCells(graph, new Array(cell), setting[\"keys\"], setting[\"values\"]);\r\n      }\r\n    }\r\n  });\r\n  //TODO: trust score: should be sum of trust scores from nodes / amount of nodes\r\n}\r\n\r\nexport function colorizeDataSource(graph:MxTypes.mxGraph, cell:MxTypes.mxCell, colors: Map<string, any>, propertyNameOfDataType=\"metadataType\") {\r\n  //make sure to check groups first\r\n  // const json:Property = getJsonFromCell(graph, cell, defaultJson, tagName, attributeName);\r\n  const dataSourceCellsType = cell.getAttribute(propertyNameOfDataType);\r\n  if (dataSourceCellsType && dataSourceCellsType != null) {\r\n    const setting = colors.get(dataSourceCellsType);\r\n    if (setting) {\r\n      styleEditorActions.setStylesOfCells(graph, new Array(cell), setting[\"keys\"], setting[\"values\"]);\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport function getJsonFromCell(graph: MxTypes.mxGraph, cell: MxTypes.mxCell, defaultJson: any, tagName=\"docElement\", attributeName=\"metadata\") {\r\n  const editData = getEditData(graph, cell, tagName);\r\n  const json = getJsonFromAttribute(editData, defaultJson, tagName, attributeName);\r\n  return json;\r\n}\r\n\r\nexport function selectPropertyType(graph:MxTypes.mxGraph, targetType: string, defaultJson: any, defaultToWholeGraphSelection = true) {\r\n  let selectionCells = graph.getSelectionCells();\r\n  //default to whole graph\r\n  if (defaultToWholeGraphSelection && selectionCells&& selectionCells.length == 0 ) {\r\n    selectAll(graph);\r\n    selectionCells = graph.getSelectionCells();\r\n  }\r\n  // if two cells are grouped, a third as a root cell is introduced. Meta data can be set onto each node\r\n  // --> flatten grouped cells\r\n  const flattendCells = graph.getSelectionCells().flatMap((cell) => getChildren(graph, cell));\r\n  const selectedCells = flattendCells.filter((cell) => {\r\n    const json = getJsonFromCell(graph, cell, defaultJson);\r\n    const isValidQuestionnaire = getMaxSumOfProperty(json) >= 0;\r\n    // either directly property or has a property attribute\r\n    if (!json || !isValidQuestionnaire) return false;\r\n    const cellType = json.type ? json.type : (json.Property ? json[\"Property\"].type : undefined);\r\n    return cellType && (cellType === targetType);\r\n  });\r\n  graph.setSelectionCells(selectedCells);\r\n}\r\n\r\n","// import mxgraph and typscript libraries\r\nimport * as MxTypes from \"mxgraph\"; // <- import types only\r\nimport mx from \"../mx\";\r\nimport {styleConstants} from \"./StyleEditorOptions\";\r\nimport {RGBColor} from \"react-color\";\r\nimport {rgbaColorString, isInputValid, isNumberInRange, rgbaToHexString} from \"./UtilityFunctions\";\r\n\r\n\r\n//* *********************************************** */\r\n//    Style Helper functions\r\n//* *********************************************** */\r\n\r\n/**\r\n * General function for all mxConstants.STYLE_* options. Sets multiple style options at once.\r\n * @param graph\r\n * @param styleConstant\r\n * @param value\r\n */\r\nexport function setStyles(graph:MxTypes.mxGraph, styleConstants:string[], values:(string | null)[] | (number | null)[]| (boolean | null)[] | null[]) {\r\n  graph.getModel().beginUpdate();\r\n\r\n  if (styleConstants && styleConstants.length >0 && styleConstants.length !== values?.length) {\r\n    console.log(\"Potential Style error at \" +styleConstants[0] + \", since size of keys:='\" + styleConstants.length + \"' and size of values='\" + values?.length + \"' differ.\");\r\n  }\r\n  try {\r\n    for (let i = 0; i < styleConstants.length; i++) {\r\n      //If no value is specified, then the respective key is removed from the styles.\r\n      graph.setCellStyles(styleConstants[i], values[i]);\r\n    }\r\n    graph.fireEvent( new mx.mxEventObject(\"styleChanged\", \"keys\", styleConstants, \"values\", values, \"cells\", graph.getSelectionCells()));\r\n  } finally {\r\n    graph.getModel().endUpdate();\r\n  }\r\n}\r\n\r\n/**\r\n * Remove multiple styles\r\n * @param graph\r\n * @param styleConstants\r\n */\r\nexport function removeStyles(graph:MxTypes.mxGraph, styleConstants:string[]) {\r\n  const emptyValues = new Array(styleConstants.length).fill(null);\r\n  setStyles(graph, styleConstants, emptyValues);\r\n}\r\n\r\n/**\r\n * General function for all mxConstants.STYLE_* options. Sets multiple style options at once.\r\n * @param graph\r\n * @param styleConstant\r\n * @param value\r\n */\r\nexport function setStylesOfCells(graph:MxTypes.mxGraph, cells:MxTypes.mxCell[], styleConstants:string[], values:(string | null)[] | (number | null)[]| (boolean | null)[] | null[]) {\r\n  graph.getModel().beginUpdate();\r\n\r\n  if (styleConstants && styleConstants.length >0 && styleConstants.length !== values?.length) {\r\n    console.log(\"Potential Style error at \" +styleConstants[0] + \", since size of keys:='\" + styleConstants.length + \"' and size of values='\" + values?.length + \"' differ.\");\r\n  }\r\n  try {\r\n    for (let i = 0; i < styleConstants.length; i++) {\r\n      graph.setCellStyles(styleConstants[i], values[i], cells);\r\n    }\r\n    graph.fireEvent( new mx.mxEventObject(\"styleChanged\", \"keys\", styleConstants, \"values\", values, \"cells\", cells));\r\n  } finally {\r\n    graph.getModel().endUpdate();\r\n  }\r\n}\r\n\r\nexport function onSelectionChange(sender:any, evt:any) {\r\n  const cells:MxTypes.mxCell = evt.getProperty(\"removed\");\r\n  console.log(\"selection elements onSelectionChange {\");\r\n  console.log(cells);\r\n  for (let i = 0; i < cells.length; i++) {\r\n    console.log(\"Cell[\" + i + \"] {\");\r\n    console.log(cells[i].style);\r\n    console.log(cells[i].geometry);\r\n    console.log(\" } \");\r\n  }\r\n  console.log(\"selection changed onSelectionChange }\");\r\n}\r\n\r\n//* *********************************************** */\r\n//  Font options\r\n//* *********************************************** */\r\n\r\n/**\r\n *\r\n * @param graph\r\n * @param styleConstants  Defines the key for the fontStyle style.\r\n * @param values Values may be any logical AND (sum) of , and . The type of the value is int. Value is \"fontStyle\".\r\n */\r\nexport function toggleFontStyle(graph:MxTypes.mxGraph, styleConstant:string, value:number) {\r\n  if (graph.cellEditor.getEditingCell() !==null) {\r\n    console.log(\"Currently Editing Cell: \");\r\n    console.log(graph.cellEditor.getEditingCell());\r\n    console.log(\"Cancel editing Cell\");\r\n    graph.stopEditing(true);\r\n  }\r\n  graph.getModel().beginUpdate();\r\n  try {\r\n    graph.toggleCellStyleFlags(styleConstant, value);\r\n  } finally {\r\n    graph.getModel().endUpdate();\r\n  }\r\n}\r\n\r\nexport function setFontColor(graph:MxTypes.mxGraph, color:RGBColor|null = null ) {\r\n  const value = color ? rgbaColorString(color) : color;\r\n  setStyles(graph, [mx.mxConstants.STYLE_FONTCOLOR], [value]);\r\n}\r\n\r\n/**\r\n * Aligns the text/label position\r\n * @param graph\r\n * @param direction 'left', 'right' or 'center'\r\n */\r\nexport function setLabelPosition(graph:MxTypes.mxGraph, direction:string) {\r\n  if ( !isInputValid(direction, [mx.mxConstants.ALIGN_LEFT, mx.mxConstants.ALIGN_CENTER, mx.mxConstants.ALIGN_RIGHT])) {\r\n    console.log(\"Not a valid Label position set!\");\r\n    return;\r\n  }\r\n  setStyles(graph, [mx.mxConstants.STYLE_ALIGN], [direction]);\r\n}\r\n\r\n/**\r\n * Rotates Label horizontal\r\n * @param graph\r\n */\r\nexport function toogleLabelRotation(graph:MxTypes.mxGraph, setHorizontal:boolean) {\r\n  setStyles(graph, [mx.mxConstants.STYLE_HORIZONTAL], [setHorizontal ? \"1\" : \"0\"]);\r\n}\r\n\r\n/**\r\n *\r\n * @param graph\r\n * @param toggle\r\n */\r\nexport function toogleWordWrap(graph:MxTypes.mxGraph, toggle:boolean) {\r\n  if (toggle) {\r\n    setStyles(graph, [mx.mxConstants.STYLE_WHITE_SPACE], [\"wrap\"]);\r\n  } else {\r\n    setStyles(graph, [mx.mxConstants.STYLE_WHITE_SPACE], [null]);\r\n  }\r\n}\r\n\r\nexport function hideLabel(graph:MxTypes.mxGraph, toogle:boolean) {\r\n  if (toogle) {\r\n    setStyles(graph, [mx.mxConstants.STYLE_NOLABEL], [1]);\r\n  } else {\r\n    setStyles(graph, [mx.mxConstants.STYLE_WHITE_SPACE], [0]);\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @param graph\r\n * @param fontStyle Defines the key for the fontStyle style. Values may be any logical AND (sum) of , and .\r\n */\r\nexport function setFontStyle(graph:MxTypes.mxGraph, fontStyle:number) {\r\n  setStyles(graph, [mx.mxConstants.STYLE_FONTSTYLE], [fontStyle]);\r\n}\r\n/**\r\n *\r\n * @param graph\r\n * @param fontFamily Defines the key for the fontFamily style. Possible values are names such as Arial; Dialog; Verdana; Times New Roman.\r\n */\r\nexport function setFontFamiliy(graph:MxTypes.mxGraph, fontFamily:string) {\r\n  if (fontFamily) {\r\n    setStyles(graph, [mx.mxConstants.STYLE_FONTFAMILY], [fontFamily]);\r\n  }\r\n}\r\n/**\r\n * Set the Font size of the given selection\r\n * @param graph\r\n * @param size fontSize style (in px).\r\n */\r\nexport function setFontsize(graph:MxTypes.mxGraph, size:number) {\r\n  setStyles(graph, [mx.mxConstants.STYLE_FONTSIZE], [size]);\r\n}\r\n\r\n/**\r\n *\r\n * @param graph\r\n * @param percentage The type of the value is numeric and the possible range is 0-100.  Value is “opacity”.\r\n */\r\nexport function setOpacity(graph:MxTypes.mxGraph, percentage:number) {\r\n  setStyles(graph, [mx.mxConstants.STYLE_OPACITY], [percentage]);\r\n}\r\n\r\n\r\n//* *********************************************** */\r\n//  Color options\r\n//* *********************************************** */\r\n\r\nexport function setIndicatorGradientColor(graph:MxTypes.mxGraph, color:RGBColor|null = null) {\r\n  const value = color ? rgbaColorString(color) : color;\r\n  setStyles(graph, [mx.mxConstants.STYLE_INDICATOR_GRADIENTCOLOR], [value]);\r\n}\r\n\r\nexport function setLabelBackgroundColor(graph:MxTypes.mxGraph, color:RGBColor|null = null) {\r\n  const value = color ? rgbaColorString(color) : color;\r\n  setStyles(graph, [mx.mxConstants.STYLE_LABEL_BACKGROUNDCOLOR], [value]);\r\n}\r\n\r\nexport function setIndicatorStrokeColor(graph:MxTypes.mxGraph, color:RGBColor|null = null) {\r\n  const value = color ? rgbaColorString(color) : color;\r\n  setStyles(graph, [mx.mxConstants.STYLE_INDICATOR_STROKECOLOR], [value]);\r\n}\r\n\r\nexport function setSwimLaneFillColor(graph:MxTypes.mxGraph, color:RGBColor|null = null) {\r\n  const value = color ? rgbaColorString(color) : color;\r\n  setStyles(graph, [mx.mxConstants.STYLE_SWIMLANE_FILLCOLOR], [value]);\r\n}\r\n\r\nexport function setLabelBorderColor(graph:MxTypes.mxGraph, color:RGBColor|null = null) {\r\n  const value = color ? rgbaColorString(color) : color;\r\n  setStyles(graph, [mx.mxConstants.STYLE_LABEL_BORDERCOLOR], [value]);\r\n}\r\n\r\nexport function setImageBorder(graph:MxTypes.mxGraph, color:RGBColor|null = null) {\r\n  const value = color ? rgbaColorString(color) : color;\r\n  setStyles(graph, [mx.mxConstants.STYLE_IMAGE_BORDER], [value]);\r\n}\r\n\r\nexport function setSeparatorColor(graph:MxTypes.mxGraph, color:RGBColor|null = null) {\r\n  const value = color ? rgbaColorString(color) : color;\r\n  setStyles(graph, [mx.mxConstants.STYLE_SEPARATORCOLOR], [value]);\r\n}\r\n// FIXME: results in black cells\r\nexport function setGradientColor(graph:MxTypes.mxGraph, color:RGBColor|null = null) {\r\n  const value = color ? rgbaToHexString(color) : color;\r\n  setStyles(graph, [mx.mxConstants.STYLE_GRADIENTCOLOR], [value]);\r\n}\r\n\r\nexport function setIndicatorColor(graph:MxTypes.mxGraph, color:RGBColor|null = null) {\r\n  const value = color ? rgbaColorString(color) : color;\r\n  setStyles(graph, [mx.mxConstants.STYLE_INDICATOR_COLOR], [value]);\r\n}\r\n\r\nexport function setStrokeColor(graph:MxTypes.mxGraph, color:RGBColor|null = null) {\r\n  const value = color ? rgbaColorString(color) : color;\r\n  setStyles(graph, [mx.mxConstants.STYLE_STROKECOLOR], [value]);\r\n}\r\n\r\nexport function setLaneColor(graph:MxTypes.mxGraph, color:RGBColor|null = null) {\r\n  const value = color ? rgbaColorString(color) : color;\r\n  setStyles(graph, [mx.mxConstants.STYLE_SWIMLANE_FILLCOLOR], [value]);\r\n}\r\n\r\nexport function fill(graph:MxTypes.mxGraph, color:RGBColor|null = null, useHex = false) {\r\n  let value;\r\n  if (color) {\r\n    value = useHex ? rgbaToHexString(color) : rgbaColorString(color);\r\n  } else {\r\n    value = null;\r\n  }\r\n  setStyles(graph, [mx.mxConstants.STYLE_FILLCOLOR], [value]);\r\n\r\n}\r\n\r\n//* *********************************************** */\r\n//  Line and border options\r\n//* *********************************************** */\r\n\r\n/**\r\n *\r\n * @param graph\r\n * @param width Defines the key for the strokeWidth style. The type of the value is numeric and the possible range is any non-negative value larger or equal to 1. The value defines the stroke width in pixels. Note: To hide a stroke use strokeColor none.\r\n */\r\nexport function setStrokeWidth(graph:MxTypes.mxGraph, width:number) {\r\n  setStyles(graph, [mx.mxConstants.STYLE_STROKEWIDTH], [width]);\r\n}\r\n\r\nexport function setStyleShadow(graph:MxTypes.mxGraph, toggle:boolean) {\r\n  setStyles(graph, [mx.mxConstants.STYLE_SHADOW], [toggle? \"1\" : \"0\"]);\r\n}\r\n\r\nexport function setStyleRounded(graph:MxTypes.mxGraph, toggle:boolean) {\r\n  setStyles(graph, [mx.mxConstants.STYLE_ROUNDED], [toggle? \"1\" : \"0\"]);\r\n}\r\n\r\n/**\r\n *\r\n * @param graph\r\n * @param arrowType use getLineTypeOptions() to get all supported settings\r\n */\r\nexport function setLineStart(graph:MxTypes.mxGraph, arrowType:string) {\r\n  setStyles(graph, [mx.mxConstants.STYLE_STARTARROW], [arrowType]);\r\n}\r\n\r\n/**\r\n *\r\n * @param graph\r\n * @param arrowType use getLineTypeOptions() to get all supported settings\r\n */\r\nexport function setLineEnd(graph:MxTypes.mxGraph, arrowType:string) {\r\n  setStyles(graph, [mx.mxConstants.STYLE_ENDARROW], [arrowType]);\r\n}\r\n\r\nexport function reverseLineArrows(graph:MxTypes.mxGraph, arrowTypeStart:string, arrowTypeEnd:string) {\r\n  setLineStart(graph, arrowTypeEnd);\r\n  setLineEnd(graph, arrowTypeStart);\r\n}\r\n/**\r\n * rotates the given source\r\n * @param graph\r\n * @param degree Defines the key for the rotation style. The type of the value is numeric and the possible range is 0-360.\r\n */\r\nexport function setRotation(graph:MxTypes.mxGraph, degree:number) {\r\n  if (!isNumberInRange(degree, 0, 360)) {\r\n    console.error(\"rotation must be set between 0 and 360°!\");\r\n    return;\r\n  }\r\n  setStyles(graph, [mx.mxConstants.STYLE_ROTATION], [degree]);\r\n}\r\n/**\r\n * Sets the style based on a style from {@link styleEditorOptions}\r\n * @param graph\r\n * @param style\r\n */\r\nexport function setStyle(graph:MxTypes.mxGraph, style:styleConstants) {\r\n  setStyles(graph, style.keys, style.values);\r\n}\r\n\r\nexport function setPerimeter(graph:MxTypes.mxGraph, value:number) {\r\n  setStyles(graph, [mx.mxConstants.STYLE_PERIMETER_SPACING], [value]);\r\n}\r\n/**\r\n *\r\n * @param graph\r\n * @param align Specifies the alignment. Possible values are all constants in mxConstants with an ALIGN prefix.\r\n */\r\nexport function setCellAlignment(graph:MxTypes.mxGraph, align:string) {\r\n  graph.alignCells(align, graph.getSelectionCells());\r\n}\r\n\r\n\r\nexport function flipImageHorizontal(graph:MxTypes.mxGraph, isFlipped:boolean) {\r\n  graph.toggleCellStyles(mx.mxConstants.STYLE_FLIPH, isFlipped);\r\n}\r\n\r\nexport function flipImageVertical(graph:MxTypes.mxGraph, isFlipped:boolean) {\r\n  graph.toggleCellStyles(mx.mxConstants.STYLE_FLIPV, isFlipped);\r\n}\r\n\r\n\r\nexport function toggleConstrainPorportions(graph:MxTypes.mxGraph, toggle:boolean) {\r\n  // Variable: STYLE_ASPECT\r\n\r\n  //  Defines the key for the aspect style. Possible values are empty or fixed.\r\n  //  If fixed is used then the aspect ratio of the cell will be maintained\r\n  //  when resizing. Default is empty. Value is \"aspect\".\r\n  if (toggle) {\r\n    setStyles(graph, [mx.mxConstants.STYLE_ASPECT], [\"fixed\"]);\r\n  } else {\r\n    setStyles(graph, [mx.mxConstants.STYLE_ASPECT], [\"empty\"]);\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * Function: distributeCells\r\n *\r\n * Distribuets the centers of the given cells equally along the available\r\n * horizontal or vertical space.\r\n *\r\n * Parameters:\r\n *\r\n * horizontal - Boolean that specifies the direction of the distribution.\r\n * cells - Optional array of <mxCells> to be distributed. Edges are ignored.\r\n *\r\n * src copied from: Graph.js from grapheditor example. Added graph instead of this content\r\n */\r\nexport function distributeCells(graph:MxTypes.mxGraph, horizontal:boolean, cells:MxTypes.mxCell[]) {\r\n  if (cells == null) {\r\n    cells = graph.getSelectionCells();\r\n  }\r\n\r\n  if (cells != null && cells.length > 1) {\r\n    const vertices = [];\r\n    let max = null;\r\n    let min = null;\r\n\r\n    for (let i = 0; i < cells.length; i++) {\r\n      if (graph.getModel().isVertex(cells[i])) {\r\n        const state = graph.view.getState(cells[i]);\r\n\r\n        if (state != null) {\r\n          const tmp = (horizontal) ? state.getCenterX() : state.getCenterY();\r\n          max = (max != null) ? Math.max(max, tmp) : tmp;\r\n          min = (min != null) ? Math.min(min, tmp) : tmp;\r\n\r\n          vertices.push(state);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (vertices.length > 2) {\r\n      vertices.sort(function(a, b) {\r\n        return (horizontal) ? a.x - b.x : a.y - b.y;\r\n      });\r\n\r\n      const t = graph.view.translate;\r\n      const s = graph.view.scale;\r\n      // @ts-ignore\r\n      min = min / s - ((horizontal) ? t.x : t.y);\r\n      // @ts-ignore\r\n      max = max / s - ((horizontal) ? t.x : t.y);\r\n\r\n      graph.getModel().beginUpdate();\r\n      try {\r\n        const dt = (max - min) / (vertices.length - 1);\r\n        let t0 = min;\r\n\r\n        for (let i = 1; i < vertices.length - 1; i++) {\r\n          const pstate = graph.view.getState(graph.model.getParent(vertices[i].cell));\r\n          let geo = graph.getCellGeometry(vertices[i].cell);\r\n          t0 += dt;\r\n\r\n          if (geo != null && pstate != null) {\r\n            geo = geo.clone();\r\n\r\n            if (horizontal) {\r\n              geo.x = Math.round(t0 - geo.width / 2) - pstate.origin.x;\r\n            } else {\r\n              geo.y = Math.round(t0 - geo.height / 2) - pstate.origin.y;\r\n            }\r\n\r\n            graph.getModel().setGeometry(vertices[i].cell, geo);\r\n          }\r\n        }\r\n      } finally {\r\n        graph.getModel().endUpdate();\r\n      }\r\n    }\r\n  }\r\n\r\n  return cells;\r\n}\r\n","// import mxgraph and typscript libraries\r\nimport * as MxTypes from \"mxgraph\"; // <- import types only\r\nimport mx from \"../mx\";\r\nimport mxCodec from \"./MxCodecFrameworkFix\"; // <- fixes global required only for decoding (window[] call)\r\n\r\nexport function encode(obj:any) {\r\n  //encode current style\r\n  const encoder = new mxCodec();\r\n  const currentStyleSheetXml = encoder.encode(obj);\r\n  const currentStyleSheetXmlString = mx.mxUtils.getPrettyXml(currentStyleSheetXml);\r\n  console.log(\"encoded:\", obj, \"\\nto xml\", currentStyleSheetXmlString);\r\n  return currentStyleSheetXmlString;\r\n}\r\n\r\n/**\r\n * Requires begin and endUpdate environment\r\n * @param graph\r\n * @param xmlString\r\n * @returns The function returns the passed in object or the new instance if no object was given.\r\n */\r\nexport function decode(xmlString:string, into?: any) {\r\n  const doc = mx.mxUtils.parseXml(xmlString);\r\n  const codec = new mxCodec(doc);\r\n  if (into) {\r\n    return codec.decode(doc.documentElement, into);\r\n  } else {\r\n    return codec.decode(doc.documentElement);\r\n  }\r\n}\r\n\r\nexport function saveGraph(graph:MxTypes.mxGraph) {\r\n  //encoded current stylesheet\r\n  return encode(graph.getModel());\r\n}\r\n\r\n\r\nexport function printDivGraph(id:string, graph:MxTypes.mxGraph, filename?:string) {\r\n  // get page format default is A4\r\n  let pageFormat = graph.pageFormat || mx.mxConstants.PAGE_FORMAT_A4_PORTRAIT;\r\n\r\n  //scaling extracted from Editor.js\r\n  let printScale = 1;\r\n\r\n  // Workaround to match available paper size in actual print output\r\n  printScale *= 0.75;\r\n  // Applies print scale\r\n  pageFormat = mx.mxRectangle.fromRectangle(pageFormat);\r\n  pageFormat.width = Math.ceil(pageFormat.width * printScale);\r\n  pageFormat.height = Math.ceil(pageFormat.height * printScale);\r\n  //TODO: offer style options getPageFormats()\r\n  const divContents = document.getElementById(id)?.innerHTML;\r\n  if (divContents) {\r\n    const a:Window = window.open(\"\", \"\", \"height=\"+pageFormat.height+\", width=\"+pageFormat.width+\"\\\"\")!;\r\n    const windowTitle = filename ? filename : \"Print Preview\";\r\n    a.document.write(\"<html>\");\r\n    a.document.write(\"<head><title>\" + windowTitle+ \"</title></head>\");\r\n    a.document.write(\"<body>\");\r\n    a.document.write(divContents);\r\n    a.document.write(\"</body></html>\");\r\n    a.document.close();\r\n    a.print();\r\n    a.close();\r\n  } else {\r\n    alert(\"no content available to be printed\");\r\n  }\r\n}\r\n","export function getHelpInformation() {\r\n  return <div style={{textAlign: \"left\"}}>\r\n    <h3>Introduction</h3>\r\n    This Software can be used to assess the quality of data sources and model basic diagrams.\r\n    <br/>\r\n    <ul>\r\n      <li>Drag resources from the left panel with your left mouse button to add them to your diagram.</li>\r\n      <li>Edit the node texts by double clicking.</li>\r\n      <li>Move the view inside the diagram window by holding the right mouse button.</li>\r\n      <li>Edges can be drawn by holding your left mouse button in the center of a node.</li>\r\n      <li>Edit the diagram with the corresponding options in the tabs on the right side.</li>\r\n      <li>Add metadata such as questionnaires to nodes by clicking the Metadata tab.</li>\r\n    </ul>\r\n\r\n    <h3>Mobile Usage</h3>\r\n    {// FIXME: mxgraph mobile support broke => fix graph view touch events\r\n      // TODO: splitters are not responsive => use sidebars left and right for mobile view, or small screens\r\n    }\r\n    Not yet targeted for mobile devices.\r\n    <ul>\r\n      <li>Drag nodes: begin dragging and click into graph view</li>\r\n      <li>Mark multiple nodes: drag rectangle window over graph view</li>\r\n    </ul>\r\n  </div>;\r\n}\r\n\r\nexport function getKeyboardShortcutsInformation() {\r\n  return <div style={{textAlign: \"left\"}}>\r\n    {/* {TODO: Setup keys by json config file} */}\r\n    {/* {TODO: Setup update and link information from configuration file} */}\r\n    <h3>Keyboard Shortcuts</h3>\r\n    <ul>\r\n\r\n      <li>Select all: CTRL + a</li>\r\n      <li>Select all vertices: CTRL + SHIFT + v</li>\r\n      <li>Select all edges: CTRL + SHIFT + e</li>\r\n      <li>Extract: CTRL + x</li>\r\n      <li>Copy: CTRL + c</li>\r\n      <li>Paste: CTRL + v</li>\r\n      <li>Duplicate: CTRL + d</li>\r\n      <li>Group: CTRL + g</li>\r\n      <li>Ungroup: CTRL + SHIFT + u</li>\r\n      <li>Delete: Delete or Backspace</li>\r\n      <li>Selection to front: CTRL + SHIFT + f</li>\r\n      <li>Selection to back: CTRL + SHIFT + b</li>\r\n\r\n      <li>Save: CTRL + s</li>\r\n      <li>Save as: CTRL + SHIFT + s</li>\r\n      <li>Open: CTRL + o</li>\r\n      <li>New file: ALT + n</li>\r\n\r\n      <li>Undo: CTRL + z</li>\r\n      <li>Redo: CTRL + y</li>\r\n      <li>Help: F1</li>\r\n      <li>Rename label of selection: F2</li>\r\n    </ul>\r\n  </div>;\r\n}\r\n\r\nexport function getAboutInformation() {\r\n  return <div style={{textAlign: \"left\"}}>\r\n    Created with:\r\n    <ul>\r\n      <li><a href=\"https://github.com/jgraph/mxgraph\">Mxgraph</a></li>\r\n      <li><a href=\"https://www.primefaces.org/primereact/\">PRIMEREACT</a></li>\r\n      <li><a href=\"https://icons.getbootstrap.com/\">Bootstrap icons</a></li>\r\n    </ul>\r\n  </div>;\r\n}\r\n","import \"primereact/resources/themes/saga-blue/theme.css\";\r\nimport \"primereact/resources/primereact.css\";\r\nimport \"primeflex/primeflex.css\";\r\n\r\nimport \"./MenubarToolbar.css\";\r\n\r\nimport {Component} from \"react\";\r\nimport {Menubar, MenubarStartTemplate} from \"primereact/menubar\";\r\n\r\n// https://www.primefaces.org/primereact/showcase/#/icons\r\nimport {PrimeIcons} from \"primereact/api\";\r\n\r\nimport * as editorActions from \"../Actions\";\r\nimport * as graphFileUtils from \"../Utils/GraphFileUtils\";\r\nimport {mxGraph, mxUndoManager} from \"mxgraph\";\r\n\r\nimport logo from \"../images/logo.png\";\r\n\r\n// a tutorial https://www.primefaces.org/primereact/showcase/#/menumodel\r\n\r\ninterface MenubarToolbarProps {\r\n  DEBUG:boolean;\r\n  graph: mxGraph;\r\n  undoMgr: mxUndoManager;\r\n  filename:string;\r\n  handleFilenameChange: (filename: string) => void;\r\n  showHelpModal: ()=> void;\r\n  showAboutModal: ()=> void;\r\n  showKeyboardModal: ()=> void;\r\n  showSaveAsModal: ()=> void;\r\n  showEditStyleModal: ()=> void;\r\n}\r\n\r\ninterface MenubarToolbarState {\r\n  items:any[];\r\n  start:MenubarStartTemplate;\r\n  // end:MenubarEndTemplate;\r\n  displayModal: boolean;\r\n  displayHelp: boolean;\r\n  displaySaveAs: boolean;\r\n}\r\n\r\nexport default class MenubarToolbar extends Component<MenubarToolbarProps, MenubarToolbarState> {\r\n  private readonly menuItems = [\r\n    {\r\n      label: \"File\",\r\n      // icon: \"pi pi-fw pi-file\",\r\n      items: [\r\n        {\r\n          label: \"New\", icon: PrimeIcons.PLUS, command: () => {\r\n            //TODO: create popup warning that everything will be deleted\r\n            editorActions.deleteAll(this.props.graph);\r\n          },\r\n        },\r\n        {\r\n          label: \"New Window\", icon: PrimeIcons.PLUS, command: () => {\r\n            window.open(window.location.href, \"_blank\");\r\n          },\r\n        },\r\n        {\r\n          label: \"Open\", icon: PrimeIcons.FILE, command: (e: any) => {\r\n            //TODO: use react version: https://www.cluemediator.com/open-an-input-file-on-a-button-click-in-react\r\n            editorActions.openFile(this.props.graph, this.props.handleFilenameChange).click();\r\n          },\r\n        },\r\n        {separator: true},\r\n        {\r\n          label: \"Save\", icon: PrimeIcons.SAVE, command: () => {\r\n            const filename = this.props.filename ? this.props.filename : \"untitled.graphted\";\r\n            editorActions.saveFile(editorActions.saveXml(this.props.graph), filename);\r\n          },\r\n        },\r\n        {\r\n          label: \"Save as\", icon: PrimeIcons.SAVE, command: () => {\r\n            // save as location is handled by browser saving settings\r\n            this.props.showSaveAsModal();\r\n          },\r\n        },\r\n        {separator: true},\r\n        {\r\n          label: \"Import Stencil\", icon: PrimeIcons.DOWNLOAD, command: () => {\r\n            editorActions.openStencilFile().click();\r\n          },\r\n        },\r\n        {separator: true},\r\n        // {label: \"Page Setup\", icon: PrimeIcons.FILE},\r\n        {\r\n          label: \"Print\", icon: PrimeIcons.PRINT, command: () => {\r\n            const filename = this.props.filename ? this.props.filename : \"untitled.graphted\";\r\n            graphFileUtils.printDivGraph(\"divGraph\", this.props.graph, filename);\r\n          },\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      label: \"Edit\",\r\n      // icon: \"pi pi-fw pi-pencil\",\r\n      items: [\r\n        {\r\n          label: \"Undo\", icon: PrimeIcons.REPLAY, command: () => {\r\n            editorActions.undo(this.props.undoMgr);\r\n          },\r\n        },\r\n        {\r\n          label: \"Redo\", icon: PrimeIcons.REFRESH, command: () => {\r\n            editorActions.redo(this.props.undoMgr);\r\n          },\r\n        },\r\n        {separator: true},\r\n        {\r\n          label: \"Cut\", icon: \"bi bi-scissors\", command: () => {\r\n            editorActions.cut(this.props.graph);\r\n          },\r\n        },\r\n        {\r\n          label: \"Copy\", icon: PrimeIcons.COPY, command: () => {\r\n            editorActions.copy(this.props.graph);\r\n          },\r\n        },\r\n        {\r\n          label: \"Paste\", icon: PrimeIcons.COPY, command: () => {\r\n            editorActions.paste(this.props.graph);\r\n          },\r\n        },\r\n        {\r\n          label: \"Delete\", icon: PrimeIcons.TIMES, command: () => {\r\n            editorActions.deleteSelection(this.props.graph);\r\n          },\r\n        },\r\n        {separator: true},\r\n        {\r\n          label: \"Duplicate\", icon: PrimeIcons.CLONE, command: () => {\r\n            editorActions.duplicate(this.props.graph);\r\n          },\r\n        },\r\n        {\r\n          label: \"Edit Style\", icon: \"bi bi-easel\", command: () => {\r\n            this.props.showEditStyleModal();\r\n            //code in tabView\r\n            //TODO: move up displayResponsive variable and use props for menu and primetab\r\n          },\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      label: \"Selection\",\r\n      items: [\r\n        {\r\n          label: \"Select Vertices\", icon: \"bi bi-bounding-box-circles\", command: () => {\r\n            editorActions.selectAllVertices(this.props.graph);\r\n          },\r\n        },\r\n        {\r\n          label: \"Select Edges\", icon: \"bi bi-bezier2\", command: () => {\r\n            editorActions.selectAllEdges(this.props.graph);\r\n          },\r\n        },\r\n        {\r\n          label: \"Select All\", icon: \"bi bi-hand-index-fill\", command: () => {\r\n            editorActions.selectAll(this.props.graph);\r\n          },\r\n        },\r\n        {\r\n          label: \"Select None\", icon: \"bi bi-hand-index\", command: () => {\r\n            editorActions.clearSelection(this.props.graph);\r\n          },\r\n        },\r\n        {separator: true},\r\n        {\r\n          label: \"Select data source\", icon: \"bi bi-file-earmark-bar-graph\",\r\n          items: [\r\n            {\r\n              label: \"Data Store\", icon: \"bi bi-server\", command: () => {\r\n                editorActions.selectAllDataSources(this.props.graph, \"data_store\");\r\n              },\r\n            },\r\n            {\r\n              label: \"Data Provider\", icon: \"bi bi-person-badge\", command: () => {\r\n                editorActions.selectAllDataSources(this.props.graph, \"data_provider\");\r\n              },\r\n            },\r\n            {\r\n              label: \"Data Sources\", icon: \"bi bi-file-earmark-bar-graph\", command: () => {\r\n                editorActions.selectAllDataSources(this.props.graph, \"data_sources\");\r\n              },\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      label: \"View\",\r\n      items: [\r\n        {\r\n          label: \"Reset View\", icon: PrimeIcons.SEARCH, command: () => {\r\n            editorActions.zoomReset(this.props.graph);\r\n          },\r\n        },\r\n        {\r\n          label: \"Zoom In\", icon: PrimeIcons.SEARCH_PLUS, command: () => {\r\n            editorActions.zoomIn(this.props.graph);\r\n          },\r\n        },\r\n        {\r\n          label: \"Zoom Out\", icon: PrimeIcons.SEARCH_MINUS, command: () => {\r\n            editorActions.zoomOut(this.props.graph);\r\n          },\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      label: \"Arrange\",\r\n      items: [\r\n        {\r\n          label: \"To Front\", icon: \"bi bi-front\", command: () => {\r\n            editorActions.selectionToFront(this.props.graph);\r\n          },\r\n        },\r\n        {\r\n          label: \"To Back\", icon: \"bi bi-back\", command: () => {\r\n            editorActions.selectionToBack(this.props.graph);\r\n          },\r\n        },\r\n        {separator: true},\r\n        {\r\n          label: \"Group\", icon: \"bi bi-union\", command: () => {\r\n            editorActions.group(this.props.graph);\r\n          },\r\n        },\r\n        {\r\n          label: \"Ungroup\", icon: \"bi bi-subtract\", command: () => {\r\n            editorActions.ungroup(this.props.graph);\r\n          },\r\n        },\r\n        {\r\n          label: \"Remove from Group\", icon: \"bi bi-exclude\", command: () => {\r\n            editorActions.ungroup(this.props.graph);\r\n          },\r\n        },\r\n        {separator: true},\r\n        {\r\n          label: \"Add Waypoint\", icon: \"bi bi-plus-circle\", command: () => {\r\n            editorActions.addWaypoint(this.props.graph);\r\n          },\r\n        },\r\n        {\r\n          label: \"Clear Waypoints\", icon: \"bi bi-x-circle\", command: () => {\r\n            editorActions.clearAllWaypoints(this.props.graph);\r\n          },\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      label: \"Help\",\r\n      items: [\r\n        {\r\n          label: \"Help\", icon: PrimeIcons.QUESTION_CIRCLE, command: () => {\r\n            // this.setState({displayHelp: true});\r\n            this.props.showHelpModal();\r\n          },\r\n        },\r\n        {\r\n          label: \"Shortcuts\", icon: PrimeIcons.INFO_CIRCLE, command: () => {\r\n            this.props.showKeyboardModal();\r\n          },\r\n        },\r\n        {\r\n          label: \"About\", icon: PrimeIcons.INFO_CIRCLE, command: () => {\r\n            this.props.showAboutModal();\r\n          },\r\n        },\r\n      ],\r\n    },\r\n  ];\r\n\r\n  constructor(props:MenubarToolbarProps) {\r\n    super(props);\r\n    this.state = {\r\n      items: this.menuItems,\r\n      start: <img alt=\"logo\" src={logo} onError={(e) => {\r\n        const target = e.target as any; if (target) target.src=\"https://www.primefaces.org/wp-content/uploads/2020/05/placeholder.png\";\r\n      }} height=\"40\" className=\"p-mr-2\"></img>,\r\n      // end: <InputText placeholder=\"Search\" type=\"text\" />,\r\n      displayModal: false,\r\n      displayHelp: false,\r\n      displaySaveAs: false,\r\n    };\r\n  }\r\n\r\n  render() {\r\n    console.log(\"render menubar\", this.props.graph);\r\n    return (\r\n      <div>\r\n        <div className=\"card navbar\">\r\n          <Menubar style={{zIndex: \"10\"}} model={this.state.items} start={this.state.start}/>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export default \"data:image/png;base64,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\"","import \"primeicons/primeicons.css\";\r\nimport \"primereact/resources/themes/saga-blue/theme.css\";\r\nimport \"primereact/resources/primereact.css\";\r\nimport \"primeflex/primeflex.css\";\r\n\r\nimport {Component} from \"react\";\r\nimport {Accordion} from \"primereact/accordion\";\r\nimport {InputText} from \"primereact/inputtext\";\r\n\r\nimport * as fileUtils from \"./FileUtils\";\r\nimport {mxGraph} from \"mxgraph\";\r\n\r\ninterface PrimeAccordionProps {\r\n    DEBUG: boolean;\r\n    graph: mxGraph;\r\n    filename: string;\r\n    handleFilenameChange: (filename: string) => void;\r\n  }\r\n\r\n  interface PrimeAccordionState {\r\n    activeIndex: number[]|null;\r\n\r\n  }\r\n\r\nexport default class PrimeAccordion extends Component<PrimeAccordionProps, PrimeAccordionState> {\r\n  constructor(props:PrimeAccordionProps) {\r\n    super(props);\r\n    this.state = {\r\n      activeIndex: [0],\r\n    };\r\n  }\r\n\r\n\r\n  render() {\r\n    console.log(\"render nodes sidepanel\", this.props.graph);\r\n    return (\r\n      <>\r\n          Save As: <InputText value={this.props.filename} type=\"text\" onChange={(e) => {\r\n          this.props.handleFilenameChange(e.target.value);\r\n        }}/>\r\n        <Accordion className=\"accordion-custom\" multiple activeIndex={this.state.activeIndex}>\r\n          {// Create tabs and images based on folders\r\n            fileUtils.loadImageFolderToNode(this.props.graph, true)\r\n          }\r\n          {//TODO: Create tabs and images based on stencil files\r\n            fileUtils.loadStencilFolderToNode(this.props.graph, true)\r\n          }\r\n        </Accordion>\r\n      </>\r\n    );\r\n  }\r\n}\r\n","// import mxgraph and typscript libraries\r\nimport mx from \"../mx\";\r\n\r\n\r\nexport interface styleConstants {\r\n    keys: string[];\r\n    values: (string | null)[] | (number | null)[] | (boolean | null)[] | null[];\r\n}\r\n\r\nexport interface styleFontConstants {\r\n    key: string;\r\n    value: number;\r\n}\r\n\r\nexport interface simpleStyleEditorOption {\r\n  name: string;\r\n  code: string;\r\n  value?: number;\r\n}\r\n\r\nexport interface styleEditorOption {\r\n    name: string;\r\n    style: styleConstants;\r\n}\r\n\r\nexport function getSubOptions(allOptions:any, startIndex:number, size:number = allOptions.length) {\r\n  const subOptions = [];\r\n  for (let i=startIndex; (i< allOptions.length) && (i< size); i++) {\r\n    subOptions.push(allOptions[i]);\r\n  }\r\n  return subOptions;\r\n}\r\n\r\n/**\r\n * Given the current Styles options of a cell returns the corresponding option name\r\n * //TODO: refactor seems way to complicated\r\n * //FIXME: default.xml options seem to be favored over actual set options\r\n * @param optionCanditates\r\n * @param style\r\n * @returns option\r\n */\r\nexport function getOptionKeyFromStyle(optionCanditates:styleEditorOption[], styleMap:Map<string, any>) : styleEditorOption[] {\r\n  if (styleMap.size === 0 ) return [];\r\n  const result:styleEditorOption[] = [];\r\n  // style exists in some options\r\n  const possibleOptionCanditate:Set<styleEditorOption> = new Set();\r\n  const possibleOptionStyles:Map<string, any> = new Map();\r\n  for (const option of optionCanditates) {\r\n    for (const styleKey of option.style.keys) {\r\n      if (styleMap.has(styleKey)) {\r\n        // only add options without null values\r\n        possibleOptionCanditate.add(option);\r\n        possibleOptionStyles.set(styleKey, styleMap.get(styleKey));\r\n      }\r\n    }\r\n  }\r\n  // each canditate check full style array in detail\r\n  for (const option of possibleOptionCanditate) {\r\n    console.log(option);\r\n    // null values get filtered out of style attribute when applied\r\n    let optionStyleValues:any[] = option.style.values;\r\n    optionStyleValues = optionStyleValues.filter((val) => val !== null && val !== undefined);\r\n    let isFullyIncluded = optionStyleValues.length === possibleOptionStyles.size;\r\n    if (isFullyIncluded) {\r\n      for (let i = 0; i< option.style.values.length; i++) {\r\n        const styleKey = option.style.keys[i];\r\n        const styleValue = option.style.values[i];\r\n        // null values get filtered out of style attribute when applied\r\n        if (styleValue === null || styleValue === undefined) continue;\r\n\r\n        const checkedValue = possibleOptionStyles.get(styleKey);\r\n        if (!possibleOptionStyles.has(styleKey) || !checkedValue || (styleValue !== checkedValue)) {\r\n          isFullyIncluded = false;\r\n        }\r\n      }\r\n      if (isFullyIncluded) {\r\n        result.push(option);\r\n      }\r\n    }\r\n  }\r\n\r\n  //TODO: extend for load default styles and stencils\r\n  return result;\r\n}\r\n\r\nexport function addOptionToMap( option:styleEditorOption, inputMap:Map<string, any>) {\r\n  if (option === undefined || option === null) return;\r\n  for (let i = 0; i < option.style.keys.length; i++) {\r\n    const key =option.style.keys[i];\r\n    const val = option.style.values[i];\r\n    if (val) {\r\n      inputMap.set(key, val);\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport function getConstantsPerOption() {\r\n  // console.log(mx.mxConstants);\r\n  //TODO: add all possible Constants to a grouped category since some belong to one option\r\n  const possibleConstants = Object.values(mx.mxConstants);\r\n  console.log(possibleConstants);\r\n\r\n  for (const key in mx.mxConstants) {\r\n    if (mx.mxConstants.hasOwnProperty(key)) {\r\n      //@ts-ignore\r\n      const value = mx.mxConstants[key];\r\n      console.log(`${key}: ${value}`);\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport function getBasicShapes() {\r\n  const basicShapes = new Map();\r\n  for (const key in mx.mxConstants) {\r\n    if (mx.mxConstants.hasOwnProperty(key)) {\r\n      //@ts-ignore\r\n      const value = mx.mxConstants[key];\r\n      if (key.startsWith(\"SHAPE_\") ) {\r\n        basicShapes.set(key, value);\r\n      }\r\n    }\r\n  }\r\n  return basicShapes;\r\n}\r\n\r\n//*************************************************/\r\n//  Options presets\r\n//*************************************************/\r\n\r\nexport function getFontFamiliyOptions() {\r\n  return [\r\n    {name: \"Arial\", code: \"Arial\"},\r\n    {name: \"Dialog\", code: \"Dialog\"},\r\n    {name: \"Verdana\", code: \"Verdana\"},\r\n    {name: \"Times New Roman\", code: \"Times\"},\r\n    {name: \"Courier\", code: \"Courier\"},\r\n    {name: \"Georgia\", code: \"Georgia\"},\r\n    {name: \"Palatino\", code: \"Palatino\"},\r\n    {name: \"Helvetica\", code: \"Helvetica\"},\r\n    {name: \"Impact\", code: \"Impact\"},\r\n    {name: \"Tahoma\", code: \"Tahoma\"},\r\n    {name: \"Trebuchet MS\", code: \"\\\"trebuchet MS\\\"\"},\r\n    {name: \"Gill Sans\", code: \"\\\"Gill Sans\\\"\"},\r\n    {name: \"Lucida Sans\", code: \"\\\"lucida sans unicode\\\"\"},\r\n  ];\r\n}\r\n\r\n\r\nexport function getLineTypeOptions() {\r\n  return [\r\n    // for all types of cells\r\n    {name: \"Solid\", style: {keys: [mx.mxConstants.STYLE_DASHED], values: [\"0\"]}},\r\n    {name: \"Dashed\", style: {keys: [mx.mxConstants.STYLE_DASHED, mx.mxConstants.STYLE_DASH_PATTERN], values: [\"1\", null]}},\r\n    {name: \"Dotted\", style: {keys: [mx.mxConstants.STYLE_DASHED, mx.mxConstants.STYLE_DASH_PATTERN], values: [\"1\", \"1 3\"]}},\r\n    // available only for edges\r\n    {name: \"Sharp\", style: {keys: [mx.mxConstants.STYLE_ROUNDED, mx.mxConstants.STYLE_CURVED], values: [\"0\", \"0\"]}},\r\n    {name: \"Rounded\", style: {keys: [mx.mxConstants.STYLE_ROUNDED, mx.mxConstants.STYLE_CURVED], values: [\"1\", \"0\"]}},\r\n    {name: \"Curved\", style: {keys: [mx.mxConstants.STYLE_ROUNDED, mx.mxConstants.STYLE_CURVED], values: [\"0\", \"1\"]}},\r\n  ];\r\n}\r\n\r\nexport function getGeneralLineTypeOptions() {\r\n  return getSubOptions(getLineTypeOptions(), 0, 3);\r\n}\r\n/**\r\n * Extracted from Format.js of grapheditor example\r\n * @returns Options for text alignment inside cells\r\n */\r\nexport function getStyleLabelPositionOptions() {\r\n  return [\r\n    {name: \"center\", style: {keys: [mx.mxConstants.STYLE_LABEL_POSITION, mx.mxConstants.STYLE_VERTICAL_LABEL_POSITION], values: [mx.mxConstants.ALIGN_CENTER, mx.mxConstants.ALIGN_MIDDLE]}}, // -> default\r\n    {name: \"top\", style: {keys: [mx.mxConstants.STYLE_LABEL_POSITION, mx.mxConstants.STYLE_VERTICAL_LABEL_POSITION], values: [mx.mxConstants.ALIGN_CENTER, mx.mxConstants.ALIGN_TOP]}},\r\n    {name: \"topLeft\", style: {keys: [mx.mxConstants.STYLE_LABEL_POSITION, mx.mxConstants.STYLE_VERTICAL_LABEL_POSITION], values: [mx.mxConstants.ALIGN_LEFT, mx.mxConstants.ALIGN_TOP]}},\r\n    {name: \"topRight\", style: {keys: [mx.mxConstants.STYLE_LABEL_POSITION, mx.mxConstants.STYLE_VERTICAL_LABEL_POSITION], values: [mx.mxConstants.ALIGN_RIGHT, mx.mxConstants.ALIGN_TOP]}},\r\n    {name: \"bottom\", style: {keys: [mx.mxConstants.STYLE_LABEL_POSITION, mx.mxConstants.STYLE_VERTICAL_LABEL_POSITION], values: [mx.mxConstants.ALIGN_CENTER, mx.mxConstants.ALIGN_BOTTOM]}},\r\n    {name: \"bottomLeft\", style: {keys: [mx.mxConstants.STYLE_LABEL_POSITION, mx.mxConstants.STYLE_VERTICAL_LABEL_POSITION], values: [mx.mxConstants.ALIGN_LEFT, mx.mxConstants.ALIGN_BOTTOM]}},\r\n    {name: \"bottomRight\", style: {keys: [mx.mxConstants.STYLE_LABEL_POSITION, mx.mxConstants.STYLE_VERTICAL_LABEL_POSITION], values: [mx.mxConstants.ALIGN_RIGHT, mx.mxConstants.ALIGN_BOTTOM]}},\r\n    {name: \"left\", style: {keys: [mx.mxConstants.STYLE_LABEL_POSITION, mx.mxConstants.STYLE_VERTICAL_LABEL_POSITION], values: [mx.mxConstants.ALIGN_LEFT, mx.mxConstants.ALIGN_MIDDLE]}},\r\n    {name: \"right\", style: {keys: [mx.mxConstants.STYLE_LABEL_POSITION, mx.mxConstants.STYLE_VERTICAL_LABEL_POSITION], values: [mx.mxConstants.ALIGN_RIGHT, mx.mxConstants.ALIGN_MIDDLE]}},\r\n  ];\r\n}\r\n\r\nexport function getAdvancedLabelPositionOptions() {\r\n  return [\r\n    {name: \"Left\", style: {keys: [mx.mxConstants.STYLE_ALIGN], values: [mx.mxConstants.ALIGN_LEFT, mx.mxConstants.ALIGN_TOP]}},\r\n    {name: \"Center\", style: {keys: [mx.mxConstants.STYLE_ALIGN], values: [mx.mxConstants.ALIGN_CENTER, mx.mxConstants.ALIGN_TOP]}},\r\n    {name: \"Right\", style: {keys: [mx.mxConstants.STYLE_ALIGN], values: [mx.mxConstants.ALIGN_RIGHT, mx.mxConstants.ALIGN_TOP]}},\r\n    {name: \"Top\", style: {keys: [mx.mxConstants.STYLE_ALIGN, mx.mxConstants.STYLE_VERTICAL_ALIGN], values: [mx.mxConstants.ALIGN_CENTER, mx.mxConstants.ALIGN_TOP]}},\r\n    {name: \"Top Left\", style: {keys: [mx.mxConstants.STYLE_ALIGN, mx.mxConstants.STYLE_VERTICAL_ALIGN], values: [mx.mxConstants.ALIGN_LEFT, mx.mxConstants.ALIGN_TOP]}},\r\n    {name: \"Top Right\", style: {keys: [mx.mxConstants.STYLE_ALIGN, mx.mxConstants.STYLE_VERTICAL_ALIGN], values: [mx.mxConstants.ALIGN_RIGHT, mx.mxConstants.ALIGN_TOP]}},\r\n    {name: \"Bottom\", style: {keys: [mx.mxConstants.STYLE_ALIGN, mx.mxConstants.STYLE_VERTICAL_ALIGN], values: [mx.mxConstants.ALIGN_CENTER, mx.mxConstants.ALIGN_BOTTOM]}},\r\n    {name: \"Bottom Left\", style: {keys: [mx.mxConstants.STYLE_ALIGN, mx.mxConstants.STYLE_VERTICAL_ALIGN], values: [mx.mxConstants.ALIGN_LEFT, mx.mxConstants.ALIGN_BOTTOM]}},\r\n    {name: \"Bottom Right\", style: {keys: [mx.mxConstants.STYLE_ALIGN, mx.mxConstants.STYLE_VERTICAL_ALIGN], values: [mx.mxConstants.ALIGN_RIGHT, mx.mxConstants.ALIGN_BOTTOM]}},\r\n  ];\r\n}\r\n\r\nexport function getLabelWritingDirectionOptions() {\r\n  return [\r\n    // {name: \"Automatic\", style: {keys: [mx.mxConstants.STYLE_TEXT_DIRECTION], values: [mx.mxConstants.TEXT_DIRECTION_AUTO, mx.mxConstants.ALIGN_TOP]}},\r\n    // {name: \"Right to Left\", style: {keys: [mx.mxConstants.STYLE_TEXT_DIRECTION], values: [mx.mxConstants.TEXT_DIRECTION_RTL, mx.mxConstants.ALIGN_TOP]}},\r\n    // {name: \"Left to Right\", style: {keys: [mx.mxConstants.STYLE_TEXT_DIRECTION], values: [mx.mxConstants.TEXT_DIRECTION_LTR, mx.mxConstants.ALIGN_TOP]}},\r\n\r\n    {name: \"Automatic\", style: {keys: [mx.mxConstants.STYLE_TEXT_DIRECTION], values: [mx.mxConstants.TEXT_DIRECTION_AUTO]}},\r\n    {name: \"Right to Left\", style: {keys: [mx.mxConstants.STYLE_TEXT_DIRECTION], values: [mx.mxConstants.TEXT_DIRECTION_RTL]}},\r\n    {name: \"Left to Right\", style: {keys: [mx.mxConstants.STYLE_TEXT_DIRECTION], values: [mx.mxConstants.TEXT_DIRECTION_LTR]}},\r\n\r\n  ];\r\n}\r\n\r\nexport function getFontEditingOptions() {\r\n  return [\r\n    {name: \"Bold\", style: {key: mx.mxConstants.STYLE_FONTSTYLE, value: mx.mxConstants.FONT_BOLD}},\r\n    {name: \"Italic\", style: {key: mx.mxConstants.STYLE_FONTSTYLE, value: mx.mxConstants.FONT_ITALIC}},\r\n    {name: \"Strikethrough\", style: {key: mx.mxConstants.STYLE_FONTSTYLE, value: mx.mxConstants.FONT_STRIKETHROUGH}},\r\n    {name: \"Underline\", style: {key: mx.mxConstants.STYLE_FONTSTYLE, value: mx.mxConstants.FONT_UNDERLINE}},\r\n  ];\r\n}\r\n\r\n\r\nexport function getLabelPositionOptions() {\r\n  return getSubOptions(getAdvancedLabelPositionOptions(), 0, 3);\r\n}\r\n\r\n\r\nexport function getCellAlignmentOptions() {\r\n  return [\r\n    {name: \"Left\", code: mx.mxConstants.ALIGN_LEFT},\r\n    {name: \"Center\", code: mx.mxConstants.ALIGN_CENTER},\r\n    {name: \"Right\", code: mx.mxConstants.ALIGN_RIGHT},\r\n    {name: \"Top\", code: mx.mxConstants.ALIGN_TOP},\r\n    {name: \"Middle\", code: mx.mxConstants.ALIGN_MIDDLE},\r\n    {name: \"Bottom\", code: mx.mxConstants.ALIGN_BOTTOM},\r\n  ];\r\n}\r\n\r\nexport function getTextAlignmentOptions() {\r\n  return [\r\n    {name: \"Left\", style: {keys: [mx.mxConstants.STYLE_ALIGN], values: [mx.mxConstants.ALIGN_LEFT]}},\r\n    {name: \"Center\", style: {keys: [mx.mxConstants.STYLE_ALIGN], values: [mx.mxConstants.ALIGN_CENTER]}},\r\n    {name: \"Right\", style: {keys: [mx.mxConstants.STYLE_ALIGN], values: [mx.mxConstants.ALIGN_RIGHT]}},\r\n  ];\r\n}\r\n\r\n// start and end arrow options are identical, even tho the key differs.\r\nexport function getArrowTypeOptions() {\r\n  return [\r\n    {name: \"Classic\", code: mx.mxConstants.ARROW_CLASSIC},\r\n    {name: \"Classic Thin\", code: mx.mxConstants.ARROW_CLASSIC_THIN},\r\n    {name: \"Block\", code: mx.mxConstants.ARROW_BLOCK},\r\n    {name: \"Block Thin\", code: mx.mxConstants.ARROW_BLOCK_THIN},\r\n    {name: \"Diamond\", code: mx.mxConstants.ARROW_DIAMOND},\r\n    {name: \"Diamond Thin\", code: mx.mxConstants.ARROW_DIAMOND_THIN},\r\n    {name: \"Open\", code: mx.mxConstants.ARROW_OPEN},\r\n    {name: \"Open Thin\", code: mx.mxConstants.ARROW_OPEN_THIN},\r\n    {name: \"None\", code: mx.mxConstants.NONE},\r\n  ];\r\n}\r\n\r\n// adapted from src: this.editorUi.menus.edgeStyleChange & Toolbar.js\r\nexport function getWaypointStyleOptions() {\r\n  return [\r\n    {name: \"Straight\", style: {keys: [mx.mxConstants.STYLE_EDGE, mx.mxConstants.STYLE_CURVED, mx.mxConstants.STYLE_NOEDGESTYLE], values: [null, null, null]}, sprite: \"geIcon geSprite geSprite-straight\"},\r\n    {name: \"Orthogonal\", style: {keys: [mx.mxConstants.STYLE_EDGE, mx.mxConstants.STYLE_CURVED, mx.mxConstants.STYLE_NOEDGESTYLE], values: [\"orthogonalEdgeStyle\", null, null]}, sprite: \"geIcon geSprite geSprite-orthogonal\"},\r\n    {name: \"Simple Horizontal\", style: {keys: [mx.mxConstants.STYLE_EDGE, mx.mxConstants.STYLE_ELBOW, mx.mxConstants.STYLE_CURVED, mx.mxConstants.STYLE_NOEDGESTYLE], values: [\"elbowEdgeStyle\", null, null, null]}, sprite: \"geIcon geSprite geSprite-horizontalelbow\"},\r\n    {name: \"Simple vertical\", style: {keys: [mx.mxConstants.STYLE_EDGE, mx.mxConstants.STYLE_ELBOW, mx.mxConstants.STYLE_CURVED, mx.mxConstants.STYLE_NOEDGESTYLE], values: [\"elbowEdgeStyle\", \"vertical\", null, null]}, sprite: \"geIcon geSprite geSprite-verticalelbow\"},\r\n    {name: \"Isometric Horizontal\", style: {keys: [mx.mxConstants.STYLE_EDGE, mx.mxConstants.STYLE_ELBOW, mx.mxConstants.STYLE_CURVED, mx.mxConstants.STYLE_NOEDGESTYLE], values: [\"isometricEdgeStyle\", null, null, null]}, sprite: \"geIcon geSprite geSprite-horizontalisometric\"},\r\n    {name: \"Isometric Vertical\", style: {keys: [mx.mxConstants.STYLE_EDGE, mx.mxConstants.STYLE_ELBOW, mx.mxConstants.STYLE_CURVED, mx.mxConstants.STYLE_NOEDGESTYLE], values: [\"isometricEdgeStyle\", \"vertical\", null, null]}, sprite: \"geIcon geSprite geSprite-verticalisometric\"},\r\n    {name: \"Curved\", style: {keys: [mx.mxConstants.STYLE_EDGE, mx.mxConstants.STYLE_CURVED, mx.mxConstants.STYLE_NOEDGESTYLE], values: [\"orthogonalEdgeStyle\", \"1\", null]}, sprite: \"geIcon geSprite geSprite-curved\"},\r\n    {name: \"Entity-relation\", style: {keys: [mx.mxConstants.STYLE_EDGE, mx.mxConstants.STYLE_CURVED, mx.mxConstants.STYLE_NOEDGESTYLE], values: [\"entityRelationEdgeStyle\", null, null]}, sprite: \"geIcon geSprite geSprite-entity\"},\r\n  ];\r\n}\r\n\r\n// adapted from src: this.editorUi.menus.edgeStyleChange & Toolbar.js\r\n// FIXME: only simple Arrow recognized\r\nexport function getConnectionStyleOptions() {\r\n  return [\r\n    {name: \"Line\", style: {keys: [mx.mxConstants.STYLE_SHAPE, \"width\"], values: [null, null]}, sprite: \"geIcon geSprite geSprite-connection\"},\r\n    {name: \"Link\", style: {keys: [mx.mxConstants.STYLE_SHAPE, \"width\"], values: [\"link\", null]}, sprite: \"geIcon geSprite geSprite-linkedge\"},\r\n    {name: \"Arrow\", style: {keys: [mx.mxConstants.STYLE_SHAPE, \"width\"], values: [\"flexArrow\", null]}, sprite: \"geIcon geSprite geSprite-arrow\"},\r\n    {name: \"Simple Arrow\", style: {keys: [mx.mxConstants.STYLE_SHAPE, \"width\"], values: [\"arrow\", null]}, sprite: \"geIcon geSprite geSprite-simplearrow\"},\r\n  ];\r\n}\r\n\r\nexport function getSpacingOptions() {\r\n  return [\r\n    {name: \"Global\", style: {keys: [mx.mxConstants.STYLE_SPACING], values: [0]}},\r\n    {name: \"Top\", style: {keys: [mx.mxConstants.STYLE_SPACING_TOP], values: [0]}},\r\n    {name: \"Left\", style: {keys: [mx.mxConstants.STYLE_SPACING_LEFT], values: [0]}},\r\n    {name: \"Bottom\", style: {keys: [mx.mxConstants.STYLE_SPACING_BOTTOM], values: [0]}},\r\n    {name: \"Right\", style: {keys: [mx.mxConstants.STYLE_SPACING_RIGHT], values: [0]}},\r\n  ];\r\n}\r\n\r\n\r\nexport function getPerimeterSpacingOptions() {\r\n  return [\r\n    {name: \"Perimeter\", style: {keys: [mx.mxConstants.STYLE_PERIMETER_SPACING], values: [0]}},\r\n    {name: \"Source\", style: {keys: [mx.mxConstants.STYLE_SOURCE_PERIMETER_SPACING], values: [0]}},\r\n    {name: \"Target\", style: {keys: [mx.mxConstants.STYLE_TARGET_PERIMETER_SPACING], values: [0]}},\r\n  ];\r\n}\r\n\r\nexport function getDirectionOptions() {\r\n  return [\r\n    {name: \"north\", style: {keys: [mx.mxConstants.STYLE_DIRECTION], values: [mx.mxConstants.DIRECTION_NORTH]}},\r\n    {name: \"east\", style: {keys: [mx.mxConstants.STYLE_DIRECTION], values: [mx.mxConstants.DIRECTION_EAST]}},\r\n    {name: \"south\", style: {keys: [mx.mxConstants.STYLE_DIRECTION], values: [mx.mxConstants.DIRECTION_SOUTH]}},\r\n    {name: \"west\", style: {keys: [mx.mxConstants.STYLE_DIRECTION], values: [mx.mxConstants.DIRECTION_WEST]}},\r\n  ];\r\n}\r\n\r\nexport function getPageFormats() {\r\n  return [{key: \"letter\", title: \"US-Letter (8,5\\\" x 11\\\")\", format: mx.mxConstants.PAGE_FORMAT_LETTER_PORTRAIT},\r\n    {key: \"legal\", title: \"US-Legal (8,5\\\" x 14\\\")\", format: new mx.mxRectangle(0, 0, 850, 1400)},\r\n    {key: \"tabloid\", title: \"US-Tabloid (11\\\" x 17\\\")\", format: new mx.mxRectangle(0, 0, 1100, 1700)},\r\n    {key: \"executive\", title: \"US-Executive (7\\\" x 10\\\")\", format: new mx.mxRectangle(0, 0, 700, 1000)},\r\n    {key: \"a0\", title: \"A0 (841 mm x 1189 mm)\", format: new mx.mxRectangle(0, 0, 3300, 4681)},\r\n    {key: \"a1\", title: \"A1 (594 mm x 841 mm)\", format: new mx.mxRectangle(0, 0, 2339, 3300)},\r\n    {key: \"a2\", title: \"A2 (420 mm x 594 mm)\", format: new mx.mxRectangle(0, 0, 1654, 2336)},\r\n    {key: \"a3\", title: \"A3 (297 mm x 420 mm)\", format: new mx.mxRectangle(0, 0, 1169, 1654)},\r\n    {key: \"a4\", title: \"A4 (210 mm x 297 mm)\", format: mx.mxConstants.PAGE_FORMAT_A4_PORTRAIT},\r\n    {key: \"a5\", title: \"A5 (148 mm x 210 mm)\", format: new mx.mxRectangle(0, 0, 583, 827)},\r\n    {key: \"a6\", title: \"A6 (105 mm x 148 mm)\", format: new mx.mxRectangle(0, 0, 413, 583)},\r\n    {key: \"a7\", title: \"A7 (74 mm x 105 mm)\", format: new mx.mxRectangle(0, 0, 291, 413)},\r\n    {key: \"b4\", title: \"B4 (250 mm x 353 mm)\", format: new mx.mxRectangle(0, 0, 980, 1390)},\r\n    {key: \"b5\", title: \"B5 (176 mm x 250 mm)\", format: new mx.mxRectangle(0, 0, 690, 980)},\r\n    {key: \"16-9\", title: \"16:9 (1600 x 900)\", format: new mx.mxRectangle(0, 0, 1600, 900)},\r\n    {key: \"16-10\", title: \"16:10 (1920 x 1200)\", format: new mx.mxRectangle(0, 0, 1920, 1200)},\r\n    {key: \"4-3\", title: \"4:3 (1600 x 1200)\", format: new mx.mxRectangle(0, 0, 1600, 1200)},\r\n    {key: \"custom\", title: mx.mxResources.get(\"custom\"), format: null}];\r\n}\r\n\r\nexport function getMetadataOptions() {\r\n  return [\r\n    // dashed\r\n    {name: \"data_source\", style: {keys: [mx.mxConstants.STYLE_STROKECOLOR, mx.mxConstants.STYLE_STROKEWIDTH, mx.mxConstants.STYLE_DASHED], values: [\"rgba(255, 0, 0, 1)\", \"5\", \"1\"]}},\r\n    // dotted\r\n    {name: \"data_provider\", style: {keys: [mx.mxConstants.STYLE_STROKECOLOR, mx.mxConstants.STYLE_DASHED, mx.mxConstants.STYLE_DASH_PATTERN], values: [\"rgba(0, 0, 255, 1)\", \"1\", \"1 3\"]}},\r\n    // dashed\r\n    {name: \"data_store\", style: {keys: [mx.mxConstants.STYLE_STROKECOLOR, mx.mxConstants.STYLE_STROKEWIDTH, mx.mxConstants.STYLE_DASHED], values: [\"strokeColor=rgba(0, 255, 0, 1)\", \"5\", \"1\"]}},\r\n  ];\r\n}\r\n","import \"primeicons/primeicons.css\";\r\nimport \"primereact/resources/themes/saga-blue/theme.css\";\r\nimport \"primereact/resources/primereact.css\";\r\nimport \"primeflex/primeflex.css\";\r\n\r\nimport {Component} from \"react\";\r\n\r\n\r\nexport interface PrimeTabViewElementProps {\r\n    // tabpanel: 'Style' | 'Text' | 'Arrange';\r\n    // name: string;\r\n    value:any;\r\n    onChange: (e:any) => void;\r\n}\r\n\r\nexport default abstract class PrimeTabViewElement <Props extends PrimeTabViewElementProps, State> extends Component<Props, State> {\r\n    abstract render () : JSX.Element;\r\n}\r\n","import \"primeicons/primeicons.css\";\r\nimport \"primereact/resources/themes/saga-blue/theme.css\";\r\nimport \"primereact/resources/primereact.css\";\r\nimport \"primeflex/primeflex.css\";\r\n\r\nimport {Checkbox} from \"primereact/checkbox\";\r\nimport React from \"react\";\r\n\r\nimport PrimeTabViewElement, {PrimeTabViewElementProps as ParentProps} from \"./PrimeTabViewElement\";\r\n\r\ninterface PrimeTabViewElementCheckboxProps {\r\n  label: string;\r\n  value: boolean;\r\n  style?:React.CSSProperties | undefined;\r\n  sharedId: string;\r\n}\r\n\r\ninterface PrimeTabViewElementCheckboxState {\r\n}\r\n\r\ntype Props = ParentProps & PrimeTabViewElementCheckboxProps;\r\ntype State = PrimeTabViewElementCheckboxState;\r\n\r\nexport default class PrimeTabViewElementCheckbox extends PrimeTabViewElement<Props, State> {\r\n  constructor(props:Props) {\r\n    super(props);\r\n    this.state = {\r\n      checked: true,\r\n    };\r\n  }\r\n\r\n    static defaultProps = {\r\n      optionLabel: \"name\",\r\n    };\r\n\r\n    render() {\r\n      return (\r\n        <div>\r\n          <Checkbox inputId={this.props.sharedId} checked={this.props.value} onChange={(e) => {\r\n            this.setState({checked: e.checked}); this.props.onChange(e);\r\n          }} />\r\n          <label htmlFor={this.props.sharedId}>{this.props.label}</label>\r\n        </div>\r\n      );\r\n    }\r\n}\r\n","import {Component} from \"react\";\r\n\r\nimport \"primeicons/primeicons.css\";\r\nimport \"primereact/resources/themes/saga-blue/theme.css\";\r\nimport \"primereact/resources/primereact.css\";\r\nimport \"primeflex/primeflex.css\";\r\n\r\nimport {Button} from \"primereact/button\";\r\nimport {Checkbox} from \"primereact/checkbox\";\r\nimport {ChromePicker, RGBColor} from \"react-color\";\r\n\r\nimport {rgbaColorString} from \"../Utils/UtilityFunctions\";\r\n\r\ninterface CustomColorPickerProps {\r\n  label: string;\r\n  labelWidth: string;\r\n  color: RGBColor | undefined;\r\n  defaultColor: RGBColor;\r\n  handleColorChange: (e:RGBColor) => void\r\n  handleCheckboxChange: (checked:boolean) => void\r\n}\r\n\r\ninterface CustomColorPickerState {\r\n\r\n  displayColorPicker: boolean;\r\n}\r\n\r\nexport default class CustomColorPicker extends Component<CustomColorPickerProps, CustomColorPickerState> {\r\n  constructor(props:CustomColorPickerProps) {\r\n    super(props);\r\n    this.state = {\r\n      displayColorPicker: false,\r\n    };\r\n    this.showColorPicker = this.showColorPicker.bind(this);\r\n  }\r\n\r\n  static defaultProps = {\r\n    defaultColor: {r: 255, g: 255, b: 255, a: 1},\r\n  };\r\n\r\n\r\n  showColorPicker = (event:any) => {\r\n    this.setState({displayColorPicker: !this.state.displayColorPicker});\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={{marginLeft: 0}} className=\"p-field-checkbox  p-grid\">\r\n        <Checkbox inputId=\"binary\" checked={ ((this.props.color != undefined))} onChange={(e:any) => {\r\n          this.props.handleCheckboxChange(e.checked);\r\n        }\r\n        } />\r\n        <label htmlFor=\"ExtendedColorPicker\" className=\"p-col-fixed\">{this.props.label} Color</label>\r\n        {/* preview with picker menu */}\r\n        {((this.props.color != undefined)) ?\r\n                   <div className=\"p-col\" style={{position: \"relative\"}}>\r\n                     {/* color preview */}\r\n                     <Button onClick={this.showColorPicker} style={{backgroundColor: this.props.color ? rgbaColorString(this.props.color) : rgbaColorString(this.props.defaultColor)}}></Button>\r\n                     {this.state.displayColorPicker ?\r\n                           <div style={ {position: \"absolute\", zIndex: 1} }>\r\n                             <div style={ {position: \"fixed\", top: \"0px\", right: \"0px\", bottom: \"0px\", left: \"0px\"}} onClick={ () => this.setState({displayColorPicker: false}) }/>\r\n                             <ChromePicker color={this.props.color} onChange={(e) => this.props.handleColorChange(e.rgb)} />\r\n                           </div>:\r\n                        null}\r\n                   </div> :\r\n              \"\"}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import \"primeicons/primeicons.css\";\r\nimport \"primereact/resources/themes/saga-blue/theme.css\";\r\nimport \"primereact/resources/primereact.css\";\r\nimport \"primeflex/primeflex.css\";\r\n\r\nimport {InputNumber} from \"primereact/inputnumber\";\r\nimport PrimeTabViewElement, {PrimeTabViewElementProps as ParentProps} from \"./PrimeTabViewElement\";\r\n\r\ninterface CustomInputNumberProps {\r\n  label: string;\r\n  sharedId: string;\r\n  value: number;\r\n  mode?:string;\r\n  suffix?:string;\r\n  min?:number | undefined;\r\n  max?:number | undefined;\r\n  minFractionDigits?:number | undefined;\r\n  showButtons?:boolean;\r\n  onChange: (e:any) => void\r\n}\r\n\r\ninterface CustomInputNumberState {\r\n}\r\n\r\ntype Props = ParentProps & CustomInputNumberProps;\r\ntype State = CustomInputNumberState;\r\n\r\nexport default class CustomInputNumber extends PrimeTabViewElement<Props, State> {\r\n  constructor(props:Props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n  }\r\n\r\n  static defaultProps = {\r\n    mode: \"decimal\",\r\n    suffix: \" pt\",\r\n    showButtons: true,\r\n    minFractionDigits: 0,\r\n  };\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <label htmlFor={this.props.sharedId}>{this.props.label}</label>\r\n        <InputNumber inputId={this.props.sharedId} value={this.props.value} onValueChange={(e) =>{\r\n          this.props.onChange(e);\r\n        }} showButtons={this.props.showButtons} mode={this.props.mode} suffix={this.props.suffix} min={this.props.min} max={this.props.max} minFractionDigits={this.props.minFractionDigits}/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import {Component} from \"react\";\r\nimport {PointRating} from \"../data-structure-utils/IotPropertyTypes\";\r\nimport {RadioButton} from \"primereact/radiobutton\";\r\n\r\ninterface PointSelectionProps {\r\n    points:PointRating[],\r\n    fallBackName?:string,\r\n    STARTINDEX:number,\r\n    upperCategoryID:string,\r\n}\r\n\r\ninterface PointRangeSelection {\r\n    id: string,\r\n    selection: PointRating,\r\n}\r\n\r\ninterface PointSelectionState {\r\n    selection: PointRangeSelection,\r\n}\r\n\r\n/**\r\n * represents the iot properties with their curresponding points for the PointSelection\r\n */\r\nexport default class PointSelection extends Component<PointSelectionProps, PointSelectionState> {\r\n  constructor(props:PointSelectionProps) {\r\n    super(props);\r\n    this.state = {\r\n      // https://primefaces.org/primereact/showcase/#/radiobutton using: Dynamic Values, Preselection, Value Binding and Disabled Option\r\n      selection: {id: this.props.STARTINDEX.toString(), selection: this.props.points[this.props.STARTINDEX]},\r\n    };\r\n    this.props.points[this.props.STARTINDEX].isSelected = true;\r\n    this.props.points[this.props.STARTINDEX].setValue = this.props.points[this.props.STARTINDEX].value;\r\n  }\r\n\r\n  saveMetadata(point:PointRating, index:number) {\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        {\r\n          this.props.points.map((point, index) => {\r\n            //keys for json properties\r\n            const elementIndex = index.toString();\r\n            //keys for html ids\r\n            const elementKey = this.props.upperCategoryID + \"-\" + index.toString();\r\n            //previous keys\r\n            const savedSelectionKey = this.state.selection.id;\r\n            const savedSelectioElementKey = this.props.upperCategoryID + \"-\" + savedSelectionKey;\r\n            // display only\r\n            const elementName = point.groupName;\r\n            return (\r\n              <div key={elementKey} className=\"p-field-radiobutton\">\r\n                <RadioButton inputId={elementKey} name=\"point\" value={point}\r\n                  onChange={(e) => {\r\n                    this.setState({selection: {id: elementIndex, selection: e.value}});\r\n                    // selection changed\r\n                    if (!(savedSelectioElementKey === elementKey)) {\r\n                      // set current selection\r\n                      this.props.points[index].isSelected = true;\r\n                      //if a slider is used in the future, use value from slider\r\n                      this.props.points[index].setValue = point.value;\r\n                      // reset old value\r\n                      const oldIndex = parseInt(savedSelectionKey);\r\n                      this.props.points[oldIndex].isSelected = false;\r\n                      this.props.points[oldIndex].setValue = ((this.props.points[index].value < 0) ? this.props.points[index].value : 0);\r\n                    }\r\n                  }} checked={savedSelectioElementKey === elementKey} tooltip={point.details}/>\r\n                <label style={{cursor: \"pointer\"}}htmlFor={elementKey}>{elementName}</label>\r\n              </div>\r\n            );\r\n          })\r\n        }\r\n      </>\r\n    );\r\n\r\n  }\r\n}\r\n","import iiotDataProviderJson from \"../iot/data_source_files/iiot_data_provider_property_catalogue.json\";\r\nimport ciotDataProviderJson from \"../iot/data_source_files/ciot_data_provider_property_catalogue.json\";\r\nimport iiotDataStoreJson from \"../iot/data_source_files/data_store_quality_characteristics.json\";\r\n\r\nimport {jsonMapReplacer, jsonMapReviver} from \"../Utils/UtilityFunctions\";\r\n\r\nimport {Property} from \"./data-structure-utils/IotPropertyTypes\";\r\n//*************************************************/\r\n// Metadata  options presets\r\n//*************************************************/\r\nexport function getMetadataTemplates() {\r\n  const jsons = [iiotDataProviderJson, ciotDataProviderJson, iiotDataStoreJson];\r\n  const templates: { name: string;value: any;}[] = [];\r\n  jsons.forEach((json) => {\r\n    const template = getJsonObject(json, \"Property\");\r\n    templates.push({name: getTemplateName(template), value: template});\r\n  });\r\n  return templates;\r\n}\r\n\r\nexport function getTemplateName(defaultMetadataJson: Property) {\r\n  // ciot, iiot etc.\r\n  const iotTypes:string = defaultMetadataJson.iotTypes.join(\" \")\r\n      .replaceAll(\"iot\", \"IoT\")\r\n      .replaceAll(\"cIoT\", \"CIoT\")\r\n      .replaceAll(\"iIoT\", \"IIoT\")\r\n      .trim();\r\n  // data_provider/store/source\r\n  const type: string = defaultMetadataJson.type.replaceAll(\"_\", \" \");\r\n  const templateName = iotTypes ? iotTypes + \" \" + type : type;\r\n  return templateName.charAt(0).toUpperCase() + templateName.slice(1);\r\n}\r\n\r\nfunction getJsonObject(json:any, key:string) {\r\n  return JSON.parse(JSON.stringify(json, jsonMapReplacer, 4), jsonMapReviver)[key];\r\n}\r\n\r\n","import {Component} from \"react\";\r\nimport {Property, Category, Subproperty, PointRating, UppermostCategoryData, convertNumberToPointRange, evaluateProperty, getMaxSumOfProperty} from \"../data-structure-utils/IotPropertyTypes\";\r\nimport {Dialog} from \"primereact/dialog\";\r\nimport {Dropdown} from \"primereact/dropdown\";\r\nimport {Button} from \"primereact/button\";\r\nimport PointSelection from \"./PointSelection\";\r\n\r\nimport * as iotGuiUtils from \"../IotGuiUtils\";\r\nimport {Divider} from \"primereact/divider\";\r\n\r\nimport {evaluateQuestionary} from \"../../Actions\";\r\n\r\ninterface QuestionaryProps {\r\n  DEBUG:boolean;\r\n  // json containing questionary data\r\n  // json: string\r\n  displayResponsive:boolean,\r\n  property: Property,\r\n  handleDisplayResponsiveChange(displayEditDataPanel:boolean): void,\r\n  handleCellMetadataChange: (cellMetadata: Property| undefined) => void,\r\n  handleSave(): void,\r\n  handleExit(): void,\r\n}\r\n\r\ninterface QuestionaryState {\r\n  defaultMetadataJson: Property | undefined,\r\n  templates: { name: string; value: any;}[],\r\n  trustScore: number,\r\n}\r\n\r\n\r\n/**\r\n * represents the iot properties with their curresponding points for the questionary\r\n */\r\nexport default class Questionary extends Component<QuestionaryProps, QuestionaryState> {\r\n  constructor(props:QuestionaryProps) {\r\n    super(props);\r\n    this.state = {\r\n      defaultMetadataJson: undefined,\r\n      templates: iotGuiUtils.getMetadataTemplates(),\r\n      trustScore: evaluateQuestionary(this.props.property),\r\n    };\r\n  }\r\n\r\n  renderSubproperty = (subproperty:Subproperty, renderPoints = true) => {\r\n    let subpropertyPoints = subproperty.points as PointRating[];\r\n    if (!Array.isArray(subpropertyPoints) && !isNaN(subpropertyPoints)) {\r\n      subpropertyPoints = [convertNumberToPointRange(subpropertyPoints)];\r\n    }\r\n    let startIndex = 0;\r\n    if (subpropertyPoints) {\r\n      (subpropertyPoints! as PointRating[]).map((point, index)=>{\r\n        if (point.isSelected) {\r\n          startIndex = index;\r\n        }\r\n      });\r\n    }\r\n    return (\r\n      <div>\r\n        {this.props.DEBUG ? <div>{\"subproperty.id: \" + subproperty.id}</div> : <></>}\r\n        <h5>{ this.props.DEBUG && \"subproperty.name: \"}{subproperty.name}</h5>\r\n        <div>{ this.props.DEBUG && \"subproperty.details: \"}{subproperty.details}</div><br/>\r\n        {/* <div>{this.renderPoints(subproperty.points as PointRange[], subproperty)}</div> */}\r\n        {renderPoints ?\r\n        <>\r\n          {this.props.DEBUG ? <h5> Points</h5> : <></>}\r\n          {/* //TODO: if points only hase size 1 => subproperties are used for radiobox */}\r\n          <PointSelection points={subpropertyPoints} STARTINDEX={startIndex} upperCategoryID={\"\"+subproperty.id}> </PointSelection>\r\n        </> :\r\n        <> </>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderCategory = (category:Category, index:number) => {\r\n    const subproperties:Subproperty[] | undefined = category.subproperties;\r\n    const points:number | PointRating[] | undefined = category.points;\r\n    let startIndex = 0;\r\n    if (points) {\r\n      (points! as PointRating[]).map((point, index)=>{\r\n        if (point.isSelected) {\r\n          startIndex = index;\r\n        }\r\n      });\r\n    }\r\n    // assume all points got the same schema\r\n    return (\r\n      <div>\r\n        <h2>{ this.props.DEBUG && \"category.name: \"}{category.name}</h2>\r\n        <h3>{ this.props.DEBUG && \"category.details: \"}{category.description}</h3>\r\n        {/* Render selection either in subproperties or in points directly */}\r\n        {subproperties ?\r\n          // render points under subproperties as RadioButton\r\n          <>\r\n            {this.props.DEBUG ? <h4> Subproperties </h4> : <></>}\r\n            {subproperties.map((subproperty) =>this.renderSubproperty(subproperty))}\r\n          </> :\r\n          points ?<> {this.props.DEBUG ? <h4> Points</h4> : <></>}<PointSelection points={points! as PointRating[]} STARTINDEX={startIndex} upperCategoryID={category.name}> </PointSelection></> : <></>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n\r\n\r\n  renderCategoryMap = (categoriesObject:Map<string, UppermostCategoryData>) => {\r\n    const jsxElements:JSX.Element[] = [];\r\n    const categories:Map<string, UppermostCategoryData> = categoriesObject;\r\n\r\n    categories.forEach((categories, upperCategory) => {\r\n      jsxElements.push( <h1>{upperCategory}</h1>);\r\n      if (categories.description) {\r\n        jsxElements.push(<div> {categories.description}</div>);\r\n      }\r\n      //  render category[]\r\n      categories.value.forEach((item, index) =>{\r\n        jsxElements.push(this.renderCategory(item, index));\r\n      });\r\n    });\r\n\r\n    return <> {jsxElements} </>;\r\n  }\r\n\r\n  renderProperty = () => {\r\n    return (\r\n      <div>\r\n        {this.renderCategoryMap(this.props.property.categories)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getPropertyHeader = () => {\r\n    return \"Property: \" + iotGuiUtils.getTemplateName(this.props.property);\r\n  }\r\n\r\n  onTemplateChange = (e:any) =>{\r\n    this.setState({defaultMetadataJson: e.value});\r\n  }\r\n\r\n  render() {\r\n    // TODO: parse questionary json data: https://www.pluralsight.com/guides/how-to-use-reactjs-and-complex-json-objects\r\n    return (\r\n      <>\r\n\r\n        <Dialog modal={false} header={\r\n          <>\r\n            {this.getPropertyHeader()}\r\n            <br />\r\n            {this.renderUpperMenuQuestionary()}\r\n          </>\r\n        } footer={() => {\r\n          return (\r\n            <div>\r\n              <Button label=\"Cancel\" icon=\"pi pi-times\" onClick={() => {\r\n                //hide modal\r\n                this.props.handleDisplayResponsiveChange(false);\r\n                //onExit\r\n                this.props.handleExit();\r\n                // reset to inital value for new nodes in graph\r\n                this.props.handleCellMetadataChange(undefined);\r\n              }} className=\"p-button-text\" />\r\n              <Button label=\"OK\" icon=\"pi pi-check\" onClick={this.saveAndCloseQuestionary} autoFocus />\r\n            </div>);\r\n        } }\r\n        visible={this.props.displayResponsive} onHide={this.saveAndCloseQuestionary}\r\n        onShow={()=>{\r\n          //on first cell without metadata defaultMetadataJson is undefined,\r\n          // console.debug(this.state.defaultMetadataJson);\r\n          // console.debug(this.props.property);\r\n        }}\r\n        // update score on each change inside catalog\r\n        onClick={()=>{\r\n          this.setState({trustScore: evaluateQuestionary(this.props.property)});\r\n        }}breakpoints={{\"960px\": \"75vw\", \"640px\": \"100vw\"}} style={{width: \"50vw\"}}>\r\n          {this.renderProperty()}\r\n        </Dialog>\r\n      </>\r\n    );\r\n  }\r\n\r\n  saveAndCloseQuestionary = () => {\r\n    this.props.handleDisplayResponsiveChange(false);\r\n    this.props.handleSave();\r\n    // reset to inital value of new nodes\r\n    this.props.handleCellMetadataChange(undefined);\r\n  }\r\n\r\n  private renderUpperMenuQuestionary() {\r\n    return <div style={{fontWeight: \"400\", fontSize: \"16px\"}}>\r\n      Load Template:&nbsp;\r\n      <Dropdown value={this.getTemplateName()} options={this.state.templates} onChange={this.onTemplateChange} optionLabel=\"name\" optionValue=\"value\" placeholder={this.getTemplateName()} />\r\n      <Button label=\"Apply Template\" onClick={() => {\r\n        if (this.state.defaultMetadataJson) {\r\n          this.props.handleCellMetadataChange(this.state.defaultMetadataJson);\r\n          this.setState({trustScore: 0});\r\n          // apply same template\r\n        } else if (this.getTemplateName(this.props.property) == this.getTemplateName()) {\r\n          alert(\"This template is already applied\");\r\n        } else {\r\n          // TODO: use empty selection to delete the current template or remove Questionary otherwise\r\n          alert(\"Select Template first\");\r\n        }\r\n\r\n      } } style={{margin: \"0.2rem\"}} />\r\n      <div><br />\r\n        {/* show only rounded value */}\r\n        {getMaxSumOfProperty(this.props.property) > 0 ?\r\n            `Trust score τ = ${this.state.trustScore.toFixed(3)}\\t[1 - (currentScore: ${evaluateProperty(this.props.property)} / maxPossibleScore: ${getMaxSumOfProperty(this.props.property)} )]` : \"Trust score τ = not yet calculated\"\r\n        }\r\n      </div>\r\n      <Divider/>\r\n    </div>;\r\n  }\r\n\r\n  private getTemplateName(metadataJson = this.state.defaultMetadataJson): string {\r\n    //either load defaultMetadataJson (when cell was already edited) or (this.props.property)\r\n    const property = this.state.defaultMetadataJson ? this.state.defaultMetadataJson: this.props.property;\r\n    return property ? iotGuiUtils.getTemplateName(property) : \"click to choose template\";\r\n  }\r\n}\r\n","import \"primeicons/primeicons.css\";\r\nimport \"primereact/resources/themes/saga-blue/theme.css\";\r\nimport \"primereact/resources/primereact.css\";\r\nimport \"primeflex/primeflex.css\";\r\n\r\nimport React, {Component} from \"react\";\r\nimport {TabView, TabPanel} from \"primereact/tabview\";\r\nimport {Divider} from \"primereact/divider\";\r\n\r\n// additional GUI content\r\nimport {Button} from \"primereact/button\";\r\nimport {Dropdown} from \"primereact/dropdown\";\r\n\r\nimport {mxCell, mxGraph, StyleMap, mxPoint} from \"mxgraph\";\r\nimport mx from \"../mx\";\r\nimport * as editorActions from \"../Actions\";\r\nimport * as styleEditorActions from \"../Utils/StyleEditorActions\";\r\nimport * as styleEditorOptions from \"../Utils/StyleEditorOptions\";\r\nimport {encode} from \"../Utils/GraphFileUtils\";\r\nimport {getHelpInformation} from \"../Utils/ContentUtility\";\r\nimport {getStyleMap, getStyleSet, getStyleMapFromCellStyleString, unionOfSet, toCamelCase, rgbaColorString, getRgba, getFromCorrespondingMap, getStyleSetFromStyleMap, getCellStyleMapForCellShape\r\n  , getVertexCells, getEdgeCells, getConnectedCells, getCollapsedCells, getStyleAttributes, jsonMapReplacer} from \"../Utils/UtilityFunctions\";\r\nimport {RGBColor} from \"react-color\";\r\n\r\n// TabViewElements\r\nimport ElementCheckbox from \"./PrimeTabViewElementCheckbox\";\r\nimport ElementColorPicker from \"./ExtendedColorPicker\";\r\nimport ElementInputNumber from \"./ExtendedInputNumber\";\r\n\r\nimport Questionary from \"../iot/renderer/Questionary\";\r\nimport * as iotGuiUtils from \"../iot/IotGuiUtils\";\r\nimport {Property} from \"../iot/data-structure-utils/IotPropertyTypes\";\r\n// responsive line wrap\r\nimport \"./PrimeTabView.css\";\r\n\r\n// make content scrollable\r\nimport {ScrollPanel} from \"primereact/scrollpanel\";\r\nimport \"../Scrollbar/scrollbar.css\";\r\n\r\ninterface PrimeTabViewProps {\r\n    graph: mxGraph;\r\n    DEBUG: boolean;\r\n    // css properties\r\n    id?: string;\r\n    style?: object;\r\n    className?: string;\r\n    showEditStyleModal: ()=> void;\r\n  }\r\n\r\n  interface PrimeTabViewState {\r\n    activeIndex: number | undefined;\r\n    // Style\r\n    lineColor: RGBColor;\r\n    swimlaneFillColor: RGBColor;\r\n    imageBorder: RGBColor;\r\n    strokeWidth: number;\r\n    linePattern: styleEditorOptions.styleConstants;\r\n    labelPosition: styleEditorOptions.styleConstants;\r\n    lineConnection: styleEditorOptions.styleConstants;\r\n    endArrow: string;\r\n    startArrow: string;\r\n    edgeStyle: styleEditorOptions.styleConstants;\r\n    fillColor: RGBColor;\r\n    gradientColor: RGBColor;\r\n    gradientDirection: styleEditorOptions.styleConstants;\r\n    perimeterSpacing: number;\r\n    shadow: boolean;\r\n    rounded: boolean;\r\n    // TEXT\r\n    fontColor: RGBColor;\r\n    labelBackgroundColor: RGBColor;\r\n    labelBorderColor: RGBColor;\r\n    fontSize:number;\r\n    fontFamily:string;\r\n    align: styleEditorOptions.styleConstants;\r\n    textDirection: styleEditorOptions.styleConstants;\r\n    textLayoutDirection: styleEditorOptions.styleConstants;\r\n    spacingOptions: styleEditorOptions.styleEditorOption[];\r\n    currentEditingOption: number | undefined;\r\n    whiteSpace: boolean;\r\n    horizontal: boolean;\r\n    // arrange\r\n    // TODO: left/top is used instead of x and y multiple times in gui: cell position and line start and line end => should be extracted\r\n    leftPosition:number;\r\n    topPosition:number;\r\n    leftLineStartPosition:number;\r\n    topLineStartPosition:number;\r\n    leftLineEndPosition:number;\r\n    topLineEndPosition:number;\r\n    copiedSize:mxPoint | null;\r\n    copiedPosition:mxPoint | null;\r\n    rotationAngle:number;\r\n    aspect: boolean;\r\n    isImageFlippedHorizontal: boolean;\r\n    isImageFlippedVertical: boolean;\r\n    // CHECKBOXES\r\n    isFilled: boolean;\r\n    // debug\r\n    displayEditDataPanel: boolean,\r\n    copiedStyle: string| null,\r\n    currentStyle: string,\r\n    editedStyle: string,\r\n    // metadata in json format\r\n    cellMetadata: undefined | Property,\r\n    defaultMetadataJson: Object,\r\n    editData: any,\r\n\r\n  }\r\n\r\n\r\nexport default class PrimeTabView extends Component<PrimeTabViewProps, PrimeTabViewState> {\r\n  constructor(props:PrimeTabViewProps) {\r\n    super(props);\r\n    this.state = {\r\n      activeIndex: 0,\r\n      // Style\r\n      lineColor: {r: 255, g: 255, b: 255, a: 1},\r\n      swimlaneFillColor: {r: 255, g: 255, b: 255, a: 1},\r\n      imageBorder: {r: 255, g: 255, b: 255, a: 1},\r\n      strokeWidth: 1,\r\n      linePattern: styleEditorOptions.getLineTypeOptions()[0].style,\r\n      labelPosition: styleEditorOptions.getLabelPositionOptions()[0].style,\r\n      lineConnection: styleEditorOptions.getConnectionStyleOptions()[0].style,\r\n      edgeStyle: styleEditorOptions.getWaypointStyleOptions()[0].style,\r\n      fillColor: {r: 0, g: 0, b: 0, a: 1},\r\n      gradientColor: {r: 0, g: 0, b: 0, a: 1},\r\n      gradientDirection: styleEditorOptions.getDirectionOptions()[0].style,\r\n      perimeterSpacing: 0,\r\n      shadow: false,\r\n      rounded: false,\r\n      // TEXT\r\n      fontColor: {r: 255, g: 255, b: 255, a: 1},\r\n      labelBackgroundColor: {r: 0, g: 0, b: 0, a: 1},\r\n      labelBorderColor: {r: 255, g: 255, b: 255, a: 1},\r\n      isFilled: true,\r\n      fontSize: 11,\r\n      fontFamily: styleEditorOptions.getFontFamiliyOptions()[0].code,\r\n      endArrow: styleEditorOptions.getArrowTypeOptions()[0].code,\r\n      startArrow: styleEditorOptions.getArrowTypeOptions()[0].code,\r\n      align: styleEditorOptions.getAdvancedLabelPositionOptions()[0].style,\r\n      textDirection: styleEditorOptions.getLabelWritingDirectionOptions()[0].style,\r\n      textLayoutDirection: styleEditorOptions.getTextAlignmentOptions()[0].style,\r\n      spacingOptions: styleEditorOptions.getSpacingOptions(),\r\n      currentEditingOption: undefined,\r\n      whiteSpace: false,\r\n      horizontal: true,\r\n      // arrange\r\n      leftPosition: 0,\r\n      topPosition: 0,\r\n      leftLineStartPosition: 0,\r\n      topLineStartPosition: 0,\r\n      leftLineEndPosition: 0,\r\n      topLineEndPosition: 0,\r\n      copiedSize: null,\r\n      copiedPosition: null,\r\n      rotationAngle: 0,\r\n      aspect: false,\r\n      isImageFlippedHorizontal: false,\r\n      isImageFlippedVertical: false,\r\n      // debug\r\n      displayEditDataPanel: false,\r\n      copiedStyle: null,\r\n      currentStyle: \"\",\r\n      editedStyle: \"\",\r\n      cellMetadata: undefined,\r\n      defaultMetadataJson: iotGuiUtils.getMetadataTemplates()[0].value,\r\n      editData: undefined,\r\n    };\r\n  }\r\n\r\n    handleLineColorChange = (lineColor:RGBColor) => {\r\n      this.setState({lineColor});\r\n    }\r\n    handleswimlaneFillColorChange = (swimlaneFillColor:RGBColor) => {\r\n      this.setState({swimlaneFillColor});\r\n    }\r\n    handleFillColorChange = (fillColor:RGBColor) => {\r\n      this.setState({fillColor});\r\n    }\r\n    handleGradientColorChange = (gradientColor:RGBColor) => {\r\n      this.setState({gradientColor});\r\n    }\r\n    handleFontColorChange = (fontColor:RGBColor) => {\r\n      this.setState({fontColor});\r\n    }\r\n    handlelabelBackgroundColorChange= (labelBackgroundColor:RGBColor) => {\r\n      this.setState({labelBackgroundColor});\r\n    }\r\n    handlelabelBorderColorChange = (labelBorderColor:RGBColor) =>{\r\n      this.setState({labelBorderColor});\r\n    }\r\n    handleimageBorderChange = (imageBorder:RGBColor) =>{\r\n      this.setState({imageBorder});\r\n    }\r\n    handleDisplayEditDataPanelChange = (displayEditDataPanel:boolean) =>{\r\n      this.setState({displayEditDataPanel});\r\n    }\r\n\r\n    handleCellMetadataChange = (cellMetadata:Property| undefined) =>{\r\n      this.setState({cellMetadata});\r\n    }\r\n    handleDefaultMetadataJsonChange = (defaultMetadataJson:Object) =>{\r\n      this.setState({defaultMetadataJson});\r\n    }\r\n    handleEditDataChange = (editData:any) =>{\r\n      this.setState({editData});\r\n    }\r\n\r\n    updateSpacingOptionElement = (index:number, value:number) => {\r\n      const arrayCopy = this.state.spacingOptions.slice();\r\n      arrayCopy[index].style.values[0] = value;\r\n      this.setState({spacingOptions: arrayCopy});\r\n    };\r\n\r\n    getTooltipForCell = (cell:mxCell) => {\r\n      // src from processeditor.xml\r\n      return \"<b>\"+ cell.getAttribute(\"label\")+\r\n                \"</b> (\"+cell.getId()+\")\"+\r\n                \"<br>Style: \"+cell.getStyle()+\r\n                \"<br>Edges: \"+cell.getEdgeCount()+\r\n                \"<br>Children: \"+cell.getChildCount();\r\n    }\r\n\r\n\r\n    /**\r\n     * For all GUI options default + selection\r\n     * @param cells\r\n     * @param defaultStyle\r\n     * @return a set of each combination of key, value pairs.\r\n     */\r\n    getStyleKeys = (cells:mxCell[], defaultStyle:StyleMap) => {\r\n      // filtering only keys from key value pairs in order to identify unique keys\r\n      const cellStyle = new Set(Object.keys(defaultStyle));\r\n      let uniqueStylesFromSelection:Set<string[]> = new Set();\r\n      for (let i=0; i<cells.length; i++) {\r\n        uniqueStylesFromSelection = unionOfSet(uniqueStylesFromSelection, getStyleSet(cells[i]));\r\n      }\r\n      // save attributes without values\r\n      for (const item of uniqueStylesFromSelection) {\r\n        cellStyle.add(item[0]);\r\n      }\r\n      return cellStyle;\r\n    }\r\n\r\n    /**\r\n     *  //FIXME: include loaded default.xml correctly\r\n     * //TODO: use named stylenames\r\n     * Styles for the given cell(s)\r\n     * @param cells\r\n     * @return a map containing each key with one of the given values if some keys are duplicated in the set.\r\n     */\r\n    getStyles= (cells:mxCell[]) => {\r\n\r\n      let uniqueStylesFromSelection:Set<[string, any]> = new Set();\r\n      let hasVertexCells = false;\r\n      let hasEdgeCells = false;\r\n      for (let i=0; i<cells.length; i++) {\r\n\r\n        //TODO: use styles based on selection this.props.graph.getStylesheet().style[\"text\"] etc.\r\n        const cellStyle = getCellStyleMapForCellShape(cells[i], this.props.graph.getStylesheet());\r\n        // beware of defaults with null as their default value like \"Word wrap\", they basically get replaced by default.xml every time the are set to null\r\n        uniqueStylesFromSelection = unionOfSet(uniqueStylesFromSelection, getStyleSetFromStyleMap(cellStyle));\r\n        if (cells[i].isVertex()) hasVertexCells= true;\r\n        if (cells[i].isEdge()) hasEdgeCells= true;\r\n      }\r\n      // when multiple cells are selected. Removes duplicate keys and gives random key, value pairs but each property is given\r\n      // on single select conversion without side effects\r\n      const styleMap = new Map(uniqueStylesFromSelection);\r\n      const defaultStyleConnector:Map<string, any> = new Map();\r\n      // used on edges, images and vertices\r\n      defaultStyleConnector.set(\"linePattern\", this.state.linePattern);\r\n      // for all types of cells\r\n      styleEditorOptions.addOptionToMap( styleEditorOptions.getLineTypeOptions()[0], defaultStyleConnector);\r\n      if (hasEdgeCells) {\r\n\r\n        // // available only for edges\r\n        styleEditorOptions.addOptionToMap( styleEditorOptions.getLineTypeOptions()[3], defaultStyleConnector);\r\n        //TODO: map name to value pairs of style constants in order to intialize drop down menu based on style saved in graph (e.g. dotted = STYLE_DASHED, & STYLE_DASH_PATTERN from StyleEditorOptions => values are the same as in StyleEditorOption)\r\n        defaultStyleConnector.set(\"lineConnection\", this.state.lineConnection);\r\n        defaultStyleConnector.set(\"edgeStyle\", this.state.edgeStyle);\r\n        defaultStyleConnector.set(\"lineSwitchArrows\", \"false\");\r\n        defaultStyleConnector.set(\"targetPoint\", 0);\r\n        defaultStyleConnector.set(\"sourcePoint\", 0);\r\n      }\r\n      if (hasVertexCells) {\r\n        styleMap.set(\"editData\", \"true\");\r\n        styleMap.set(\"copySize\", \"true\");\r\n        if (this.state.copiedSize !== null) {\r\n          styleMap.set(\"pasteSize\", \"true\");\r\n        }\r\n        styleMap.set(\"cellWidth\", 0 );\r\n        styleMap.set(\"cellHeight\", 0 );\r\n        styleMap.set(\"copyPosition\", \"true\");\r\n        if (this.state.copiedPosition !== null) {\r\n          styleMap.set(\"pastePosition\", \"true\");\r\n        }\r\n        // default positions to be pasted with selected positions later\r\n        styleMap.set(\"leftPosition\", 0);\r\n        styleMap.set(\"topPosition\", 0);\r\n      }\r\n      for (const key of defaultStyleConnector.keys()) {\r\n        if (!styleMap.has(key)) {\r\n          styleMap.set(key, defaultStyleConnector.get(key));\r\n        }\r\n      }\r\n\r\n      //FIXME: always add functional components in rendering function and not by setting styles. Beware of type specific properties\r\n      styleMap.set(\"toFront\", \"true\");\r\n      styleMap.set(\"toBack\", \"true\");\r\n      styleMap.set(\"clearWaypoints\", \"true\");\r\n\r\n      // styleMap.set(\"lineSwitchArrows\", \"false\");\r\n      styleMap.set(\"editStyle\", \"true\");\r\n      styleMap.set(\"copyStyle\", \"true\");\r\n      if (this.state.copiedStyle !== null) {\r\n        styleMap.set(\"pasteStyle\", \"true\");\r\n      }\r\n      styleMap.set(\"distributeHorizontal\", \"false\");\r\n      styleMap.set(\"distributeVertical\", \"false\");\r\n      styleMap.set(\"cellAlignment\", \"left\");\r\n      styleMap.set(\"group\", \"false\");\r\n      styleMap.set(\"ungroup\", \"false\");\r\n\r\n      return styleMap;\r\n    }\r\n\r\n    isComponentIncluded = (tabViewComponents:string[], vertexStyles:Map<string, any>, edgeStyles:Map<string, any> ) => {\r\n      // render devider only if component is present\r\n      return tabViewComponents.some((component) => (vertexStyles.has(component) || edgeStyles.has(component)));\r\n    }\r\n\r\n\r\n    getStyleOptionStyle = (optionCanditates:styleEditorOptions.styleEditorOption[], styleMap:Map<string, any>, defaultValue:styleEditorOptions.styleConstants) => {\r\n      const styleEditorOption = styleEditorOptions.getOptionKeyFromStyle(optionCanditates, styleMap);\r\n      return styleEditorOption.length ===1 ? styleEditorOption[0].style : defaultValue;\r\n    }\r\n\r\n    getStyleOptionStyleFromCorrespondingStyles = (optionCanditates:styleEditorOptions.styleEditorOption[], vertexStyles:Map<string, any>, edgeStyles:Map<string, any>, defaultValue:styleEditorOptions.styleConstants) => {\r\n      let styleEditorOption = styleEditorOptions.getOptionKeyFromStyle(optionCanditates, vertexStyles);\r\n      if (styleEditorOption.length ===1) {\r\n        return styleEditorOption[0].style;\r\n      } else {\r\n        styleEditorOption= styleEditorOptions.getOptionKeyFromStyle(optionCanditates, edgeStyles);\r\n      }\r\n      return styleEditorOption.length ===1 ? styleEditorOption[0].style : defaultValue;\r\n    }\r\n\r\n\r\n    renderNotIncludedList(availableComponents:Array<string>, vertexStyles:Map<any, any>, edgeStyles:Map<any, any>) {\r\n      return <TabPanel header={\"Not incl. GUI\"}>\r\n        Not included components:\r\n        {\r\n          availableComponents.filter((component) =>!(vertexStyles.has(component) || edgeStyles.has(component))).map((component) => {\r\n            return <div>+ &apos;{component}&apos;</div>;\r\n          })\r\n        }\r\n      </TabPanel>;\r\n    }\r\n\r\n    /**\r\n     * Show general render options when nothing is selected\r\n     * TODO: implement functionality\r\n     */\r\n     renderDiagramTab = () => {\r\n\r\n       return <TabPanel header='Diagram'>\r\n         <ScrollPanel style={{width: \"100%\", height: \"75vh\"}} className=\"custom-scrollbar\">\r\n           {/* <Button label=\"What should be rendered here?\" onClick={()=>{\r\n           console.log(diagramTabSections);\r\n         }} style={{margin: \"0.2rem\"}}/> */}\r\n           {getHelpInformation()}\r\n         </ScrollPanel>\r\n       </TabPanel>;\r\n     }\r\n\r\n     /**\r\n     * Render additional debugging options in a seperate TabPanel\r\n     */\r\n     renderDebugTab = () => {\r\n       //doesnt seem to update correctly => read directly from graph\r\n       const vertexCells = getVertexCells(this.props.graph.getSelectionCells());\r\n       const edgeCells = getEdgeCells(this.props.graph.getSelectionCells());\r\n       const connectableCells = getConnectedCells(this.props.graph.getSelectionCells());\r\n       const collapsedCells = getCollapsedCells(this.props.graph.getSelectionCells());\r\n\r\n       const vertexStyles = (vertexCells && vertexCells.length > 0) ? this.getStyles(vertexCells) : new Map();\r\n       const edgeStyles = (edgeCells && edgeCells.length > 0) ? this.getStyles(edgeCells) : new Map();\r\n\r\n       return <TabPanel header='DEBUG'>\r\n         <Button label=\"Log selected cells\" onClick={()=>{\r\n           console.log(vertexCells);\r\n           console.log(edgeCells);\r\n           console.log(connectableCells);\r\n           console.log(collapsedCells);\r\n         }} style={{margin: \"0.2rem\"}}/>\r\n         <Button label=\"Log Style\" onClick={()=>{\r\n           this.setState({currentStyle: this.props.graph.getSelectionCell().getStyle()});\r\n           console.log(this.props.graph.getSelectionCell().getStyle());\r\n           this.props.showEditStyleModal();\r\n         }} style={{margin: \"0.2rem\"}}/>\r\n         <Button label=\"Analyze selected Cells\" onClick={()=>{\r\n           console.log(\"VERTEX:\");\r\n           console.log(vertexStyles);\r\n           console.log(\"EDGE:\");\r\n           console.log(edgeStyles);\r\n         }} style={{margin: \"0.2rem\"}}/>\r\n         <Button label=\"Test debug line\" onClick={()=>{\r\n           const map = getStyleMap(vertexCells[0]);\r\n           const value = map.get(\"fillColor\");\r\n           console.log(value);\r\n           console.log(\"RGBA: \" + rgbaColorString(getRgba(value)!));\r\n         }} style={{margin: \"0.2rem\"}}/>\r\n         <Button label=\"Get default stylesheet\" onClick={()=>{\r\n           const currentStyleSheet = this.props.graph.getStylesheet();\r\n           console.log(\"Current default stylesheets loading xml\\n\", currentStyleSheet);\r\n         }} style={{margin: \"0.2rem\"}}/>\r\n         <Button label=\"Get default stylesheet Vertex\" onClick={()=>{\r\n           const currentStyleSheet = this.props.graph.getStylesheet().getDefaultVertexStyle();\r\n           console.log(\"Current default stylesheets Vertex loading xml\\n\", currentStyleSheet);\r\n         }} style={{margin: \"0.2rem\"}}/>\r\n         <Button label=\"Get default stylesheet Edges\" onClick={()=>{\r\n           const currentStyleSheet = this.props.graph.getStylesheet().getDefaultEdgeStyle();\r\n           console.log(\"Current default stylesheets Edges loading xml\\n\", currentStyleSheet);\r\n         }} style={{margin: \"0.2rem\"}}/>\r\n         <Button label=\"Get current stylesheet XML\" onClick={()=>{\r\n           const currentStyleSheet = encode(this.props.graph.getStylesheet());\r\n           console.log(\"Get current stylesheet XML\\n\", currentStyleSheet);\r\n         }} style={{margin: \"0.2rem\"}}/>\r\n         <Button label=\"Get current selection XML\" onClick={()=>{\r\n           const currentSelection = encode(this.props.graph.getSelectionCells());\r\n           console.log(\"Get current selection XML\\n\", currentSelection);\r\n         }} style={{margin: \"0.2rem\"}}/>\r\n         <Button label=\"Compute mxConstants\" onClick={()=>{\r\n           styleEditorOptions.getConstantsPerOption();\r\n         }} style={{margin: \"0.2rem\"}}/>\r\n       </TabPanel>;\r\n     }\r\n\r\n\r\n    renderMetadataTab = () => {\r\n      //TODO: create GUI depending on elements\r\n      const allCells = this.props.graph.getSelectionCells();\r\n      const isSomethingSelected = allCells.length && allCells.length > 0;\r\n      const vertexCells = getVertexCells(this.props.graph.getSelectionCells());\r\n\r\n      const selectedGroups = this.props.graph.getCellsForUngroup();\r\n      const isGroupSelected = selectedGroups && selectedGroups.length>0;\r\n\r\n      function scoreAlert(score:number, metric:string) {\r\n        (score > 0) ? alert(\"current \"+ metric + \": \" + score.toFixed(4)) : alert(\"no metadata detected\");\r\n      }\r\n\r\n      const generalButtons = <><Divider align=\"left\" type=\"solid\"> <b>General</b> </Divider>\r\n        <Button label=\"Select data provider\" onClick={()=>{\r\n        // no selection -> from whole graph\r\n        // no selection -> from whole graph\r\n          editorActions.selectPropertyType(this.props.graph, \"data_provider\", this.state.defaultMetadataJson);\r\n        }} style={{margin: \"0.2rem\"}}/>\r\n        <Button label=\"Select data store\" onClick={()=>{\r\n          editorActions.selectPropertyType(this.props.graph, \"data_store\", this.state.defaultMetadataJson);\r\n        }} style={{margin: \"0.2rem\"}}/>\r\n        <Button label=\"Compute graph score\" onClick={()=>{\r\n          const cells = this.props.graph.getModel().getChildCells(this.props.graph.getDefaultParent(), true, false);\r\n          // flatten grouped cells\r\n          const flattendCells = editorActions.getCellsWithTrustScores(this.props.graph, cells);\r\n          if (flattendCells.length > 0) {\r\n            scoreAlert(editorActions.evaluateEditData(this.props.graph, flattendCells, this.state.defaultMetadataJson), \"score\");\r\n          } else {\r\n            scoreAlert(0, \"score\");\r\n          }\r\n        }} style={{margin: \"0.2rem\"}}/>\r\n        <Button label=\"Colorize questionnaires in graph\" onClick={()=>{\r\n        // if two cells are grouped, a third as a root cell is introduced. Meta data can be set onto each node\r\n          const cells = this.props.graph.getModel().getChildCells(this.props.graph.getDefaultParent(), true, false);\r\n          //TODO: check which combinationis in group -> if distinct ones => colorize group as data_source, otherwise as corresponding source\r\n          // flatten grouped cells\r\n          const flattendCells = editorActions.getCellsWithAttribute(this.props.graph, cells, \"metadataType\");\r\n          editorActions.colorizeDataSources(this.props.graph, flattendCells);\r\n\r\n        }} style={{margin: \"0.2rem\"}}/></>;\r\n      const scoreButtons = <><Divider align=\"left\" type=\"solid\"> <b>Score</b> </Divider>\r\n        <Button label=\"Compute score of selection\" onClick={()=>{\r\n          // if two cells are grouped, a third as a root cell is introduced. Meta data can be set onto each node\r\n          const cells = this.props.graph.getSelectionCells();\r\n          // flatten grouped cells\r\n          const flattendCells = editorActions.getCellsWithTrustScores(this.props.graph, cells);\r\n          if (flattendCells.length > 0 ) {\r\n            scoreAlert(editorActions.evaluateEditData(this.props.graph, flattendCells, this.state.defaultMetadataJson), \"score\");\r\n          } else {\r\n            scoreAlert(0, \"score\");\r\n          }\r\n        }} style={{margin: \"0.2rem\"}}/>\r\n        <Button label=\"Get max points of selection\" onClick={()=>{\r\n          // if two cells are grouped, a third as a root cell is introduced. Meta data can be set onto each node\r\n          const cells = this.props.graph.getSelectionCells();\r\n          // flatten grouped cells\r\n          //If default is just applied without any selections or applying templates: current score = -1\r\n          const flattendCells = editorActions.getCellsWithTrustScores(this.props.graph, cells);\r\n          if (flattendCells.length > 0 ) {\r\n            scoreAlert(editorActions.editDataGetMaxSumOfPropertyPoints(this.props.graph, flattendCells, false, this.state.defaultMetadataJson), \"points\");\r\n          } else {\r\n            scoreAlert(0, \"points\");\r\n          }\r\n        }} style={{margin: \"0.2rem\"}}/>\r\n        <Button label=\"Get max points of of selected answers\" onClick={()=>{\r\n          // if two cells are grouped, a third as a root cell is introduced. Meta data can be set onto each node\r\n          const cells = this.props.graph.getSelectionCells();\r\n          // flatten grouped cells\r\n          //If default is just applied without any selections or applying templates: current score = -1\r\n          const flattendCells = editorActions.getCellsWithTrustScores(this.props.graph, cells);\r\n          if (flattendCells.length > 0 ) {\r\n            scoreAlert(editorActions.editDataGetMaxSumOfPropertyPoints(this.props.graph, flattendCells, true, this.state.defaultMetadataJson), \"points\");\r\n          } else {\r\n            scoreAlert(0, \"points\");\r\n          }\r\n        }} style={{margin: \"0.2rem\"}}/>\r\n      </>;\r\n      const questionnaireButtons = <><Divider align=\"left\" type=\"solid\"> <b>Questionnaire/Catalogue</b> </Divider>\r\n        <Button label=\"Colorize selected questionnaire sources \" onClick={()=>{\r\n          // if two cells are grouped, a third as a root cell is introduced. Meta data can be set onto each node\r\n          const cells = this.props.graph.getSelectionCells();\r\n          //TODO: check which combinationis in group -> if distinct ones => colorize group as data_source, otherwise as corresponding source\r\n          // flatten grouped cells\r\n          const flattendCells = editorActions.getCellsWithAttribute(this.props.graph, cells, \"metadataType\");\r\n          editorActions.colorizeDataSources(this.props.graph, flattendCells);\r\n        }} style={{margin: \"0.2rem\"}}/>\r\n        {/* Group cell schould not include a questionary since every group containing 1+ elements is a Data source*/}\r\n        {/* Questionary is applied to whole selection */}\r\n        {vertexCells.length > 0 && !isGroupSelected ?<Button label={\"Add/Update questionnaire/catalogue\"} onClick={()=>{\r\n          // fully filled out default template\r\n          const json = iotGuiUtils.getMetadataTemplates()[1].value;\r\n          this.editDataAndSave(this.props.graph.getSelectionCells(), json);\r\n          //TODO: add property editor here: load json/formular etc.\r\n          // <IoTProperty></IoTProperty>\r\n        }} style={{margin: \"0.2rem\"}}/> : <></>}\r\n        {<Button label=\"Remove questionnaire/catalogue data\" onClick={()=>{\r\n          const cells = this.props.graph.getSelectionCells();\r\n          const flattendCells = cells.flatMap( (cell) => editorActions.getChildren(this.props.graph, cell));\r\n          // fully filled out default template\r\n          const json = iotGuiUtils.getMetadataTemplates()[1].value;\r\n          // flattened cells for group support\r\n          this.removeDataAndSave(getVertexCells(flattendCells), json);\r\n          // this.editDataAndSave(this.props.graph.getSelectionCells(), undefined, false);\r\n          //TODO: add property editor here: load json/formular etc.\r\n          // <IoTProperty></IoTProperty>\r\n        }} style={{margin: \"0.2rem\"}}/>}\r\n        {<Button label=\"Remove complete metadata\" onClick={()=>{\r\n          const cells = this.props.graph.getSelectionCells();\r\n          const flattendCells = cells.flatMap( (cell) => editorActions.getChildren(this.props.graph, cell));\r\n          // save label and remove the rest\r\n          flattendCells.forEach((cell) => {\r\n            // filter for cells with xml values\r\n            // @ts-ignore\r\n            if (mx.mxUtils.isNode(cell.value)) {\r\n              let label = cell.getAttribute(\"label\", \"\");\r\n              label = editorActions.updateScoreInLabel(label, \"\").trim();\r\n              //overwrite xml with value\r\n              cell.setValue(label);\r\n              // save change and update graph model + view\r\n              this.props.graph.getModel().setValue( cell, label);\r\n            }\r\n          });\r\n        }} style={{margin: \"0.2rem\"}}/>}\r\n      </>;\r\n      const onSelectionElements = <>\r\n        {questionnaireButtons}\r\n        {scoreButtons}\r\n      </>;\r\n      return <TabPanel header='Metadata'>\r\n        <ScrollPanel style={{width: \"100%\", height: \"75vh\"}} className=\"custom-scrollbar\">\r\n          {generalButtons}\r\n          {isSomethingSelected ? onSelectionElements : <></>}\r\n        </ScrollPanel>\r\n      </TabPanel>;\r\n    }\r\n\r\n    renderElements = () => {\r\n      //doesnt seem to update correctly => read directly from graph\r\n      const selectedCells = this.props.graph.getSelectionCells();\r\n      const vertexCells = getVertexCells(this.props.graph.getSelectionCells());\r\n      const edgeCells = getEdgeCells(this.props.graph.getSelectionCells());\r\n      const connectableCells = getConnectedCells(this.props.graph.getSelectionCells());\r\n      const collapsedCells = getCollapsedCells(this.props.graph.getSelectionCells());\r\n\r\n\r\n      // TODO: use parsed XML file e.g. with mxUtils or in order to get cell properties like in grapheditor -> could be done with decoder, but default.xml seems to be buggy\r\n      const vertexStyles = (vertexCells && vertexCells.length > 0) ? this.getStyles(vertexCells) : new Map();\r\n      const edgeStyles = (edgeCells && edgeCells.length > 0) ? this.getStyles(edgeCells) : new Map();\r\n      const allStyleAttributes = getStyleAttributes(this.props.graph.getSelectionCells());\r\n      const allShapes = allStyleAttributes.get(\"shape\");\r\n\r\n      const isSelectionGrouped = this.props.graph.getModel().getChildCount(this.props.graph.getSelectionCell()) > 0;\r\n\r\n\r\n      console.log(selectedCells);\r\n      console.log(vertexCells);\r\n      console.log(edgeCells);\r\n      console.log(connectableCells);\r\n      console.log(collapsedCells);\r\n\r\n      //TODO: always add functional components in rendering function and not by setting styles.\r\n      // Beware of type specific properties: currently they are inside of the components like \"edgeCells.length>0\" e.g.\r\n      const functionalComponents = new Map();\r\n      functionalComponents.set(\"Always\", [\r\n        \"toFront\",\r\n        \"toBack\",\r\n        \"clearWaypoints\",\r\n        \"editStyle\",\r\n        \"distributeHorizontal\",\r\n        \"distributeVertical\",\r\n        // requires selection of mulitple elements\r\n        \"cellAlignment\",\r\n        \"group\",\r\n        \"ungroup\",\r\n      ]);\r\n      functionalComponents.set(\"Vertex\", [\r\n        \"editData\",\r\n        \"copySize\",\r\n        \"pasteSize\",\r\n        \"copyPosition\",\r\n        \"pastePosition\",\r\n      ]);\r\n      functionalComponents.set(\"Edge\", [\"lineSwitchArrows\"]);\r\n\r\n      //FIXME: type tabpanel object\r\n      // contains the hierarchical order of each element beginning with penal name -> containing deviders and their individial GUI elements\r\n      const tabview = [];\r\n\r\n      //TODO: REFACTOR check if some devider are shape based and exclude them from sections if specific shapes are selected. Or add shape specific tabViewComponents instead of only names\r\n      tabview.push(this.renderTabpanelStyle(allShapes, vertexCells, edgeCells));\r\n      tabview.push(this.renderTabpanelText(allShapes));\r\n      tabview.push(this.renderTabpanelArrange(allShapes, this.props.graph.getSelectionCells(), isSelectionGrouped));\r\n\r\n      // TODO: use Stylenames as keys (mxConstants)\r\n      // TODO: review buttons style vs vertex (or vertex image)\r\n      const tabViewComponents:Map<string, any> = new Map();\r\n      // Style\r\n      //TODO: In including/excluding there should not exist a shape xy in the whole selection, not the grouped one.\r\n      this.setTabViewComponents(tabViewComponents, allShapes, vertexStyles, edgeStyles, vertexCells, edgeCells, isSelectionGrouped);\r\n      // FIXME: Update each color picker, when cell is selected in graph according to cell color\r\n      // FIXME: Line functions intersect each other resulting in unpredictable behaviour (could be a side effect of not synching functions to graph)\r\n      return this.renderTabview(selectedCells, tabview, vertexStyles, edgeStyles, tabViewComponents);\r\n    }\r\n\r\n    private renderTabpanelStyle(allShapes: Set<any> | undefined, vertexCells: mxCell[], edgeCells:mxCell[], tabpanelName:string = \"Style\") {\r\n      let sections:any[] = [];\r\n      if ((allShapes?.has(\"swimlane\")) || (allShapes?.has(\"image\"))) {\r\n        //FIXME: type section\r\n        sections = [\r\n          {deviderLabel: \"Other\", tabviewComponents: [\"imageBorder\", \"swimlaneFillColor\"]},\r\n        ];\r\n        if (vertexCells && vertexCells.length >0 ) {\r\n          sections.push({deviderLabel: \"Cells\", tabviewComponents: [\"fillColor\", \"gradientColor\", \"gradientDirection\"]});\r\n        }\r\n        sections.push({deviderLabel: \"Line\", tabviewComponents: [\"strokeColor\", \"linePattern\", \"strokeWidth\", \"lineConnection\", \"edgeStyle\", \"startArrow\", \"endArrow\", \"lineSwitchArrows\", \"perimeterSpacing\"]});\r\n\r\n        if (!(allShapes?.has(\"image\"))) {\r\n          sections.push({deviderLabel: \"Cell Specific\", tabviewComponents: [\"rounded\"]});\r\n        }\r\n        sections.push({deviderLabel: \"General\", tabviewComponents: [\"shadow\"]});\r\n      } else {\r\n        if (vertexCells && vertexCells.length >0 ) {\r\n          sections.push({deviderLabel: \"Cells\", tabviewComponents: [\"fillColor\", \"gradientColor\", \"gradientDirection\"]});\r\n        }\r\n        sections.push({deviderLabel: \"Line\", tabviewComponents: [\"strokeColor\", \"linePattern\", \"strokeWidth\", \"lineConnection\", \"edgeStyle\", \"startArrow\", \"endArrow\", \"lineSwitchArrows\", \"perimeterSpacing\"]});\r\n        //TODO: refactor rendering: do not  if only edge or image is selected\r\n        sections.push({deviderLabel: \"Cell Specific\", tabviewComponents: [\"rounded\"]});\r\n        //TODO: refactor rendering: do not if only an image is selected\r\n        sections.push({deviderLabel: \"General\", tabviewComponents: [\"shadow\"]});\r\n\r\n      }\r\n      sections.push({deviderLabel: \"Misc\", tabviewComponents: [\"editStyle\", \"copyStyle\", \"pasteStyle\"]});\r\n      return {tabpanel: tabpanelName, sections: sections};\r\n    }\r\n\r\n    private renderTabpanelText(allShapes: Set<any> | undefined, tabpanelName:string = \"Text\") {\r\n      const sections = [{deviderLabel: \"Font\", tabviewComponents: [\"fontFamily\", \"fontSize\", \"fontStyle\", \"horizontal\"]},\r\n        {deviderLabel: \"Color\", tabviewComponents: [\"fontColor\", \"labelBackgroundColor\", \"labelBorderColor\"]},\r\n        {deviderLabel: \"Alignment\", tabviewComponents: [\"textDirection\", \"whiteSpace\", \"labelPosition\", \"verticalLabelPosition\", \"align\"]},\r\n        {deviderLabel: \"Spacing\", tabviewComponents: [\"spacing\", \"spacingTop\", \"spacingLeft\", \"spacingRight\", \"spacingBottom\"]},\r\n      ];\r\n      //TODO: Adding Text to images -> default case Text on the buttom of the image as footer\r\n      return {tabpanel: tabpanelName, sections: sections};\r\n    }\r\n\r\n    private renderTabpanelArrange(allShapes: Set<any> | undefined, selectedCells:mxCell[], isSelectionGrouped:boolean, tabpanelName:string = \"Arrange\") {\r\n      const vertexCells = getVertexCells(selectedCells);\r\n\r\n      const sections = [\r\n        {deviderLabel: \"Other\", tabviewComponents: [\"toFront\", \"toBack\", \"clearWaypoints\", \"editData\"]},\r\n        {deviderLabel: \"Size\", tabviewComponents: [\"copySize\", \"pasteSize\", \"cellWidth\", \"cellHeight\", \"aspect\"]},\r\n        {deviderLabel: \"Position\", tabviewComponents: [\"position\", \"copyPosition\", \"pastePosition\", \"leftPosition\", \"topPosition\"]},\r\n        {deviderLabel: \"Start\", tabviewComponents: [\"startPosition\"]},\r\n        {deviderLabel: \"End\", tabviewComponents: [\"endPosition\"]},\r\n        {deviderLabel: \"Angle\", tabviewComponents: [\"rotation\", \"rotationAngleButton\"]},\r\n      ];\r\n      if ((vertexCells && vertexCells.length > 1)) {\r\n        sections.push({deviderLabel: \"Align\", tabviewComponents: [\"cellAlignment\"]});\r\n        sections.push({deviderLabel: \"Distribute\", tabviewComponents: [\"distributeHorizontal\", \"distributeVertical\"]});\r\n      }\r\n      if ( isSelectionGrouped || selectedCells.length > 1) {\r\n        sections.push({deviderLabel: \"Groups\", tabviewComponents: [\"group\", \"ungroup\"]});\r\n      }\r\n      sections.push({deviderLabel: \"Flip\", tabviewComponents: [\"flipH\", \"flipV\"]});\r\n      //TODO: End (target point) slider is missing if one edge is selected. If edge is onto vertex also missing Start (source point) slider\r\n      sections.push({deviderLabel: \"Edge Position\", tabviewComponents: [\"sourcePoint\", \"targetPoint\"]});\r\n      return {tabpanel: tabpanelName, sections: sections};\r\n    }\r\n\r\n    /**\r\n     * Create GUI elements for each style attribute\r\n     * @param tabViewComponents map containing all GUI elements\r\n     * @param allShapes selected shapes of cells\r\n     * @param vertexStyles collection of all possible vertex style attributes\r\n     * @param edgeStyles  collection of all possible edge style attributes\r\n     * @param vertexCells  collection of all possible vertex cells\r\n     * @param edgeCells   collection of all possible edge cells\r\n     * @param isSelectionGrouped defines if the currently selected element is grouped\r\n     */\r\n    private setTabViewComponents(tabViewComponents: Map<string, any>, allShapes: Set<any> | undefined, vertexStyles: Map<any, any>, edgeStyles: Map<any, any>, vertexCells: mxCell[], edgeCells: mxCell[], isSelectionGrouped: boolean) {\r\n      const currentCellStyleMap = getStyleMapFromCellStyleString(this.props.graph.getSelectionCell()?.getStyle());\r\n      const isGradientUsed = vertexStyles.get(\"gradientColor\") && vertexStyles.get(\"gradientColor\") !== \"none\"? true : false;\r\n      const isFillColorUsed = vertexStyles.get(\"fillColor\") && vertexStyles.get(\"fillColor\") !== \"none\"? true : false;\r\n\r\n      tabViewComponents.set(\"strokeColor\", !(allShapes?.has(\"image\")) ? <ElementColorPicker\r\n        defaultColor={getRgba(getFromCorrespondingMap(vertexStyles, edgeStyles, \"strokeColor\"))!}\r\n        color={getRgba(currentCellStyleMap.get(\"strokeColor\"), false)}\r\n        handleColorChange={(e: RGBColor) => {\r\n          this.handleLineColorChange(e);\r\n          styleEditorActions.setStrokeColor(this.props.graph, e);\r\n        } }\r\n        handleCheckboxChange={(isChecked) => {\r\n\r\n          if (!isChecked) {\r\n            styleEditorActions.setStrokeColor(this.props.graph);\r\n          } else if (isChecked) {\r\n            styleEditorActions.setStrokeColor(this.props.graph, getRgba(getFromCorrespondingMap(vertexStyles, edgeStyles, \"strokeColor\"))!);\r\n          }\r\n\r\n        }} label={\"Line\"} labelWidth={\"50px\"} /> : <></>);\r\n\r\n      tabViewComponents.set(\"swimlaneFillColor\", (allShapes?.has(\"swimlane\")) ? <ElementColorPicker defaultColor={getRgba(edgeStyles.get(\"swimlaneFillColor\"))}\r\n        color={getRgba(currentCellStyleMap.get(\"swimlaneFillColor\"), false)}\r\n        handleColorChange={(e) => {\r\n          this.handleswimlaneFillColorChange(e); styleEditorActions.setLaneColor(this.props.graph, e);\r\n        } } handleCheckboxChange={(isChecked) => {\r\n          if (!isChecked) {\r\n            styleEditorActions.setLaneColor(this.props.graph);\r\n          } else if (isChecked) {\r\n            styleEditorActions.setLaneColor(this.props.graph, getRgba(edgeStyles.get(\"swimlaneFillColor\")));\r\n          }\r\n        }}label={\"Lane\"} labelWidth={\"50px\"} /> : <> </>);\r\n\r\n      tabViewComponents.set(\"imageBorder\", (allShapes?.has(\"image\")) ? <ElementColorPicker defaultColor={getRgba(vertexStyles.get(\"imageBorder\"))}\r\n        color={getRgba(currentCellStyleMap.get(\"imageBorder\"), false)}\r\n        handleColorChange={(e) => {\r\n          this.handleimageBorderChange(e); styleEditorActions.setImageBorder(this.props.graph, e);\r\n        } } handleCheckboxChange={(isChecked) => {\r\n\r\n          if (!isChecked) {\r\n            styleEditorActions.setImageBorder(this.props.graph);\r\n          } else if (isChecked) {\r\n            styleEditorActions.setImageBorder(this.props.graph, getRgba(vertexStyles.get(\"imageBorder\")));\r\n          }\r\n        }}label={\"Image Border\"} labelWidth={\"50px\"} /> : <> </>);\r\n\r\n      tabViewComponents.set(\"strokeWidth\", <ElementInputNumber label=\"Line width\" sharedId=\"strokeWidth\" value={getFromCorrespondingMap(vertexStyles, edgeStyles, \"strokeWidth\")} onChange={(e) => {\r\n        this.setState({strokeWidth: e.value}); styleEditorActions.setStrokeWidth(this.props.graph, e.value);\r\n      } } min={0}></ElementInputNumber>);\r\n      // tabViewComponents.set('strokeWidth', <ElementInputNumber label=\"Line width\" sharedId=\"strokeWidth\" value={this.state.strokeWidth} onChange={(e) =>{\r\n      //   this.setState({strokeWidth: e.value}); styleEditorActions.setStrokeWidth(this.props.graph, e.value);\r\n      // }} min={0}></ElementInputNumber>);\r\n\r\n      tabViewComponents.set(\"linePattern\", <><div>Line pattern</div><Dropdown value={this.getStyleOptionStyle(styleEditorOptions.getGeneralLineTypeOptions(), edgeStyles.size > 0 ? edgeStyles : vertexStyles, this.state.linePattern)} options={styleEditorOptions.getGeneralLineTypeOptions()} onChange={(e) => {\r\n        this.setState({linePattern: e.value}); styleEditorActions.setStyle(this.props.graph, e.value);\r\n      } } optionLabel=\"name\" optionValue=\"style\" placeholder=\"Line Pattern\" /></>);\r\n\r\n      tabViewComponents.set(\"lineConnection\", <><div>Connection Type</div><Dropdown value={this.getStyleOptionStyle(styleEditorOptions.getConnectionStyleOptions(), edgeStyles, this.state.lineConnection)} options={styleEditorOptions.getConnectionStyleOptions()} onChange={(e) => {\r\n        this.setState({lineConnection: e.value}); styleEditorActions.setStyle(this.props.graph, e.value);\r\n      } } optionLabel=\"name\" optionValue=\"style\" placeholder=\"Connection Type\" /></>);\r\n\r\n      tabViewComponents.set(\"edgeStyle\", <><div>Waypoints</div> <Dropdown value={this.getStyleOptionStyle(styleEditorOptions.getWaypointStyleOptions(), edgeStyles, this.state.edgeStyle)} options={styleEditorOptions.getWaypointStyleOptions()} onChange={(e) => {\r\n        this.setState({edgeStyle: e.value}); styleEditorActions.setStyle(this.props.graph, e.value);\r\n      } } optionLabel=\"name\" optionValue=\"style\" placeholder=\"Waypoint styles\" /></>);\r\n\r\n      tabViewComponents.set(\"fillColor\", (vertexCells && vertexCells.length > 0) ? <ElementColorPicker defaultColor={getRgba(vertexStyles.get(\"fillColor\"))!}\r\n        color={getRgba(currentCellStyleMap.get(\"fillColor\"), false)} handleColorChange={(e: RGBColor) => {\r\n          this.handleFillColorChange(e);\r\n          styleEditorActions.fill(this.props.graph, e, isGradientUsed);\r\n        } } handleCheckboxChange={(isChecked) => {\r\n          if (!isChecked) {\r\n            styleEditorActions.fill(this.props.graph);\r\n          } else if (isChecked) {\r\n            styleEditorActions.fill(this.props.graph, getRgba(vertexStyles.get(\"fillColor\"))!);\r\n          }\r\n        }} label={\"Fill\"} labelWidth={\"50px\"} />: <></>);\r\n\r\n      tabViewComponents.set(\"gradientColor\", (vertexCells && vertexCells.length > 0) ? <ElementColorPicker defaultColor={getRgba(vertexStyles.get(\"gradientColor\"))!}\r\n        color={getRgba(currentCellStyleMap.get(\"gradientColor\"), false)}\r\n        handleColorChange={(e) => {\r\n        // if fillcolor already set, convert it to hex values (gradient only works with hex)\r\n          if (isFillColorUsed) {\r\n            const fillColor = getRgba(vertexStyles.get(\"fillColor\"))!;\r\n            this.handleFillColorChange(fillColor);\r\n            styleEditorActions.fill(this.props.graph, fillColor, isGradientUsed);\r\n          }\r\n          this.handleGradientColorChange(e);\r\n          styleEditorActions.setGradientColor(this.props.graph, e);\r\n        } } handleCheckboxChange={(isChecked) => {\r\n\r\n          if (!isChecked) {\r\n            styleEditorActions.setGradientColor(this.props.graph);\r\n          } else if (isChecked) {\r\n            const gradientDefaultColor = getRgba(vertexStyles.get(\"gradientColor\"))!;\r\n            if (isFillColorUsed) {\r\n              const fillColor = getRgba(vertexStyles.get(\"fillColor\"))!;\r\n              this.handleFillColorChange(fillColor);\r\n              // use hex values since gradient will be used after the cehckbox\r\n              styleEditorActions.fill(this.props.graph, fillColor, true);\r\n            }\r\n            this.handleGradientColorChange(gradientDefaultColor);\r\n            styleEditorActions.setGradientColor(this.props.graph, gradientDefaultColor);\r\n          }\r\n        }} label={\"Gradient\"} labelWidth={\"50px\"} />: <></>);\r\n\r\n      tabViewComponents.set(\"gradientDirection\", <><div>Gradient Direction</div> <Dropdown value={ {keys: [mx.mxConstants.STYLE_DIRECTION], values: [getFromCorrespondingMap(vertexStyles, edgeStyles, \"direction\")]}} options={styleEditorOptions.getDirectionOptions()} onChange={(e) => {\r\n        this.setState({gradientDirection: e.value}); styleEditorActions.setStyle(this.props.graph, e.value);\r\n      } } optionLabel=\"name\" optionValue=\"style\" placeholder=\"Gradient Direction\" /></>);\r\n\r\n      tabViewComponents.set(\"perimeterSpacing\", <ElementInputNumber label=\"Perimeter\" sharedId=\"perimeterSpacing\" value={getFromCorrespondingMap(vertexStyles, edgeStyles, \"perimeterSpacing\")} onChange={(e) => {\r\n        this.setState({perimeterSpacing: e.value}); styleEditorActions.setPerimeter(this.props.graph, e.value);\r\n      } } ></ElementInputNumber>);\r\n\r\n      tabViewComponents.set(\"shadow\", <ElementCheckbox label=\" Shadow\" sharedId=\"shadow\" value={getFromCorrespondingMap(vertexStyles, edgeStyles, \"shadow\") === \"1\" ? true : false} onChange={(e) => {\r\n        styleEditorActions.setStyleShadow(this.props.graph, e.checked);\r\n      } } />);\r\n\r\n      tabViewComponents.set(\"rounded\", (vertexCells && vertexCells.length > 0 && !(allShapes?.has(\"image\"))) ? <ElementCheckbox label=\" Rounded\" sharedId=\"rounded\" value={vertexStyles.get(\"rounded\") === \"1\" ? true : false} onChange={(e) => {\r\n        styleEditorActions.setStyleRounded(this.props.graph, e.checked);\r\n      } } /> : <></>);\r\n\r\n      tabViewComponents.set(\"editStyle\", <><Button label=\"Edit Style\" onClick={() => {\r\n        this.props.showEditStyleModal();\r\n      } } style={{margin: \"0.2rem\"}} />\r\n      </>,\r\n      );\r\n      tabViewComponents.set(\"copyStyle\", <Button label=\"Copy Style\" onClick={() => {\r\n        this.setState({copiedStyle: this.props.graph.getSelectionCell().getStyle()});\r\n      } } style={{margin: \"0.2rem\"}} />);\r\n      tabViewComponents.set(\"pasteStyle\", <Button label=\"Paste Style\" onClick={() => {\r\n        this.state.copiedStyle !== null ? this.props.graph.setCellStyle(this.state.copiedStyle) : console.error(\"no Style set to use pasteStyle onto.\");\r\n\r\n      } } style={{margin: \"0.2rem\"}} />);\r\n      tabViewComponents.set(\"startArrow\", <><div>Start Arrow</div> <Dropdown value={edgeStyles.get(\"startArrow\")} options={styleEditorOptions.getArrowTypeOptions()} onChange={(e) => {\r\n        this.setState({startArrow: e.value.code}); styleEditorActions.setLineStart(this.props.graph, e.value.code);\r\n      } } optionLabel=\"name\" placeholder=\"Start Arrow\" editable /></>);\r\n      tabViewComponents.set(\"endArrow\", <><div>End Arrow</div> <Dropdown value={edgeStyles.get(\"endArrow\")} options={styleEditorOptions.getArrowTypeOptions()} onChange={(e) => {\r\n        this.setState({endArrow: e.value.code}); styleEditorActions.setLineEnd(this.props.graph, e.value.code);\r\n      } } optionLabel=\"name\" placeholder=\"End Arrow\" editable /></>);\r\n      //FIXME: onclick on preadded lines applies default waypoint style onto them even if style doesn't get set.\r\n      //Since defaults are added automatically if not present and if they do not match. (is default xml loaded before adding vertex? style doesnt seem to be default)\r\n      // Seems to be an asynch error. When graph is loaded slowly it doesn't appear. Properties are set directly\r\n      // newly loaded arrows dont receive this error only preloaded ones\r\n      tabViewComponents.set(\"lineSwitchArrows\", edgeCells.length > 0 ? <Button label=\"Switch Arrows\" style={{margin: \"0.2rem\"}} onClick={() => {\r\n        const startArrow = edgeStyles.get(\"startArrow\");\r\n        const endArrow = edgeStyles.get(\"endArrow\");\r\n        styleEditorActions.reverseLineArrows(this.props.graph, startArrow, endArrow);\r\n        this.setState({startArrow: endArrow});\r\n        this.setState({endArrow: startArrow});\r\n      } } /> : <></>);\r\n      //     // TEXT\r\n      tabViewComponents.set(\"fontColor\", <ElementColorPicker defaultColor={getRgba(getFromCorrespondingMap(vertexStyles, edgeStyles, \"fontColor\"))}\r\n        color={getRgba(currentCellStyleMap.get(\"fontColor\"), false)}\r\n        handleColorChange={(e) => {\r\n          this.handleFontColorChange(e); styleEditorActions.setFontColor(this.props.graph, e);\r\n        } } handleCheckboxChange={(isChecked) => {\r\n          if (!isChecked) {\r\n            styleEditorActions.setFontColor(this.props.graph);\r\n          } else if (isChecked) {\r\n            styleEditorActions.setFontColor(this.props.graph, getRgba(getFromCorrespondingMap(vertexStyles, edgeStyles, \"fontColor\")));\r\n          }\r\n        }} label={\"Font\"} labelWidth={\"50px\"} />);\r\n\r\n      tabViewComponents.set(\"labelBackgroundColor\", <ElementColorPicker defaultColor={getRgba(getFromCorrespondingMap(vertexStyles, edgeStyles, \"labelBackgroundColor\"))}\r\n        color={getRgba(currentCellStyleMap.get(\"labelBackgroundColor\"), false)}\r\n        handleColorChange={(e) => {\r\n          this.handlelabelBackgroundColorChange(e); styleEditorActions.setLabelBackgroundColor(this.props.graph, e);\r\n        } } handleCheckboxChange={(isChecked) => {\r\n\r\n          if (!isChecked) {\r\n            styleEditorActions.setLabelBackgroundColor(this.props.graph);\r\n          } else if (isChecked) {\r\n            styleEditorActions.setLabelBackgroundColor(this.props.graph, getRgba(getFromCorrespondingMap(vertexStyles, edgeStyles, \"labelBackgroundColor\")));\r\n          }\r\n\r\n        }} label={\"Background\"} labelWidth={\"50px\"} />);\r\n      tabViewComponents.set(\"labelBorderColor\", <ElementColorPicker defaultColor={getRgba(getFromCorrespondingMap(vertexStyles, edgeStyles, \"labelBorderColor\"))}\r\n        color={getRgba(currentCellStyleMap.get(\"labelBorderColor\"), false)}\r\n        handleColorChange={(e) => {\r\n          this.handlelabelBorderColorChange(e); styleEditorActions.setLabelBorderColor(this.props.graph, e);\r\n        } } handleCheckboxChange={(isChecked) => {\r\n\r\n          if (!isChecked) {\r\n            styleEditorActions.setLabelBorderColor(this.props.graph);\r\n          } else if (isChecked) {\r\n            styleEditorActions.setLabelBorderColor(this.props.graph, getRgba(getFromCorrespondingMap(vertexStyles, edgeStyles, \"labelBorderColor\")));\r\n          }\r\n        }} label={\"Border\"} labelWidth={\"50px\"} />);\r\n      //     tabViewComponents.set('isFilled',\r\n      tabViewComponents.set(\"fontSize\", <ElementInputNumber label=\"Size\" sharedId=\"Fontsize\" value={getFromCorrespondingMap(vertexStyles, edgeStyles, \"fontSize\")} onChange={(e) => {\r\n        this.setState({fontSize: e.value}); styleEditorActions.setFontsize(this.props.graph, e.value);\r\n      } } min={0}></ElementInputNumber>);\r\n      tabViewComponents.set(\"fontFamily\", <><div>Font</div> <Dropdown value={getFromCorrespondingMap(vertexStyles, edgeStyles, \"fontFamily\")} options={styleEditorOptions.getFontFamiliyOptions()} onChange={(e) => {\r\n        this.setState({fontFamily: e.value.code}); styleEditorActions.setFontFamiliy(this.props.graph, e.value.code);\r\n      } } optionLabel=\"name\" placeholder=\"Select a Font\" editable /></>);\r\n      tabViewComponents.set(\"textDirection\", <><div>Writing Direction</div><Dropdown value={{keys: [mx.mxConstants.STYLE_TEXT_DIRECTION], values: [getFromCorrespondingMap(vertexStyles, edgeStyles, \"textDirection\")]}} options={styleEditorOptions.getLabelWritingDirectionOptions()} onChange={(e) => {\r\n        this.setState({textDirection: e.value}); styleEditorActions.setStyle(this.props.graph, e.value);\r\n      } } optionLabel=\"name\" optionValue=\"style\" placeholder=\"Writing Direction\" /></>);\r\n      // requires word wrap to remain text inside cell\r\n      tabViewComponents.set(\"align\", <><div>Text alignment</div><Dropdown value={{keys: [mx.mxConstants.STYLE_ALIGN], values: [getFromCorrespondingMap(vertexStyles, edgeStyles, \"align\")]}} options={styleEditorOptions.getTextAlignmentOptions()} onChange={(e) => {\r\n        this.setState({textLayoutDirection: e.value}); styleEditorActions.setStyle(this.props.graph, e.value);\r\n      } } optionLabel=\"name\" optionValue=\"style\" placeholder=\"Text alignment\" /></>);\r\n      tabViewComponents.set(\"spacing\", this.state.spacingOptions.map((option, index) => <ElementInputNumber label={option.name} sharedId={toCamelCase(\"spacing \" + option.name)} value={option.style.values[0]!} onChange={(e) => this.updateSpacingOptionElement(index, e.value)}></ElementInputNumber>));\r\n      tabViewComponents.set(\"fontStyle\", styleEditorOptions.getFontEditingOptions().map((option, index) => <Button label={option.name} onClick={() => {\r\n        styleEditorActions.toggleFontStyle(this.props.graph, option.style.key, option.style.value); this.setState({currentEditingOption: this.state.currentEditingOption ? (this.state.currentEditingOption & option.style.value) : this.state.currentEditingOption});\r\n      } } style={{margin: \"0.2rem\"}} />));\r\n      tabViewComponents.set(\"whiteSpace\", <ElementCheckbox label=\" Word Wrap\" sharedId=\"whiteSpaceToggle\" value={getFromCorrespondingMap(vertexStyles, edgeStyles, \"whiteSpace\") === \"wrap\" ? true : false} onChange={(e) => {\r\n        this.setState({whiteSpace: e.checked}); styleEditorActions.toogleWordWrap(this.props.graph, e.checked);\r\n      } } />);\r\n      // TODO: add \"formatted Text\" button -> enable edited text inside box\r\n      tabViewComponents.set(\"horizontal\", <ElementCheckbox label=\" Align Text Horizontal\" sharedId=\"checktextRotationVertical\" value={getFromCorrespondingMap(vertexStyles, edgeStyles, \"horizontal\")} onChange={(e) => {\r\n        this.setState({horizontal: e.checked}); styleEditorActions.toogleLabelRotation(this.props.graph, e.checked);\r\n      } } />);\r\n      //TODO: add Text Editor UI: \"Font style actions\" in original code. Here and only open it when this.props.graph.isEditing\r\n      //TODO: switch options in tabview when in editing modus\r\n      // ARRANGE\r\n      tabViewComponents.set(\"toFront\", <Button label=\"To Front\" onClick={() => {\r\n        editorActions.selectionToFront(this.props.graph);\r\n      } } style={{margin: \"0.2rem\"}} />);\r\n      tabViewComponents.set(\"toBack\", <Button label=\"To Back\" onClick={() => {\r\n        editorActions.selectionToBack(this.props.graph);\r\n      } } style={{margin: \"0.2rem\"}} />);\r\n      tabViewComponents.set(\"clearWaypoints\", <Button label=\"Clear Waypoints\" onClick={() => {\r\n        editorActions.clearAllWaypoints(this.props.graph);\r\n      } } style={{margin: \"0.2rem\"}} />);\r\n      // original code in Dialogs.js. var EditDataDialog = function(ui, cell)\r\n      // called from EditorUi: EditorUi.prototype.showDataDialog = function(cell)\r\n      // open question: this is designed for a single cell. So the group seems to save its data in the bounding cell around the individual cells.\r\n      tabViewComponents.set(\"editData\", <>\r\n        <Button label=\"Edit Data\" onClick={() => {\r\n          //TODO: add selection for metadata from previous defined properties: dropdown e.g. to load an available json -> save new Property through metadata tab (import etc.)\r\n          // default for test. TODO: open importer for json here. (finished json from server e.g. iiot_data_store_quality_characteristics.json)\r\n          this.editDataAndSave(this.props.graph.getSelectionCells());\r\n        } } style={{margin: \"0.2rem\"}} /></>);\r\n      tabViewComponents.set(\"copySize\", <Button label=\"copy size\" onClick={() => {\r\n\r\n        this.setState({copiedSize: editorActions.getCellScale(this.props.graph, this.props.graph.getSelectionCell())});\r\n      } } style={{margin: \"0.2rem\"}} />);\r\n      tabViewComponents.set(\"pasteSize\", <Button label=\"paste size\" onClick={() => {\r\n      this.state.copiedSize !== null ? editorActions.setCellScale(this.props.graph, this.props.graph.getSelectionCells(), this.state.copiedSize) : console.error(\"no size set to use pasteSize onto.\");\r\n\r\n      } } style={{margin: \"0.2rem\"}} />);\r\n      //FIXME: scaling seems to relate to group in diagrams.net, but here and in grapheditor example it doesn't, contain positions of children\r\n      tabViewComponents.set(\"cellWidth\",\r\n          <ElementInputNumber label=\"Size width\" sharedId=\"cellWidth\" value={editorActions.getCellScale(this.props.graph, this.props.graph.getSelectionCell())?.x} onChange={(e) => {\r\n            const cells = this.props.graph.getSelectionCells();\r\n            cells.forEach((cell) => {\r\n              if (vertexStyles.get(\"aspect\") === \"fixed\") {\r\n\r\n                const geo = this.props.graph.getModel().getGeometry(cell);\r\n\r\n                // New scale calculation: yNew = xNew * (y / x).\r\n                const x = geo.width;\r\n                const y = geo.height;\r\n                const xNew = e.value;\r\n                const yNew = xNew * (y / x);\r\n\r\n                // calculate scaling ratio (horizontal and vertical)\r\n                let sx = (x != 0) ? xNew / x : 1;\r\n                let sy = (y != 0) ? yNew / y : 1;\r\n                // fixed aspect ratio\r\n                sy = sx = Math.min(sx, sy);\r\n\r\n                editorActions.setCellScale(this.props.graph, [cell], new mx.mxPoint(x * sx, y * sy));\r\n              } else {\r\n                const pos = new mx.mxPoint(e.value, editorActions.getCellScale(this.props.graph, cell)!.y);\r\n                editorActions.setCellScale(this.props.graph, [cell], pos);\r\n              }\r\n\r\n            });\r\n\r\n\r\n          } } min={0} minFractionDigits={2}></ElementInputNumber>);\r\n\r\n      tabViewComponents.set(\"cellHeight\",\r\n          <ElementInputNumber label=\"Size height\" sharedId=\"cellHeight\" value={editorActions.getCellScale(this.props.graph, this.props.graph.getSelectionCell())?.y} onChange={(e) => {\r\n            const cells = this.props.graph.getSelectionCells();\r\n            cells.forEach((cell) => {\r\n              // New scale calculation: xNew = yNew * (x / y)\r\n              if (vertexStyles.get(\"aspect\") === \"fixed\") {\r\n                const geo = this.props.graph.getModel().getGeometry(cell);\r\n\r\n                // yNew = xNew * (y / x).\r\n                const x = geo.width;\r\n                const y = geo.height;\r\n                const yNew = e.value;\r\n                const xNew = yNew * (x / y);\r\n\r\n                // calculate scaling ratio (horizontal and vertical)\r\n                let sx = (x != 0) ? xNew / x : 1;\r\n                let sy = (y != 0) ? yNew / y : 1;\r\n                // fixed aspect ratio\r\n                sy = sx = Math.min(sx, sy);\r\n\r\n                editorActions.setCellScale(this.props.graph, [cell], new mx.mxPoint(x * sx, y * sy));\r\n              } else {\r\n                const pos = new mx.mxPoint(editorActions.getCellScale(this.props.graph, cell)!.x, e.value);\r\n                editorActions.setCellScale(this.props.graph, [cell], pos);\r\n              }\r\n            });\r\n          } } min={0} minFractionDigits={2}></ElementInputNumber>);\r\n      tabViewComponents.set(\"copyPosition\", <Button label=\"copy position\" onClick={() => {\r\n        this.setState({copiedPosition: editorActions.getCellPosition(this.props.graph, this.props.graph.getSelectionCell())});\r\n      } } style={{margin: \"0.2rem\"}} />);\r\n      tabViewComponents.set(\"pastePosition\", <Button label=\"paste position\" onClick={() => {\r\n      this.state.copiedPosition !== null ? editorActions.setCellPosition(this.props.graph, this.props.graph.getSelectionCells(), this.state.copiedPosition) : console.error(\"no position set to use pastePosition onto.\");\r\n\r\n      } } style={{margin: \"0.2rem\"}} />);\r\n\r\n      tabViewComponents.set(\"leftPosition\",\r\n          <ElementInputNumber label=\"Left Cell position\" sharedId=\"leftPositionCell\" value={editorActions.getCellPosition(this.props.graph, this.props.graph.getSelectionCell())?.x} onChange={(e) => {\r\n            const cells = this.props.graph.getSelectionCells();\r\n            cells.forEach((cell) => {\r\n              const pos = new mx.mxPoint(e.value, editorActions.getCellPosition(this.props.graph, cell)!.y);\r\n              editorActions.setCellPosition(this.props.graph, [cell], pos);\r\n            });\r\n          } } ></ElementInputNumber>);\r\n      tabViewComponents.set(\"topPosition\",\r\n          <ElementInputNumber label=\"Top Cell position\" sharedId=\"topPositionCell\" value={editorActions.getCellPosition(this.props.graph, this.props.graph.getSelectionCell())?.y} onChange={(e) => {\r\n            const cells = this.props.graph.getSelectionCells();\r\n            cells.forEach((cell) => {\r\n              const pos = new mx.mxPoint(editorActions.getCellPosition(this.props.graph, cell)!.x, e.value);\r\n              editorActions.setCellPosition(this.props.graph, [cell], pos);\r\n            });\r\n\r\n          } } ></ElementInputNumber>);\r\n      // FIXME: crashes on select or not visible\r\n      tabViewComponents.set(\"sourcePoint\",\r\n      (edgeCells && edgeCells.length > 0 && editorActions.getCellSourcePoint(this.props.graph) !== null) ?\r\n        <>\r\n          <ElementInputNumber label=\"Start x\" sharedId=\"edgeSourcePointX\" value={editorActions.getCellSourcePoint(this.props.graph)?.x} onChange={(e) => {\r\n            const point = new mx.mxPoint(e.value, editorActions.getCellSourcePoint(this.props.graph)!.y);\r\n            editorActions.setEdgePointOfSelection(this.props.graph, point, true);\r\n          } } ></ElementInputNumber>\r\n          <ElementInputNumber label=\"Start y\" sharedId=\"edgeSourcePointY\" value={editorActions.getCellSourcePoint(this.props.graph)?.y} onChange={(e) => {\r\n            const point = new mx.mxPoint(editorActions.getCellSourcePoint(this.props.graph)!.x, e.value);\r\n            editorActions.setEdgePointOfSelection(this.props.graph, point, true);\r\n          } } ></ElementInputNumber></> : <></>);\r\n      // FIXME: crashes on select or not visible\r\n      tabViewComponents.set(\"targetPoint\",\r\n      (edgeCells && edgeCells.length > 0 && editorActions.getCellTargetPoint(this.props.graph) !== null) ?\r\n        <><ElementInputNumber label=\"End x\" sharedId=\"edgeTargetPointX\" value={editorActions.getCellTargetPoint(this.props.graph)?.x} onChange={(e) => {\r\n          const point = new mx.mxPoint(e.value, editorActions.getCellTargetPoint(this.props.graph)!.y);\r\n          editorActions.setEdgePointOfSelection(this.props.graph, point, false);\r\n        } } ></ElementInputNumber>\r\n        <ElementInputNumber label=\"End y\" sharedId=\"edgeTargetPointY\" value={editorActions.getCellTargetPoint(this.props.graph)?.y} onChange={(e) => {\r\n          const point = new mx.mxPoint(editorActions.getCellTargetPoint(this.props.graph)!.x, e.value);\r\n          editorActions.setEdgePointOfSelection(this.props.graph, point, false);\r\n        } }></ElementInputNumber>\r\n        </> : <></>);\r\n      tabViewComponents.set(\"aspect\", <ElementCheckbox label=\" Constrain Proportions\" sharedId=\"constrainPorportions\" value={(vertexStyles.get(\"aspect\") && vertexStyles.get(\"aspect\") === \"fixed\") ? true : false} onChange={(e) => {\r\n        this.setState({aspect: e.checked}); styleEditorActions.toggleConstrainPorportions(this.props.graph, e.checked);\r\n      } } />);\r\n      tabViewComponents.set(\"position\", <> <ElementInputNumber label=\"Left\" sharedId=\"leftPosition\" value={getFromCorrespondingMap(vertexStyles, edgeStyles, \"leftPosition\")} onChange={(e) => { } } suffix={\"\"}></ElementInputNumber> <ElementInputNumber label=\"Top\" sharedId=\"topPosition\" value={this.state.topPosition} onChange={(e) => { } } suffix={\"\"}></ElementInputNumber></>);\r\n      tabViewComponents.set(\"startPosition\", <><ElementInputNumber label=\"Left\" sharedId=\"leftLineStartPosition\" value={getFromCorrespondingMap(vertexStyles, edgeStyles, \"leftLineStartPosition\")} onChange={(e) => { } } suffix={\"\"}></ElementInputNumber><ElementInputNumber label=\"Top\" sharedId=\"topLineStartPosition\" value={this.state.topLineStartPosition} onChange={(e) => { } } suffix={\"\"}></ElementInputNumber></>);\r\n      tabViewComponents.set(\"endPosition\", <> <ElementInputNumber label=\"Left\" sharedId=\"leftLineEndPosition\" value={getFromCorrespondingMap(vertexStyles, edgeStyles, \"leftLineEndPosition\")} onChange={(e) => { } } suffix={\"\"}></ElementInputNumber><ElementInputNumber label=\"Top\" sharedId=\"topLineEndPosition\" value={this.state.topLineEndPosition} onChange={(e) => { } } suffix={\"\"}></ElementInputNumber> </>);\r\n      // FIXME: rotation of group not supported similar to grapheditor. But with handle in grapheditor groups can be rotated\r\n      // calculate positive value out of negative => 360 + ... to generate positive values\r\n      tabViewComponents.set(\"rotation\", <><ElementInputNumber label=\"Angle\" sharedId=\"rotationAngle\" value={(360+ parseFloat(vertexStyles.get(\"rotation\"))) % 360} onChange={(e) => {\r\n        this.setState({rotationAngle: e.value});\r\n        styleEditorActions.setRotation(this.props.graph, e.value);\r\n      } } suffix=\"°\" min={0} max={360}></ElementInputNumber>\r\n      <Button label=\"Rotate by 90°\" onClick={() => {\r\n        this.setState({rotationAngle: this.rotate90Degree(this.props.graph)});\r\n      } } style={{margin: \"0.2rem\"}} /> </>,\r\n      );\r\n      // FIXME: Edge cannot be set to a position correctly. Label should be read from default.xml\r\n      tabViewComponents.set(\"labelPosition\",\r\n          <><div>Label Position</div> <Dropdown value={this.getStyleOptionStyleFromCorrespondingStyles(styleEditorOptions.getStyleLabelPositionOptions(), vertexStyles, edgeStyles, this.state.labelPosition)} options={styleEditorOptions.getStyleLabelPositionOptions()} onChange={(e) => {\r\n            this.setState({edgeStyle: e.value}); styleEditorActions.setStyle(this.props.graph, e.value);\r\n          } } optionLabel=\"name\" optionValue=\"style\" placeholder=\"Label Position\" /></>);\r\n\r\n      // only render alignment if at least 2 vertex cells are selected\r\n      tabViewComponents.set(\"cellAlignment\", (vertexCells && vertexCells.length > 1) ? styleEditorOptions.getCellAlignmentOptions().map((option, index) => <Button label={option.name} onClick={() => {\r\n        styleEditorActions.setCellAlignment(this.props.graph, option.code);\r\n      } } style={{margin: \"0.2rem\"}} />) : <></>);\r\n      tabViewComponents.set(\"distributeHorizontal\", vertexCells.length > 1 ? <Button label=\"Horizontal\" onClick={() => {\r\n        styleEditorActions.distributeCells(this.props.graph, true, this.props.graph.getSelectionCells());\r\n      } } style={{margin: \"0.2rem\"}} /> : <></>);\r\n      tabViewComponents.set(\"distributeVertical\", vertexCells.length > 1 ? <Button label=\"Vertical\" onClick={() => {\r\n        styleEditorActions.distributeCells(this.props.graph, false, this.props.graph.getSelectionCells());\r\n      } } style={{margin: \"0.2rem\"}} /> : <></>);\r\n      tabViewComponents.set(\"flipH\", <Button label=\"Horizontal\" onClick={() => {\r\n        styleEditorActions.flipImageHorizontal(this.props.graph, !vertexStyles.get(\"flipH\")); this.setState({isImageFlippedHorizontal: (!vertexStyles.get(\"flipH\"))});\r\n      } } style={{margin: \"0.2rem\"}} />);\r\n      tabViewComponents.set(\"flipV\", <Button label=\"Vertical\" onClick={() => {\r\n        styleEditorActions.flipImageVertical(this.props.graph, !vertexStyles.get(\"flipV\")); this.setState({isImageFlippedVertical: (!vertexStyles.get(\"flipV\"))});\r\n      } } style={{margin: \"0.2rem\"}} />);\r\n      tabViewComponents.set(\"group\", this.props.graph.getSelectionCells().length > 1 ? <Button label=\"Group\" onClick={() => {\r\n        editorActions.group(this.props.graph);\r\n      } } style={{margin: \"0.2rem\"}} /> : <></>);\r\n      tabViewComponents.set(\"ungroup\", isSelectionGrouped ? <Button label=\"Ungroup\" onClick={() => {\r\n        editorActions.ungroup(this.props.graph);\r\n      } } style={{margin: \"0.2rem\"}} /> : <></>);\r\n    }\r\n\r\n    private rotate90Degree(graph:mxGraph) {\r\n      const vertexCells = getVertexCells(graph.getSelectionCells());\r\n      const vertexStyles = (vertexCells && vertexCells.length > 0) ? this.getStyles(vertexCells) : new Map();\r\n      const rot: number = parseFloat(vertexStyles.get(\"rotation\"));\r\n      // 360+ to convert negative angles to positive\r\n      const val = (360 + rot + 90) % 360;\r\n      styleEditorActions.setRotation(graph, val);\r\n      return val;\r\n    }\r\n\r\n    /**\r\n     * Edit and saves metadata of a single cell. Data update is handled by Questionary class\r\n     * @param cells\r\n     * @param defaultJson\r\n     * @param displayEditDataPanel\r\n     */\r\n    private editDataAndSave(cells: mxCell[], defaultJson = this.state.defaultMetadataJson, displayEditDataPanel = true) {\r\n      // update all selected cells\r\n      getVertexCells(cells).forEach((cell) => {\r\n        const editData = editorActions.getEditData(this.props.graph, cell, \"docElement\");\r\n        const metadata = editorActions.getJsonFromAttribute(editData, defaultJson, \"docElement\", \"metadata\");\r\n        if (metadata) {\r\n          this.setState({cellMetadata: metadata, displayEditDataPanel: displayEditDataPanel});\r\n          /* if multiple cells are editited, use the settings from first edited cell for all cells\r\n          actual save data with data happens inside the save function of questionary */\r\n          editorActions.setEditDataJson(this.props.graph, cell, editData, metadata, jsonMapReplacer, \"metadata\");\r\n        } else {\r\n          alert(\"no data found\");\r\n        }\r\n      });\r\n    }\r\n\r\n    private removeDataAndSave(cells: mxCell[], defaultJson = this.state.defaultMetadataJson, displayEditDataPanel = false) {\r\n      if (cells.length != 1) {\r\n        console.error(\"Editing of multiple cells not implemented yet\");\r\n      }\r\n      cells.forEach((cell) => {\r\n        const editData = editorActions.getEditData(this.props.graph, cell, \"docElement\");\r\n        const metadata = editorActions.getJsonFromAttribute(editData, defaultJson, \"docElement\", \"metadata\");\r\n        // only save if any data/questionary is available\r\n        if (metadata) {\r\n          this.setState({cellMetadata: undefined, displayEditDataPanel: displayEditDataPanel});\r\n          // save json as string in metadata attribute: in order to add default json in metadata\r\n          editorActions.removeEditDataJson(this.props.graph, cell, editData, undefined, jsonMapReplacer, \"metadata\");\r\n        } else {\r\n          alert(\"no data found\");\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param selectedCells current selection in graph\r\n     * @param tabview containing GUI layout\r\n     * @param vertexStyles\r\n     * @param edgeStyles\r\n     * @param tabViewComponents containing corresponding GUI elements\r\n     * @returns rendered tab view based on current selection in graph\r\n     */\r\n    private renderTabview(selectedCells: mxCell[], tabview: { tabpanel: string; sections: any[]; }[], vertexStyles: Map<any, any>, edgeStyles: Map<any, any>, tabViewComponents: Map<string, any>) {\r\n      // Each space is loaded dynamically and closed with a divider in each tab Panel\r\n      console.log(\"render gui tabview\", this.props.graph);\r\n      if (this.props.DEBUG) {\r\n        return <TabView className={this.props.className} id={this.props.id} style={this.props.style} activeIndex={this.state.activeIndex} onTabChange={(e) => this.setState({activeIndex: e.index})}>\r\n          {selectedCells.length > 0 ?\r\n        this.dynamicallyRenderTabs(tabview, vertexStyles, edgeStyles, tabViewComponents) : this.renderDiagramTab()}\r\n          {/* debugging options for development */}\r\n          {this.renderMetadataTab()}\r\n          {this.renderNotIncludedList([...tabViewComponents.keys()], vertexStyles, edgeStyles)}\r\n          {this.renderDebugTab()}\r\n        </TabView>;\r\n      } else {\r\n        return <TabView className={this.props.className} id={this.props.id} style={this.props.style} activeIndex={this.state.activeIndex} onTabChange={(e) => this.setState({activeIndex: e.index})}>\r\n          {selectedCells.length > 0 ?\r\n        this.dynamicallyRenderTabs(tabview, vertexStyles, edgeStyles, tabViewComponents) : this.renderDiagramTab()}\r\n          {/* debugging options for development */}\r\n          {this.renderMetadataTab()}\r\n          {/* {this.renderNotIncludedList([...tabViewComponents.keys()], vertexStyles, edgeStyles)}\r\n        {this.renderDebugTab()} */}\r\n        </TabView>;\r\n      }\r\n    }\r\n\r\n    private dynamicallyRenderTabs(tabview: { tabpanel: string; sections: any[]; }[], vertexStyles: Map<any, any>, edgeStyles: Map<any, any>, tabViewComponents: Map<string, any>): React.ReactNode {\r\n      return tabview.map((tab) => {\r\n        console.log(tab.tabpanel);\r\n        console.log(\"sections {\");\r\n        return (<TabPanel header={tab.tabpanel}>\r\n          {/* FIXME: set height relative to parent size height: \"100%\" results in overflow*/}\r\n          <ScrollPanel style={{width: \"100%\", height: \"75vh\"}} className=\"custom-scrollbar\">\r\n            {tab.sections.filter((section) => this.isComponentIncluded(section.tabviewComponents, vertexStyles, edgeStyles)).map((section) => {\r\n            //TODO: filter image only vertexStyles like flipH/flipV seperatly, since they are useless on other vertexes\r\n              return (\r\n              // skip deviders with empty result set => apply filter twice\r\n                <>{section.tabviewComponents.filter((component: any) => vertexStyles.has(component) || edgeStyles.has(component)).length > 0 ? <Divider align=\"left\" type=\"solid\"> <b>{section.deviderLabel}</b> </Divider> : <> </>}\r\n                  {section.tabviewComponents.filter((component: any) => vertexStyles.has(component) || edgeStyles.has(component)).map((component: any) => {\r\n                  // render components\r\n                    let value;\r\n                    if (vertexStyles.has(component)) {\r\n                      value = vertexStyles.get(component);\r\n                    } else if (edgeStyles.has(component)) {\r\n                      value = edgeStyles.get(component);\r\n                    }\r\n\r\n                    if (component.toLocaleLowerCase().includes(\"color\")) {\r\n                      value = getRgba(String(value));\r\n                    } else if (component.toLocaleLowerCase() === \"perimeterSpacing\") {\r\n                    // TODO: Perimeter is an object. => extract the rendering information from it.\r\n                    }\r\n\r\n                    if (value === 0 || value) {\r\n                      const toBeRenderedComponent = tabViewComponents.get(component);\r\n                      // TODO: apply value\r\n                      return toBeRenderedComponent;\r\n                    } else {\r\n                      console.error(\"value could not be rendered in tab\");\r\n                    }\r\n                  })}\r\n                </>);\r\n            })}\r\n          </ScrollPanel>\r\n        </TabPanel>\r\n        );\r\n      });\r\n    }\r\n\r\n    render() {\r\n      console.debug(\"re-render\");\r\n      // return this.renderHardcodedPanels();\r\n      return ( <>\r\n        {this.renderElements()}\r\n        { // render questionary only when valid metadata is available\r\n        this.state.cellMetadata ?\r\n        <Questionary DEBUG={this.props.DEBUG} displayResponsive={this.state.displayEditDataPanel} handleDisplayResponsiveChange={this.handleDisplayEditDataPanelChange} property={this.state.cellMetadata}\r\n          handleSave={() => {\r\n\r\n            const cells = this.props.graph.getSelectionCells();\r\n            const flattendVertexCells = getVertexCells(cells.flatMap( (cell) => editorActions.getChildren(this.props.graph, cell)));\r\n\r\n            //save whole selection of vertexCells\r\n            flattendVertexCells.forEach((cell) => {\r\n              //save whole selection\r\n              editorActions.setEditDataJson(this.props.graph, cell, editorActions.getEditData(this.props.graph, cell), this.state.cellMetadata!, jsonMapReplacer, \"metadata\");\r\n            });\r\n\r\n\r\n          }}\r\n          handleExit={()=>{}}\r\n          handleCellMetadataChange={this.handleCellMetadataChange}\r\n        ></Questionary> :\r\n        <> </>\r\n        }\r\n      </>\r\n      );\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/default.af0de252.xml\";","// Source adapted from: https://codesandbox.io/s/zwqr6zpmpx?fontsize=14&hidenavigation=1&theme=dark\r\n\r\nimport React, {Component} from \"react\";\r\n// Adds all required stylesheets and namespaces from mxClient.js\r\nimport \"./mxgraph/src/css/common.css\";\r\nimport \"./mxgraph/src/css/explorer.css\";\r\n// addition custom css\r\nimport \"./mxgraphcustom.css\";\r\n// other css\r\nimport \"./sidebar.css\";\r\n\r\n// dragable image sources\r\n\r\n// import mxgraph and typscript libraries\r\nimport * as MxTypes from \"mxgraph\"; // <- import types only (overwritten by custom typescript)\r\nimport \"./custom-types/mx-custom-types.d.ts\"; // <- import types only (overwritten by custom typescript)\r\nimport mx from \"./mx\";\r\n\r\n// node wrapper\r\nimport VertexNode from \"./draggable-nodes/VertexNode\";\r\nimport SingleNode from \"./draggable-nodes/SingleNode\";\r\n\r\n// editor actions\r\nimport * as editorActions from \"./Actions\";\r\nimport * as sgUtilities from \"./SgUtilities\";\r\nimport {decode} from \"./Utils/GraphFileUtils\";\r\nimport {getAboutInformation, getHelpInformation, getKeyboardShortcutsInformation} from \"./Utils/ContentUtility\";\r\nimport MenubarToolbar from \"./Menubar/MenubarToolbar\";\r\nimport PrimeAccordion from \"./PrimeAccordion\";\r\nimport {ScrollPanel} from \"primereact/scrollpanel\";\r\nimport {Dialog} from \"primereact/dialog\";\r\nimport {Button} from \"primereact/button\";\r\nimport {InputText} from \"primereact/inputtext\";\r\nimport PrimeTabView from \"./TabView/PrimeTabView\";\r\n\r\n// @ts-ignore\r\nimport defaultXml from \"./grapheditor-example/www/styles/default.xml\";\r\n\r\n//tmp debug imports\r\nimport {InputTextarea} from \"primereact/inputtextarea\";\r\n\r\ninterface SimpleGraphEditorProps {\r\n\r\n}\r\n\r\n// should be kept in sync with SimpleGraphEditorStateSet and isInitialized()\r\ninterface SimpleGraphEditorState {\r\n  graph?: MxTypes.mxGraph;\r\n  filename: string;\r\n  undoMgr?: MxTypes.mxUndoManager;\r\n  displayResponsive: boolean;\r\n  displaySaveAs: boolean;\r\n  modalTitle?: string;\r\n  modalContent?: JSX.Element;\r\n  displayEditStyle:boolean,\r\n  currentStyle?: string,\r\n}\r\n// only for type system. So type script can check required states\r\ntype SimpleGraphEditorStateSet = Required<SimpleGraphEditorState>;\r\nconst DEBUG = false;\r\nconst DEFAULT_FILENAME = \"untitled.graphted\";\r\n\r\nexport default class SimpleGraphEditor extends Component<SimpleGraphEditorProps, SimpleGraphEditorState> {\r\n  private divGraph = React.createRef<HTMLDivElement>();\r\n\r\n  constructor(props:{}) {\r\n    super(props);\r\n    this.state = {\r\n      graph: undefined,\r\n      filename: DEFAULT_FILENAME,\r\n      undoMgr: undefined,\r\n      displayResponsive: false,\r\n      displaySaveAs: false,\r\n      displayEditStyle: false,\r\n    };\r\n    this.addOverlays = this.addOverlays.bind(this);\r\n    this.addKeysbindings = this.addKeysbindings.bind(this);\r\n    this.addGlobalKeysbindings = this.addGlobalKeysbindings.bind(this);\r\n  }\r\n\r\n  isInitialized() : this is {state: SimpleGraphEditorStateSet} {\r\n    return this.state.graph !== undefined && this.state.undoMgr !== undefined;\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.title = \"Graphted\";\r\n    this.LoadGraph();\r\n    // focus on graph to enable shortcuts and menu items directly\r\n    document.getElementById(\"divGraph\")?.focus();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n\r\n  }\r\n\r\n  handleFilenameChange = (filename:string) =>{\r\n    this.setState({filename});\r\n  }\r\n\r\n  showHelpModal = () =>{\r\n    this.setState({displayResponsive: true,\r\n      modalTitle: \"Help\",\r\n      modalContent: getHelpInformation(),\r\n    });\r\n  }\r\n\r\n  showAboutModal = () =>{\r\n    this.setState({displayResponsive: true,\r\n      modalTitle: \"About\",\r\n      modalContent: getAboutInformation(),\r\n    });\r\n  }\r\n\r\n  showKeyboardModal = () =>{\r\n    this.setState({displayResponsive: true,\r\n      modalTitle: \"Shortcuts\",\r\n      modalContent: getKeyboardShortcutsInformation(),\r\n    });\r\n  }\r\n\r\n  showSaveAsModal = () =>{\r\n    this.setState({displaySaveAs: true});\r\n  }\r\n\r\n  showEditStyleModal = () => {\r\n    this.setState({currentStyle: this.state.graph!.getSelectionCell().getStyle()});\r\n    this.setState({displayEditStyle: true});\r\n  }\r\n\r\n  updateGraph = () => {\r\n    this.setState({graph: this.state.graph});\r\n  }\r\n\r\n  /**\r\n   */\r\n  addOverlays = (graph:MxTypes.mxGraph, cell:MxTypes.mxCell) => {\r\n    // import image\r\n    const deleteImage:MxTypes.mxImage = new mx.mxImage(\"resources/images/overlays/forbidden.png\", 16, 16);\r\n    const overlay:MxTypes.mxCellOverlay = new mx.mxCellOverlay(deleteImage, \"delete\");\r\n\r\n    console.log(\"overlay\");\r\n    overlay.cursor = \"hand\";\r\n    overlay.align = mx.mxConstants.ALIGN_CENTER;\r\n    overlay.offset = new mx.mxPoint(0, 10);\r\n    overlay.addListener(\r\n        mx.mxEvent.CLICK,\r\n        mx.mxUtils.bind(this, function(sender, evt) {\r\n          console.log(\"clicked\");\r\n        }),\r\n    );\r\n    graph.addCellOverlay(cell, overlay);\r\n  };\r\n\r\n  deleteCells = (graph:MxTypes.mxGraph) => {\r\n    // Cancels interactive operations\r\n    if (graph.isEnabled()) {\r\n      graph.escape();\r\n      const cells = graph.getSelectionCells();\r\n      if (cells != null) {\r\n        graph.removeCells(cells);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n /**\r\n *  Changes the zoom on mouseWheel events\r\n */\r\n addMouseWheelZoom = (evt:any) => {\r\n   if ( !this.isInitialized() ) throw new Error(\"Graph is not fully initialized\"); // safeguard\r\n   if (evt.deltaY < 0) {\r\n     this.state.graph.zoomIn();\r\n     console.log(\"Zoom in\");\r\n   } else if (evt.deltaY > 0) {\r\n     this.state.graph.zoomOut();\r\n     console.log(\"Zoom Out\");\r\n   }\r\n };\r\n\r\n /**\r\n   * @param {mxGraph} graph\r\n   */\r\n addKeysbindings(event:React.KeyboardEvent<HTMLInputElement>) {\r\n   if ( !this.isInitialized() ) throw new Error(\"Graph is not fully initialized\"); // safeguard\r\n   const graph = this.state.graph;\r\n   // stop keyboard events when cells are edited\r\n   if (graph.cellEditor.getEditingCell() !== null) return true;\r\n   // let charCode = String.fromCharCode(event.which).toLowerCase();\r\n   console.log(\"Last pressed key: \", event.key);\r\n\r\n   const isCtrlPressed = (event.ctrlKey || event.metaKey);\r\n   // CTRL Key combos (CTRL + Shift = upper case letters)\r\n   if (isCtrlPressed) {\r\n     // https://reactjs.org/docs/events.html#keyboard-events\r\n     // https://www.w3.org/TR/uievents-key/#named-key-attribute-values\r\n     switch (event.key) {\r\n       case \"x\":\r\n         editorActions.cut(graph);\r\n         break;\r\n       case \"c\":\r\n         editorActions.copy(graph);\r\n         break;\r\n       case \"v\":\r\n         editorActions.paste(graph);\r\n         break;\r\n       case \"d\":\r\n         event.preventDefault();\r\n         editorActions.duplicate(graph);\r\n         break;\r\n       case \"g\":\r\n         event.preventDefault();\r\n         editorActions.group(graph);\r\n         break;\r\n       case \"U\":\r\n         editorActions.ungroup(graph);\r\n         break;\r\n       case \"a\":\r\n         event.preventDefault();\r\n         editorActions.selectAllOrClearSelection(graph);\r\n         break;\r\n       case \"V\":\r\n         event.preventDefault();\r\n         editorActions.selectAllVertices(graph);\r\n         break;\r\n       case \"E\":\r\n         editorActions.selectAllEdges(graph);\r\n         break;\r\n       case \"F\":\r\n         event.preventDefault();\r\n         editorActions.selectionToFront(graph);\r\n         break;\r\n       case \"B\":\r\n         event.preventDefault();\r\n         editorActions.selectionToBack(graph);\r\n         break;\r\n       case \"Control\":\r\n         break;\r\n       default:\r\n         console.log(\"Shortcut not registered CTRL and \", event.key, \" pressed.\");\r\n     }\r\n   } else if (!((event.ctrlKey || event.metaKey) ||event.altKey || event.shiftKey)) {\r\n     // simple key events\r\n     switch (event.key) {\r\n       case \"Delete\":\r\n       case \"Backspace\":\r\n         editorActions.deleteSelection(graph);\r\n         break;\r\n         //TODO: arrow keys -> when cells selected, move cells\r\n         //TODO: arrow keys -> when no cells selected, move graph canvas\r\n       case \"Escape\":\r\n         graph.popupMenuHandler.hideMenu();\r\n         break;\r\n       case \"F2\":\r\n         // rename current node\r\n         editorActions.editCell(graph);\r\n         break;\r\n       default:\r\n         console.info(\"Shortcut not registered \", event.key, \" pressed.\");\r\n     }\r\n   }\r\n }\r\n\r\n /**\r\n   * @param {mxGraph} graph\r\n   */\r\n addGlobalKeysbindings(event:React.KeyboardEvent<HTMLInputElement>) {\r\n   if ( !this.isInitialized() ) throw new Error(\"Graph is not fully initialized\"); // safeguard\r\n   const graph = this.state.graph;\r\n   // stop keyboard events when cells are edited\r\n   if (graph.cellEditor.getEditingCell() !== null) return true;\r\n   // let charCode = String.fromCharCode(event.which).toLowerCase();\r\n   console.log(\"Last pressed key: \", event.key);\r\n\r\n   const isCtrlPressed = (event.ctrlKey || event.metaKey);\r\n   // CTRL Key combos (CTRL + Shift = upper case letters)\r\n   if (isCtrlPressed) {\r\n     // https://reactjs.org/docs/events.html#keyboard-events\r\n     // https://www.w3.org/TR/uievents-key/#named-key-attribute-values\r\n     switch (event.key) {\r\n       case \"s\":\r\n         // save\r\n         event.preventDefault();\r\n         editorActions.saveFile(editorActions.saveXml(graph), this.state.filename );\r\n         break;\r\n       case \"S\":\r\n         // save\r\n         event.preventDefault();\r\n         this.showSaveAsModal();\r\n         break;\r\n       case \"o\":\r\n         // open\r\n         event.preventDefault();\r\n         editorActions.openFile(graph, this.handleFilenameChange).click();\r\n         break;\r\n       case \"N\":\r\n         // new document\r\n         event.preventDefault();\r\n         editorActions.deleteAll(graph);\r\n         this.setState({filename: DEFAULT_FILENAME});\r\n         break;\r\n       case \"z\":\r\n         editorActions.undo(this.state.undoMgr);\r\n         break;\r\n       case \"y\":\r\n         editorActions.redo(this.state.undoMgr);\r\n         break;\r\n       case \"Control\":\r\n         break;\r\n       default:\r\n         console.log(\"Shortcut not registered CTRL and \", event.key, \" pressed.\");\r\n     }\r\n   } else if (event.altKey) {\r\n     switch (event.key) {\r\n       case \"n\":\r\n         // new document\r\n         event.preventDefault();\r\n         editorActions.deleteAll(graph);\r\n         this.setState({filename: DEFAULT_FILENAME});\r\n         break;\r\n       case \"Alt\":\r\n         break;\r\n       default:\r\n         console.log(\"Shortcut not registered ALT and \", event.key, \" pressed.\");\r\n     }\r\n   } else if (!((event.ctrlKey || event.metaKey) ||event.altKey || event.shiftKey)) {\r\n     // simple key events\r\n     switch (event.key) {\r\n       case \"F1\":\r\n         // help\r\n         event.preventDefault();\r\n         this.showHelpModal();\r\n         break;\r\n       default:\r\n         console.info(\"Shortcut not registered \", event.key, \" pressed.\");\r\n     }\r\n   }\r\n }\r\n\r\n\r\ninitializeUndomanager = () => {\r\n  if ( !this.isInitialized() ) throw new Error(\"Graph is not fully initialized\"); // safeguard\r\n  const graph = this.state.graph;\r\n  const undoManager = this.state.undoMgr;\r\n  const listener = function(sender:any, evt:MxTypes.mxEventObject) {\r\n    undoManager.undoableEditHappened(evt.getProperty(\"edit\"));\r\n  };\r\n  graph.getModel().addListener(mx.mxEvent.UNDO, listener);\r\n  graph.getView().addListener(mx.mxEvent.UNDO, listener);\r\n}\r\n\r\n/**\r\n * @param {mxGraph} graph\r\n */\r\nsetGraphSetting = async () => {\r\n  if ( !this.isInitialized() ) throw new Error(\"Graph is not fully initialized\"); // safeguard\r\n  const graph = this.state.graph;\r\n  const that = this;\r\n  // Graph settings\r\n  graph.setPanning(true);\r\n  graph.setTooltips(true);\r\n  graph.setConnectable(true);\r\n  graph.setCellsEditable(true);\r\n  graph.setEnabled(true);\r\n  graph.setHtmlLabels(true);\r\n\r\n  // Enables rubberband (marquee) selection and a handler\r\n  // for basic keystrokes (eg. return, escape during editing).\r\n  new mx.mxRubberband(graph);\r\n  new mx.mxKeyHandler(graph);\r\n\r\n  graph.centerZoom = false;\r\n  //Specifies if the container should be resized to the graph size when the graph size has changed.\r\n  graph.resizeContainer = false;\r\n\r\n  graph.popupMenuHandler.factoryMethod = function(menu, cell, evt:any) {\r\n    // console.dir(evt);\r\n    return that.createPopupMenu(graph, menu, cell, evt);\r\n  };\r\n\r\n\r\n  // Installs a custom tooltip for cells\r\n  graph.getTooltipForCell = function(cell) {\r\n    //FIXME: use tooltip from image of cell\r\n    // only base64 representation if shape is image\r\n    // shape is available\r\n    //TODO: save image title somehow or add tooltip\r\n    // return \"Example tooltip\";\r\n    return \"\";\r\n  };\r\n\r\n  // update GUI on selection change\r\n  graph.getSelectionModel().addListener(mx.mxEvent.CHANGE, function(sender:any, evt:MxTypes.mxEventObject) {\r\n    that.updateGraph();\r\n  });\r\n\r\n  // update GUI on resizing/angle listener etc.\r\n  graph.getModel().addListener(mx.mxEvent.CHANGE, function(sender:any, evt:MxTypes.mxEventObject) {\r\n    //update only if something is selected\r\n    //TODO: optimze updated only if a property changed currently on every model change\r\n    that.updateGraph();\r\n  });\r\n\r\n  // drop listener for adding images\r\n  mx.mxEvent.addListener(graph.container, \"dragover\", function(evt:Event) {\r\n    if (graph.isEnabled()) {\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n    }\r\n  });\r\n  mx.mxEvent.addListener(graph.container, \"drop\", (evt:DragEvent) => that.dropImage(graph, evt));\r\n\r\n  //load default.xml\r\n  this.loadStylesheet(graph);\r\n\r\n  /**\r\n   * Source from diagrameditor.html example\r\n   */\r\n\r\n  // Adds rotation handle and live preview: Graph.js 10981\r\n  mx.mxVertexHandler.prototype.rotationEnabled = true;\r\n\r\n\r\n  /**\r\n   * Enables recursive resize for groups.\r\n  */\r\n  mx.mxVertexHandler.prototype.isRecursiveResize = (state: MxTypes.mxCellState, me: MxTypes.mxMouseEvent) => {\r\n    //source: Graph.js of grapheditor example\r\n    return this.isRecursiveVertexResize(state) &&\r\n    !mx.mxEvent.isControlDown(me.getEvent());\r\n  };\r\n\r\n\r\n  // Invokes turn on single click on rotation handle: graph.js:11462\r\n  mx.mxVertexHandler.prototype.rotateClick = function() {\r\n    const angle = mx.mxUtils.mod(mx.mxUtils.getValue(this.state.style, mx.mxConstants.STYLE_ROTATION, 0) + 90, 360);\r\n    this.state.view.graph.setCellStyles(mx.mxConstants.STYLE_ROTATION, angle, [this.state.cell]);\r\n  };\r\n\r\n  //enable custom attributes by overwriting convertValueToString  and cellLabelChanged see https://jgraph.github.io/mxgraph/docs/js-api/files/model/mxCell-js.html\r\n  /**\r\n * Returns the label for the given cell.\r\n * src from Graph.js\r\n */\r\n  graph.convertValueToString = function(cell) {\r\n    const value = this.model.getValue(cell);\r\n\r\n    if (value != null && typeof(value) == \"object\") {\r\n      if (that.isReplacePlaceholders(cell) && cell.getAttribute(\"placeholder\") != null) {\r\n        const name = cell.getAttribute(\"placeholder\");\r\n        let current = cell;\r\n        let result = null;\r\n\r\n        while (result == null && current != null) {\r\n          if (current.value != null && typeof(current.value) == \"object\") {\r\n            result = (current.hasAttribute(name)) ? ((current.getAttribute(name) != null) ?\r\n               current.getAttribute(name) : \"\") : null;\r\n          }\r\n\r\n          current = this.model.getParent(current);\r\n        }\r\n\r\n        return result || \"\";\r\n      } else {\r\n        return value.getAttribute(\"label\") || \"\";\r\n      }\r\n    }\r\n    //@ts-ignore\r\n    return mx.mxGraph.prototype.convertValueToString.apply(this, arguments);\r\n  };\r\n\r\n\r\n  /**\r\n   * Handles label changes for XML user objects.\r\n   * src from Graph.js\r\n   */\r\n  graph.cellLabelChanged = function(cell, value, autoSize) {\r\n    // Removes all illegal control characters in user input\r\n    value = that.zapGremlins(value);\r\n\r\n    this.model.beginUpdate();\r\n    try {\r\n      if (cell.value != null && typeof cell.value == \"object\") {\r\n        if (that.isReplacePlaceholders(cell) && cell.getAttribute(\"placeholder\") != null) {\r\n          // LATER: Handle delete, name change\r\n          const name = cell.getAttribute(\"placeholder\");\r\n          let current = cell;\r\n\r\n          while (current != null) {\r\n            if (current == this.model.getRoot() || (current.value != null &&\r\n               typeof(current.value) == \"object\" && current.hasAttribute(name))) {\r\n              that.setAttributeForCell(current, name, value);\r\n\r\n              break;\r\n            }\r\n\r\n            current = this.model.getParent(current);\r\n          }\r\n        }\r\n\r\n        const tmp = cell.value.cloneNode(true);\r\n        tmp.setAttribute(\"label\", value);\r\n        value = tmp;\r\n      }\r\n\r\n      //@ts-ignore\r\n      mx.mxGraph.prototype.cellLabelChanged.apply(this, arguments);\r\n    } finally {\r\n      this.model.endUpdate();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Inner callback to update the user object of the given mxCell using mxCell.valueChanged and return the previous value, that is, the return value of mxCell.valueChanged.\r\n   * To change a specific attribute in an XML node, the following code can be used:\r\n   *     graph.getModel().valueForCellChanged = function(cell, value)\r\n    {\r\n      var previous = cell.value.getAttribute('label');\r\n      cell.value.setAttribute('label', value);\r\n\r\n      return previous;\r\n    };\r\n   */\r\n  graph.getModel().valueForCellChanged = function(cell, value) {\r\n    // get meta data if the given value is an XML node or cell value directly(label)\r\n    const previousValue = cell.value;\r\n    // @ts-ignore\r\n    const previousValueIsXMLNode = mx.mxUtils.isNode(cell.value);\r\n    // @ts-ignore\r\n    const valueIsXMLNode = mx.mxUtils.isNode(value);\r\n    // when using meta data\r\n    // @ts-ignore\r\n    if (previousValueIsXMLNode && !valueIsXMLNode) {\r\n      //TODO: keep in synch with editData function => extract editing function\r\n      cell.value.setAttribute(\"label\", value);\r\n    } else {\r\n      // update the user object of the given mxCell using mxCell.valueChanged and return the previous value\r\n      // when no meta data is used the label is saved directly into the node\r\n      cell.value = value;\r\n    }\r\n    return previousValue;\r\n  };\r\n\r\n};\r\n\r\n/**\r\n * Handles label changes for XML user objects.\r\n *  src from Graph.js\r\n * TODO: use on Action when cell is edited\r\n * FIXME: when included in editing should fix label change on custom object\r\n */\r\nupdateLabelElements = (cells:MxTypes.mxCell[], fn:any, tagName:string) => {\r\n  const graph = this.state.graph!;\r\n\r\n  cells = (cells != null) ? cells : graph.getSelectionCells();\r\n  const div = document.createElement(\"div\");\r\n\r\n  for (let i = 0; i < cells.length; i++) {\r\n    // Changes font tags inside HTML labels\r\n    if (graph.isHtmlLabel(cells[i])) {\r\n      const label = graph.convertValueToString(cells[i]);\r\n\r\n      if (label != null && label.length > 0) {\r\n        div.innerHTML = label;\r\n        const elts = div.getElementsByTagName((tagName != null) ? tagName : \"*\");\r\n\r\n        for (let j = 0; j < elts.length; j++) {\r\n          fn(elts[j]);\r\n        }\r\n\r\n        if (div.innerHTML != label) {\r\n          graph.cellLabelChanged(cells[i], div.innerHTML);\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Adds support for placeholders in labels.\r\n * src from Graph.js\r\n */\r\n isReplacePlaceholders = (cell:MxTypes.mxCell) => {\r\n   return cell.value != null && typeof(cell.value) == \"object\" &&\r\n     cell.value.getAttribute(\"placeholders\") == \"1\";\r\n };\r\n\r\n /**\r\n * Removes all illegal control characters with ASCII code <32 except TAB, LF\r\n * and CR.\r\n * src from Graph.js\r\n */\r\n zapGremlins = (text:string) => {\r\n   const checked = [];\r\n\r\n   for (let i = 0; i < text.length; i++) {\r\n     const code = text.charCodeAt(i);\r\n\r\n     // Removes all control chars except TAB, LF and CR\r\n     if ((code >= 32 || code == 9 || code == 10 || code == 13) &&\r\n       code != 0xFFFF && code != 0xFFFE) {\r\n       checked.push(text.charAt(i));\r\n     }\r\n   }\r\n\r\n   return checked.join(\"\");\r\n };\r\n\r\n /**\r\n * Sets the link for the given cell.\r\n * src from Graph.js\r\n */\r\n  setAttributeForCell = (cell:MxTypes.mxCell, attributeName:string, attributeValue:any) => {\r\n    let value = null;\r\n\r\n    if (cell.value != null && typeof(cell.value) == \"object\") {\r\n      value = cell.value.cloneNode(true);\r\n    } else {\r\n      const doc = mx.mxUtils.createXmlDocument();\r\n\r\n      value = doc.createElement(\"UserObject\");\r\n      value.setAttribute(\"label\", cell.value || \"\");\r\n    }\r\n\r\n    if (attributeValue != null) {\r\n      value.setAttribute(attributeName, attributeValue);\r\n    } else {\r\n      value.removeAttribute(attributeName);\r\n    }\r\n    this.state.graph!.model.setValue(cell, value);\r\n  };\r\n\r\n  /**\r\n   * Returns if the child cells of the given vertex cell state should be resized.\r\n   * source: Graph.js of grapheditor example\r\n   */\r\n  isRecursiveVertexResize = (state: MxTypes.mxCellState) => {\r\n    const graph = this.state.graph!;\r\n    const model = graph.getModel()!;\r\n    return !graph.isSwimlane(state.cell) && model.getChildCount(state.cell) > 0 &&\r\n        !graph.isCellCollapsed(state.cell) && mx.mxUtils.getValue(state.style, \"recursiveResize\", \"1\") == \"1\" &&\r\n        mx.mxUtils.getValue(state.style, \"childLayout\", null) == null;\r\n  }\r\n\r\n\r\n  dropImage = (graph:MxTypes.mxGraph, evt:DragEvent) => {\r\n    if (graph.isEnabled()) {\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n\r\n      // Gets drop location point for vertex\r\n      const {x, y} = editorActions.getVertexDropLocation(graph, evt);\r\n\r\n      // Converts local images to data urls\r\n      const filesArray = evt.dataTransfer?.files as FileList;\r\n\r\n      for (let i = 0; i < filesArray.length; i++) {\r\n        this.handleDrop(graph, filesArray[i], x + i * 10, y + i * 10);\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  // see drop.html for reference\r\n  handleDrop = (graph:MxTypes.mxGraph, file:File, x:number, y:number) => {\r\n    // Checks filesupport for dropping images\r\n    const fileSupport = window.File != null && window.FileReader != null && window.FileList != null;\r\n\r\n    if (!fileSupport) {\r\n      // Displays an error message if the browser is not supported.\r\n      mx.mxUtils.error(\"Drop data in Browser is not supported!\", 200, false);\r\n    }\r\n\r\n    this.insertImage(file, graph, x, y);\r\n  };\r\n\r\n  // Inserts a cell at the given location\r\n  insertCell = (graph:MxTypes.mxGraph, evt:Event, target:MxTypes.mxCell, x:number, y:number, width:number, height:number, value:string, id:string | null, data?:string) => {\r\n    const parent = graph.getDefaultParent();\r\n    if (data) {\r\n      // graph.insertVertex(null, null, value, x, y, width, height, data);\r\n      graph.insertVertex(parent, id, value, x, y, width, height, \"shape=image;image=\" + data + \";\");\r\n      // graph.insertVertex(null, null, value, x, y, width, height, 'shape=image;image=resources/images/example-images/plus.png');\r\n    } else {\r\n      graph.insertVertex(parent, id, value, x, y, width, height);\r\n    }\r\n  };\r\n\r\n  /**\r\n   *  Function to create the entries in the popupmenu\r\n   */\r\n  createPopupMenu = (graph:MxTypes.mxGraph, menu:MxTypes.mxPopupMenu, cell:MxTypes.mxCell, evt:MouseEvent) => {\r\n    const isSelectionGrouped = graph.getModel().getChildCount(graph.getSelectionCell()) > 0;\r\n    if ( !this.isInitialized() ) throw new Error(\"Graph is not fully initialized\"); // safeguard\r\n    if (cell != null) {\r\n      if (cell.edge === true) {\r\n        menu.addItem(\"Delete connection\", \"resources/images/close.gif\", function() {\r\n          graph.removeCells([cell]);\r\n          mx.mxEvent.consume(evt);\r\n        });\r\n      } else {\r\n        menu.addItem(\"Delete nodes\", \"resources/images/example-images/delete2.png\", function() {\r\n          graph.removeCells(graph.getSelectionCells());\r\n          mx.mxEvent.consume(evt);\r\n        });\r\n      }\r\n      if (graph.getSelectionCount() > 1) {\r\n        menu.addItem(\"Group\", undefined, () => editorActions.group(graph));\r\n      }\r\n      if (graph.getSelectionCount() >= 1) {\r\n        menu.addItem(\"Select Group\", undefined, () => editorActions.selectGroup(graph));\r\n      }\r\n      // ungroup selected\r\n      if (graph.getSelectionCount() === 1 && isSelectionGrouped) {\r\n        menu.addItem(\"Ungroup\", undefined, () => editorActions.ungroup(graph));\r\n      }\r\n    }\r\n    menu.addItem(\"Add node\", \"resources/images/example-images/plus.png\", () => {\r\n      const parent = graph.getDefaultParent();\r\n      const {x, y} = editorActions.getVertexDropLocation(graph, evt);\r\n      const width = 120;\r\n      const height = 60;\r\n      graph.insertVertex(parent, null, \"Enter Text here\", x, y, width, height);\r\n    });\r\n    //TODO: add stencil used as shape and load basic.xml for basic shapes like in grapheditor example, smaller examples projects are also present\r\n\r\n    if (DEBUG) {\r\n      menu.addItem(\"Add shape\", \"resources/images/example-images/plus.png\", () => {\r\n        /**\r\n         * Steps:\r\n         * 1 create function for shape\r\n         * 2 extend (\"inherit\") from another shape\r\n         * 3 alternate / extend the basic shape\r\n         * 4 register the new shape\r\n         * 5 use as shape=myShape; as VertexStyleAttribute\r\n         */\r\n\r\n\r\n        //src: https://jgraph.github.io/mxgraph/docs/js-api/files/shape/mxShape-js.html\r\n        function CustomShape() { }\r\n        // @ts-ignore\r\n        CustomShape.prototype = new mx.mxShape();\r\n        CustomShape.prototype.constructor = CustomShape;\r\n\r\n        // Changes the default style for vertices \"in-place\"\r\n        // to use the custom shape.\r\n        // const style = graph.getStylesheet().getDefaultVertexStyle();\r\n        // style[mx.mxConstants.STYLE_SHAPE] = \"customShape\";\r\n\r\n        /*\r\n        * src: javascript examples: shape.html\r\n        * The next lines use an mxCylinder instance to augment the\r\n        * prototype of the shape (\"inheritance\") and reset the constructor\r\n        * to the topmost function of the c'tor chain.\r\n        * */\r\n        mx.mxUtils.extend(CustomShape, mx.mxCylinder);\r\n\r\n        // override the basic functions from inherited forms e.g. from mx.mxCylinder redrawPath\r\n        // Defines the extrusion of the box as a \"static class variable\"\r\n        // @ts-ignore\r\n        (CustomShape.prototype as MxTypes.mxCylinder).extrude = 10;\r\n\r\n        /*\r\n       Next, the mxCylinder's redrawPath method is \"overridden\".\r\n       This method has a isForeground argument to separate two\r\n       paths, one for the background (which must be closed and\r\n       might be filled) and one for the foreground, which is\r\n       just a stroke.\r\n\r\n       Foreground:       /\r\n                   _____/\r\n                        |\r\n                        |\r\n                     ____\r\n       Background:  /    |\r\n                   /     |\r\n                   |     /\r\n                   |____/\r\n  */\r\n        (CustomShape.prototype as MxTypes.mxCylinder).redrawPath = function(path, x, y, w, h, isForeground) {\r\n          // @ts-ignore\r\n          const dy = this.extrude * this.scale;\r\n          // @ts-ignore\r\n          const dx = this.extrude * this.scale;\r\n\r\n          if (isForeground) {\r\n            path.moveTo(0, dy);\r\n            path.lineTo(w - dx, dy);\r\n            path.lineTo(w, 0);\r\n            path.moveTo(w - dx, dy);\r\n            path.lineTo(w - dx, h);\r\n          } else {\r\n            path.moveTo(0, dy);\r\n            path.lineTo(dx, 0);\r\n            path.lineTo(w, 0);\r\n            path.lineTo(w, h - dy);\r\n            path.lineTo(w - dx, h);\r\n            path.lineTo(0, h);\r\n            path.lineTo(0, dy);\r\n            path.lineTo(dx, 0);\r\n            path.close();\r\n          }\r\n        };\r\n\r\n        // @ts-ignore\r\n        mx.mxCellRenderer.registerShape(\"customShape\", CustomShape);\r\n\r\n\r\n        // add the shape to the current graph\r\n        const parent = graph.getDefaultParent();\r\n        const {x, y} = editorActions.getVertexDropLocation(graph, evt);\r\n        const width = 120;\r\n        const height = 60;\r\n        // select new registered shape as vertex style\r\n        const cutomVertexStyle = \"shape=customShape;\";\r\n        graph.insertVertex(parent, null, \"Enter Text here\", x, y, width, height, cutomVertexStyle);\r\n      });\r\n\r\n      menu.addItem(\"Add 'and' stencil shape \", \"resources/images/example-images/plus.png\", () => {\r\n        const shapeName = \"and\";\r\n        //TODO: check if shape was already loaded!\r\n        //Only loads default shapes, even when shape was registered and could be loaded!\r\n        const andShape = graph.cellRenderer.getShape(shapeName);\r\n\r\n\r\n        // load newly added stencils\r\n        const andStencil = mx.mxStencilRegistry.getStencil(shapeName);\r\n\r\n        if (!andShape && !andStencil) {\r\n          alert(\"Shape \" + shapeName +\" is not available! Load stencil file before continuing\");\r\n          return;\r\n        }\r\n\r\n        // add the shape to the current graph\r\n        const parent = graph.getDefaultParent();\r\n        const {x, y} = editorActions.getVertexDropLocation(graph, evt);\r\n        const width = 120;\r\n        const height = 60;\r\n        // select new registered shape as vertex style\r\n        const cutomVertexStyle = \"shape=\"+ shapeName + \";\";\r\n        graph.insertVertex(parent, null, \"Enter Text here\", x, y, width, height, cutomVertexStyle);\r\n      });\r\n    }\r\n\r\n\r\n    menu.addSeparator();\r\n    // Edit actions\r\n    menu.addItem(\"Undo\", undefined, ()=> editorActions.undo(this.state.undoMgr as MxTypes.mxUndoManager));\r\n    menu.addItem(\"Redo\", undefined, () => editorActions.redo(this.state.undoMgr as MxTypes.mxUndoManager));\r\n    menu.addItem(\"Cut\", undefined, () => editorActions.cut(graph));\r\n    menu.addItem(\"Copy\", undefined, () => editorActions.copy(graph));\r\n    menu.addItem(\"Paste\", undefined, () => editorActions.paste(graph));\r\n    menu.addItem(\"Paste Here\", undefined, () => editorActions.pasteHere(graph, evt as MouseEvent));\r\n    menu.addItem(\"Duplicate\", undefined, () => editorActions.duplicate(graph));\r\n    menu.addSeparator();\r\n    // Waypoint\r\n    menu.addItem(\"Add Waypoint\", undefined, () => editorActions.addWaypoint(graph));\r\n    menu.addItem(\"Remove Waypoint\", undefined, () => editorActions.removeWaypoint(graph, evt as MouseEvent));\r\n    menu.addItem(\"Clear all Waypoints\", undefined, () => editorActions.clearAllWaypoints(graph));\r\n    menu.addSeparator();\r\n    // Selections\r\n    menu.addItem(\"Select all\", undefined, () => editorActions.selectAll(graph));\r\n    menu.addItem(\"Select all Vertices\", undefined, () => editorActions.selectAllVertices(graph));\r\n    menu.addItem(\"Select all Edges\", undefined, () => editorActions.selectAllEdges(graph));\r\n    menu.addItem(\"Clear Selection\", undefined, () => editorActions.clearSelection(graph));\r\n  };\r\n\r\n  insertImage(file:File, graph:MxTypes.mxGraph, x:number, y:number) {\r\n    //from Actions.js of grapheditor (line 1378)\r\n    const labelOnButtomConfig = \"imageAspect=0;aspect=fixed;verticalLabelPosition=bottom;verticalAlign=top;\";\r\n    const minimumWidth = 50;\r\n    const minimumHeight = 50;\r\n    if (file.type.substring(0, 5) === \"image\") {\r\n      const reader = new FileReader();\r\n\r\n      reader.onload = function(e) {\r\n        // Gets size of image for vertex\r\n        let data = e.target?.result as string;\r\n\r\n        const img = new Image();\r\n\r\n        img.onload = function() {\r\n          const width = Math.max(minimumWidth, img.width);\r\n          const height = Math.max(minimumHeight, img.height);\r\n\r\n          // Converts format of data url to cell style value for use in vertex\r\n          data = sgUtilities.dataUrlToCellStyle(data);\r\n\r\n          // Gets the default parent for inserting new cells. This\r\n          // is normally the first child of the root (ie. layer 0).\r\n          const parent = graph.getDefaultParent();\r\n\r\n          graph.insertVertex(parent, null, \"\", x, y, width, height, \"shape=image;image=\" + data + \";\" + labelOnButtomConfig);\r\n          // console.log('dragged item\\n' + 'shape=image;image=' + data + ';');\r\n        };\r\n        img.src = data;\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  }\r\n\r\n  LoadGraph() {\r\n    // const container = ReactDOM.findDOMNode(this.refs.divGraph) as HTMLDivElement;\r\n    const container = this.divGraph.current!;\r\n    // prevent scrollbar scrolling\r\n    container.onwheel = function() {\r\n      return false;\r\n    };\r\n    console.log(container);\r\n\r\n    // Checks if the browser is supported\r\n    if (!mx.mxClient.isBrowserSupported()) {\r\n      // Displays an error message if the browser is not supported.\r\n      mx.mxUtils.error(\"Browser is not supported!\", 200, false);\r\n    } else {\r\n      // Disable built-in context menu\r\n      mx.mxEvent.disableContextMenu(container);\r\n      // TODO: use actual mxEditor for graph editing: see https://jgraph.github.io/mxgraph/javascript/examples/editors/diagrameditor.html\r\n      // let editor = new mxEditor(container); // https://stackoverflow.com/questions/62321750/problem-with-mxeditor-and-xml-configuration-file\r\n      // Creates the graph inside the given container\r\n      const graph = new mx.mxGraph(container);\r\n      const undoMgr = new mx.mxUndoManager();\r\n      this.setState(\r\n          {\r\n            graph: graph,\r\n            undoMgr: undoMgr,\r\n          },\r\n          () => {\r\n            console.log(this);\r\n            this.initializeUndomanager();\r\n            this.setGraphSetting();\r\n            // Gets the default parent for inserting new cells. This\r\n            // is normally the first child of the root (ie. layer 0).\r\n            //const parent = graph.getDefaultParent();\r\n\r\n\r\n            // Adds cells to the model in a single step\r\n            graph.getModel().beginUpdate();\r\n            try {\r\n              // const cutomVertexStyle = \"shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#8205FF;gradientColor=#ffffff;\";\r\n              // // var style = graph.getStylesheet().getDefaultVertexStyle();\r\n              // const v4 = graph.insertVertex(parent, null, \"Style node\", 300, 150, 80, 30, cutomVertexStyle);\r\n              // const e1 = graph.insertEdge(parent, null, \"\", v1, v2);\r\n            } finally {\r\n            // Updates the display\r\n              graph.getModel().endUpdate();\r\n            }\r\n          },\r\n      );\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Loads the stylesheet for this graph.\r\n   */\r\n  loadStylesheet = async (graph:MxTypes.mxGraph) => {\r\n    const xmlText = await fetch(defaultXml).then((r) => r.text());\r\n    console.log(\"parsed Element\");\r\n    if (xmlText && xmlText.length > 0) {\r\n      graph.getModel().beginUpdate();\r\n      try {\r\n        console.log(\"before decoding\", graph.getStylesheet());\r\n        //TODO: continue here to load default styles and stencils\r\n        //FIXME: decoded doesn't result as a Stylesheet-object => could not be loaded correctly afterwards\r\n        const decoded = decode(xmlText);\r\n        graph.setStylesheet(decoded);\r\n        console.log(\"after decoding\", graph.getStylesheet());\r\n      } finally {\r\n        graph.getModel().endUpdate();\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const defaultText = \"fillColor=none;strokeColor=none;stroke=none;fill=none\";\r\n    //check chrome specific problems\r\n    const chromeUserAgent = navigator.userAgent.match(\"^.*Chrome\");\r\n    // const chromeCustomClasses= chromeUserAgent ? \"offset-to-navbar\": \"\";\r\n    return (\r\n      //FIXME: is not applied on the whole homepage (click outside symbols or mark text beforehand)\r\n      <div onKeyDown={(e:React.KeyboardEvent<HTMLInputElement>) => this.addGlobalKeysbindings(e)}>\r\n        { this.isInitialized() &&\r\n        <MenubarToolbar DEBUG={DEBUG} graph={this.state.graph} undoMgr={this.state.undoMgr} filename={this.state.filename}\r\n          handleFilenameChange={this.handleFilenameChange}\r\n          showHelpModal={this.showHelpModal}\r\n          showAboutModal={this.showAboutModal}\r\n          showKeyboardModal={this.showKeyboardModal}\r\n          showSaveAsModal={this.showSaveAsModal}\r\n          showEditStyleModal={this.showEditStyleModal}\r\n        />\r\n        }\r\n        {/* FIXME: not dynamic, when resizing window disappears */}\r\n        <div className=\"graphted-flex-container\">\r\n          <div className=\"offset-to-navbar\" style={{width: \"20%\", zIndex: \"2\"}} onMouseEnter={() => this.state.graph?.popupMenuHandler.hideMenu()}>\r\n            { this.isInitialized() && <>\r\n              {/* FIXME: set scrollbar to the right size */}\r\n              <ScrollPanel style={{width: \"(100%)\", height: \"90vh\"}} className=\"custom-scrollbar\">\r\n                <PrimeAccordion DEBUG={DEBUG} graph={this.state.graph} filename={this.state.filename} handleFilenameChange={this.handleFilenameChange}/>\r\n                {/*TODO: load actual svg representation of vertexStyle and prerender like the image nodes*/}\r\n                {/*TODO: use \"data\" attribute to load a specific vertexStyle e.g. a certain stencil or shape*/}\r\n                {/* <SingleNode graph={this.state.graph} /> */}\r\n                {/*Broken image in chrome under unix / VertexNode not draggable under firefox, even tho the svg is valid Issue #80 */}\r\n                {chromeUserAgent ? <VertexNode graph={this.state.graph} width={60} height={30} title=\"Drag me to add Text\" value=\"Enter text here\" data={defaultText}/>:\r\n                   <SingleNode graph={this.state.graph} stencilRegistry={mx.mxStencilRegistry} width={60} height={30} title={\"Drag me to add Text\"} value=\"Enter text here\" data={defaultText}/>\r\n                }\r\n              </ScrollPanel>\r\n              {/* Generic modal for display without large functionality */}\r\n              <Dialog modal={true} header={this.state.modalTitle} footer={() => {\r\n                return (\r\n                  <div>\r\n                    <Button label=\"Cancel\" icon=\"pi pi-times\" onClick={() => this.setState({displayResponsive: false})} className=\"p-button-text\" />\r\n                    <Button label=\"OK\" icon=\"pi pi-check\" onClick={() => {\r\n                      this.setState({displayResponsive: false});\r\n                    } } autoFocus />\r\n                  </div>);\r\n              } } visible={this.state.displayResponsive} onHide={() => {\r\n                this.setState({displayResponsive: false});\r\n              } } breakpoints={{\"960px\": \"75vw\", \"640px\": \"100vw\"}} style={{width: \"25vw\"}}>\r\n                {this.state.modalContent}\r\n              </Dialog>\r\n              {this.isInitialized() && <Dialog header='SaveAs' visible={this.state.displaySaveAs} onHide={() => this.setState({displaySaveAs: false})} breakpoints={{\"960px\": \"75vw\"}} style={{width: \"50vw\"}} footer={<Button label=\"OK\" onClick={() => {\r\n                this.setState({displaySaveAs: false});\r\n                editorActions.saveFile(editorActions.saveXml(this.state.graph!), this.state.filename);\r\n              }\r\n              } autoFocus />}>\r\n              Save As: <InputText value={this.state.filename} type=\"text\" onChange={(e) => {\r\n                  this.handleFilenameChange(e.target.value);\r\n                }}/>\r\n              </Dialog>\r\n              }\r\n              {this.isInitialized() && <Dialog modal={false} header=\"Edit Style\" footer={() => {\r\n                return (\r\n                  <div>\r\n                    <Button label=\"Cancel\" icon=\"pi pi-times\" onClick={() => this.setState({displayEditStyle: false})} className=\"p-button-text\" />\r\n                    <Button label=\"OK\" icon=\"pi pi-check\" onClick={() => {\r\n                      this.setState({displayEditStyle: false});\r\n                      if (this.state.graph && (this.state.currentStyle != undefined)) {\r\n                        this.state.graph.setCellStyle(this.state.currentStyle);\r\n                      }\r\n                    } } autoFocus />\r\n                  </div>);\r\n              } } visible={this.state.displayEditStyle} onHide={() => {\r\n                this.setState({displayEditStyle: false});\r\n              } } breakpoints={{\"960px\": \"75vw\", \"640px\": \"100vw\"}} style={{width: \"25vw\"}}>\r\n        Style:<br />\r\n                <InputTextarea value={this.state.currentStyle} onChange={(e) => {\r\n                  this.setState({currentStyle: e.target.value});\r\n                } } rows={5} cols={50} />\r\n              </Dialog>\r\n              }\r\n            </>\r\n            }\r\n          </div>\r\n\r\n          <div className=\"graph-container offset-to-navbar\" style={{width: \"60%\", zIndex: \"0\", outline: \"none\"}} ref={this.divGraph} id=\"divGraph\" onKeyDown={(e:React.KeyboardEvent<HTMLInputElement>) => this.addKeysbindings(e)} onWheel = {(e) => this.addMouseWheelZoom(e) } tabIndex={0} />\r\n\r\n          {/* FIXME: cannot scale right panel */}\r\n          <div className={\"primeTabViewArea\"} onMouseEnter={() => {\r\n            this.state.graph?.popupMenuHandler.hideMenu();\r\n            // document.getElementById(\"right-side-tabview\")?.focus();\r\n          }}>\r\n            { // TODO:GUI options\r\n            // FIXME: Panel gets pushed away when graph is too big (e.g.strongly zoomed in)\r\n            // TODO: show either Diagram options/hide (default) or TabView (something selected)\r\n              this.isInitialized() && <>\r\n                {/* <button onClick={ (e) => this.updateGraph()}>Refresh</button> */}\r\n                <PrimeTabView className=\"offset-to-navbar\" graph={this.state.graph} DEBUG={DEBUG}\r\n                  showEditStyleModal={this.showEditStyleModal}\r\n                />\r\n              </>\r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport GraphEditor from \"./GraphEditor\";\r\n\r\n// import 'bootstrap/dist/css/bootstrap.min.css';\r\nimport \"bootstrap-icons/font/bootstrap-icons.css\";\r\nimport \"primeicons/primeicons.css\";\r\nimport \"primeflex/primeflex.css\";\r\n\r\nReactDOM.render(\r\n/*   <React.StrictMode>\r\n    <App />\r\n    <MyMxGraph />\r\n  </React.StrictMode>, */\r\n    <React.StrictMode>\r\n      <GraphEditor />\r\n    </React.StrictMode>,\r\n    document.getElementById(\"root\"),\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals(console.log);\r\n"],"sourceRoot":""}